<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Chat et la Glace qui Sauve le Monde</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            background: #f8f9fa;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .nav-btn.active {
            background: #764ba2;
            font-weight: bold;
        }
        
        .content {
            padding: 40px;
            display: none;
        }
        
        .content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .story-text {
            line-height: 1.8;
            font-size: 1.1em;
            color: #333;
        }
        
        .story-text p {
            margin-bottom: 20px;
        }
        
        .dialogue {
            background: #f0f4ff;
            padding: 15px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .chapter-title {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 30px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .vocab-section {
            background: #fff3cd;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }
        
        .vocab-title {
            color: #856404;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        
        .drag-drop-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .word-bank {
            background: white;
            padding: 20px;
            border-radius: 10px;
            min-height: 200px;
        }
        
        .drop-zones {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .draggable {
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: move;
            display: inline-block;
            margin: 5px;
            transition: all 0.3s;
            user-select: none;
        }
        
        .draggable:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .draggable.dragging {
            opacity: 0.5;
        }
        
        .drop-zone {
            background: white;
            border: 2px dashed #667eea;
            padding: 15px;
            border-radius: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .drop-zone.over {
            background: #e7eaff;
            border-color: #764ba2;
        }
        
        .drop-zone.correct {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .drop-zone.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .quiz-section {
            background: #d1ecf1;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }
        
        .quiz-title {
            color: #0c5460;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        
        .question {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .question-text {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .option {
            background: #f8f9fa;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .option.selected {
            border-color: #667eea;
            background: #e7eaff;
        }
        
        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .check-btn {
            background: #28a745;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .check-btn:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .reset-btn {
            background: #6c757d;
            color: white;
            padding: 10px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
            transition: all 0.3s;
        }
        
        .reset-btn:hover {
            background: #5a6268;
        }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }
        
        .feedback.show {
            display: block;
        }
        
        .drawing-section {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }
        
        .drawing-title {
            color: #2e7d32;
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .drawing-section > p {
            margin-bottom: 20px;
        }
        
        .drawing-controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-row {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-label {
            font-weight: bold;
            color: #2e7d32;
            min-width: 70px;
        }
        
        .color-palette {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .color-btn {
            width: 38px;
            height: 38px;
            border: 2px solid #333;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .color-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        
        .color-btn.active {
            border: 3px solid #000;
            box-shadow: 0 0 0 2px #fff, 0 0 0 4px #000;
        }
        
        .pen-size-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .pen-size-control input[type="range"] {
            width: 150px;
        }
        
        .pen-size-display {
            min-width: 45px;
            text-align: center;
            font-weight: bold;
            color: #2e7d32;
        }
        
        .drawing-canvas {
            border: 3px solid #2e7d32;
            border-radius: 10px;
            background: white;
            cursor: crosshair;
            display: block;
            margin: 0 auto;
            touch-action: none;
        }
        
        .canvas-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .canvas-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .undo-btn {
            background: #2196F3;
            color: white;
        }
        
        .undo-btn:hover {
            background: #1976D2;
        }
        
        .undo-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .redo-btn {
            background: #4CAF50;
            color: white;
        }
        
        .redo-btn:hover {
            background: #388E3C;
        }
        
        .redo-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .clear-btn {
            background: #f44336;
            color: white;
        }
        
        .clear-btn:hover {
            background: #d32f2f;
        }
        
        .eraser-btn {
            background: #ff9800;
            color: white;
        }
        
        .eraser-btn:hover {
            background: #f57c00;
        }
        
        .eraser-btn.active {
            background: #e65100;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .drag-drop-container {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .drawing-canvas {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🐱❄️ Le Chat et la Glace qui Sauve le Monde 🌍</h1>
        </div>
        
        <div class="navigation" id="nav-container">
            <button class="nav-btn active" data-chapter="1">Chapitre 1 🐱</button>
            <button class="nav-btn" data-chapter="2">Chapitre 2 💡</button>
            <button class="nav-btn" data-chapter="3">Chapitre 3 ⛵</button>
            <button class="nav-btn" data-chapter="4">Chapitre 4 🏗️</button>
            <button class="nav-btn" data-chapter="5">Chapitre 5 🌟</button>
        </div>
        
        <!-- CHAPTER 1 -->
        <div id="chapter1" class="content active">
            <h2 class="chapter-title">Chapitre 1 : Un chat qui perd ses poils 🐱😢</h2>
            
            <div class="story-text">
                <p>Pia regarde son chat. Elle regarde encore. Elle ne peut pas croire ses yeux. 👀</p>
                
                <div class="dialogue">
                    <p>« Quirin ! » crie-t-elle. « Viens ici ! Vite ! » 🗣️</p>
                </div>
                
                <p>Son frère arrive dans la cuisine. Il a seize ans et il est toujours calme. Mais quand il voit Flocke, il ouvre la bouche. Il ne dit rien pendant trois secondes. 😮</p>
                
                <div class="dialogue">
                    <p>« Le chat... » commence Quirin.</p>
                    <p>« Oui ! » dit Pia.</p>
                    <p>« Il a... »</p>
                    <p>« Oui ! »</p>
                    <p>« Des taches chauves ? »</p>
                    <p>« OUI ! »</p>
                </div>
                
                <p>Flocke est assis sur la table. Normalement, il est magnifique avec sa fourrure blanche comme la neige. ❄️ C'est pour ça qu'il s'appelle Flocke—le mot allemand pour « flocon de neige ». Mais maintenant, sa belle fourrure tombe. Il y a des petites taches roses sur son dos. Sur ses pattes. Même sur sa queue. 😿</p>
                
                <p>Pia touche doucement une des taches. La peau est chaude et lisse.</p>
                
                <div class="dialogue">
                    <p>« Oh non », murmure-t-elle.</p>
                </div>
                
                <p>« Peut-être qu'il est malade ? » demande Pia. Elle a quatorze ans et elle adore son chat. Elle l'adore depuis sept ans. « Nous devons l'amener chez le vétérinaire ! » 🏥</p>
                
                <p>Quirin prend son téléphone. 📱 « Je vais chercher sur Internet », dit-il. Il tape rapidement. « Chat blanc perd ses poils. »</p>
                
                <p>Pendant que Quirin cherche, Pia caresse Flocke très doucement. Elle a peur de toucher les taches roses. Le chat ne ronronne pas. Il tremble un peu.</p>
                
                <div class="dialogue">
                    <p>« Il n'y a rien », dit Quirin après quelques minutes. Il fronce les sourcils. « Rien qui corresponde à ça. »</p>
                </div>
                
                <p>Soudain, Flocke ouvre la bouche. 😲</p>
                
                <div class="dialogue">
                    <p>« C'est à cause du réchauffement climatique », dit le chat. 🌡️</p>
                </div>
                
                <p>Pia tombe de sa chaise. Quirin laisse tomber son téléphone. Ils regardent Flocke. Le chat les regarde aussi. Ses yeux verts sont tristes.</p>
                
                <div class="dialogue">
                    <p>« Quoi ? » dit Pia, par terre.</p>
                    <p>« Tu... tu parles ? » demande Quirin. Sa voix est très petite.</p>
                    <p>« Évidemment, je parle », répond Flocke. Sa voix est douce mais pleine de détresse. « À cause du changement climatique, je perds mon pelage. Il fait trop chaud. Beaucoup trop chaud. Mon corps ne peut plus supporter cette température. » 🔥</p>
                </div>
                
                <p>Le chat saute de la table. Il marche vers la fenêtre. Dehors, il fait chaud. Très chaud. C'est le mois de mars, mais on dirait l'été. Le thermomètre indique 28 degrés. 🌞</p>
                
                <div class="dialogue">
                    <p>« Bientôt, il n'y aura plus de neige », continue Flocke. Il regarde par la fenêtre. « Mon nom n'aura plus de sens. Et moi... moi je serai chauve. Complètement chauve. »</p>
                </div>
                
                <p>Sa voix se brise un peu.</p>
                
                <div class="dialogue">
                    <p>« Je ne veux pas être nu ! » dit-il. « Je ne veux pas être un chat rose sans poils ! C'est horrible ! J'aurai froid en hiver et trop chaud en été ! Et les autres chats vont se moquer de moi ! » 😭</p>
                </div>
                
                <p>Pia se lève lentement. Son cœur bat très fort. 💓 Son chat parle. Son chat perd tous ses poils. Et son chat a une crise existentielle.</p>
                
                <div class="dialogue">
                    <p>« Combien de temps avant que... » commence Pia.</p>
                    <p>« Une semaine », répond Flocke tristement. « Peut-être deux. Et puis je serai complètement chauve. Un Flocke sans flocons. Un chat sans fourrure. Plus rien. »</p>
                </div>
                
                <p>Il se met à pleurer. De vraies larmes de chat coulent sur sa fourrure blanche. 😢</p>
                
                <div class="dialogue">
                    <p>« Nous devons faire quelque chose », dit Pia. Elle prend Flocke dans ses bras très doucement.</p>
                    <p>Quirin hoche la tête. « Oui. Mais quoi ? » 🤔</p>
                </div>
            </div>
            
            <!-- Vocab Exercise Chapter 1 -->
            <div class="vocab-section">
                <h3 class="vocab-title">📚 Exercice de Vocabulaire</h3>
                <p><strong>Glissez les mots français vers leurs définitions :</strong></p>
                
                <div class="drag-drop-container">
                    <div class="word-bank" id="wordBank1">
                        <div class="draggable" draggable="true" data-word="chauve">chauve</div>
                        <div class="draggable" draggable="true" data-word="la fourrure">la fourrure</div>
                        <div class="draggable" draggable="true" data-word="le réchauffement">le réchauffement</div>
                        <div class="draggable" draggable="true" data-word="crier">crier</div>
                        <div class="draggable" draggable="true" data-word="pleurer">pleurer</div>
                    </div>
                    
                    <div class="drop-zones">
                        <div class="drop-zone" data-answer="crier">
                            <span>to shout/yell</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="la fourrure">
                            <span>fur</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="chauve">
                            <span>bald</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="pleurer">
                            <span>to cry</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="le réchauffement">
                            <span>warming (climate change)</span>
                            <span class="dropped-word"></span>
                        </div>
                    </div>
                </div>
                
                <button class="check-btn vocab-check" data-chapter="1">Vérifier ✓</button>
                <button class="reset-btn vocab-reset" data-chapter="1">Recommencer ↺</button>
                <div id="vocabFeedback1" class="feedback"></div>
            </div>
            
            <!-- Quiz Chapter 1 -->
            <div class="quiz-section">
                <h3 class="quiz-title">❓ Questions de Compréhension</h3>
                
                <div class="question" data-question="1-1">
                    <div class="question-text">1. Quelle est l'apparence normale de Flocke ?</div>
                    <div class="option" data-correct="false">A) Il est noir comme la nuit</div>
                    <div class="option" data-correct="true">B) Il est blanc comme la neige</div>
                    <div class="option" data-correct="false">C) Il est orange avec des rayures</div>
                    <div class="option" data-correct="false">D) Il est gris et blanc</div>
                </div>
                
                <div class="question" data-question="1-2">
                    <div class="question-text">2. Selon Flocke, pourquoi est-ce qu'il perd ses poils ?</div>
                    <div class="option" data-correct="false">A) Il est très vieux</div>
                    <div class="option" data-correct="false">B) Il a une maladie</div>
                    <div class="option" data-correct="true">C) À cause du réchauffement climatique</div>
                    <div class="option" data-correct="false">D) Il a mangé quelque chose de mauvais</div>
                </div>
                
                <div class="question" data-question="1-3">
                    <div class="question-text">3. Combien de temps est-ce que Flocke a avant de perdre tous ses poils ?</div>
                    <div class="option" data-correct="false">A) Un jour ou deux</div>
                    <div class="option" data-correct="true">B) Une ou deux semaines</div>
                    <div class="option" data-correct="false">C) Un mois</div>
                    <div class="option" data-correct="false">D) Un an</div>
                </div>
                
                <div class="question" data-question="1-4">
                    <div class="question-text">4. 💭 Question de réflexion : Si ton animal de compagnie commençait soudainement à parler, quelle serait ta première réaction ?</div>
                    <div class="option" data-correct="true">A) Je tomberais par terre de surprise</div>
                    <div class="option" data-correct="true">B) Je poserais beaucoup de questions</div>
                    <div class="option" data-correct="true">C) J'aurais peur au début</div>
                    <div class="option" data-correct="true">D) Je serais très excité(e)</div>
                    <p style="font-size:0.9em; color:#666; margin-top:10px;"><em>Toutes les réponses sont acceptables pour cette question !</em></p>
                </div>
                
                <button class="check-btn quiz-check" data-quiz="1">Vérifier les réponses ✓</button>
                <div id="quizFeedback1" class="feedback"></div>
            </div>
            
            <!-- Drawing Section Chapter 1 -->
            <div class="drawing-section">
                <h3 class="drawing-title">🎨 Dessine Flocke !</h3>
                <p><strong>Dessine comment tu imagines Flocke avec ses taches chauves :</strong></p>
                
                <div class="drawing-controls">
                    <div class="control-row">
                        <span class="control-label">Couleur:</span>
                        <div class="color-palette">
                            <div class="color-btn active" data-color="#000000" style="background-color: #000000;" title="Noir"></div>
                            <div class="color-btn" data-color="#FF0000" style="background-color: #FF0000;" title="Rouge"></div>
                            <div class="color-btn" data-color="#FFA500" style="background-color: #FFA500;" title="Orange"></div>
                            <div class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;" title="Jaune"></div>
                            <div class="color-btn" data-color="#00FF00" style="background-color: #00FF00;" title="Vert"></div>
                            <div class="color-btn" data-color="#0000FF" style="background-color: #0000FF;" title="Bleu"></div>
                            <div class="color-btn" data-color="#4B0082" style="background-color: #4B0082;" title="Indigo"></div>
                            <div class="color-btn" data-color="#EE82EE" style="background-color: #EE82EE;" title="Violet"></div>
                            <div class="color-btn" data-color="#FFC0CB" style="background-color: #FFC0CB;" title="Rose"></div>
                            <div class="color-btn" data-color="#8B4513" style="background-color: #8B4513;" title="Brun"></div>
                            <div class="color-btn" data-color="#808080" style="background-color: #808080;" title="Gris"></div>
                            <div class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF; border-color: #999;" title="Blanc"></div>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <span class="control-label">Taille:</span>
                        <div class="pen-size-control">
                            <input type="range" class="pen-size-slider" min="1" max="20" value="3">
                            <span class="pen-size-display">3px</span>
                        </div>
                    </div>
                </div>
                
                <canvas class="drawing-canvas" data-canvas="1" width="600" height="400"></canvas>
                
                <div class="canvas-buttons">
                    <button class="canvas-btn undo-btn" data-canvas="1" disabled>↶ Annuler</button>
                    <button class="canvas-btn redo-btn" data-canvas="1" disabled>↷ Refaire</button>
                    <button class="canvas-btn eraser-btn" data-canvas="1">Gomme 🧹</button>
                    <button class="canvas-btn clear-btn" data-canvas="1">Effacer tout 🗑️</button>
                </div>
            </div>
        </div>
        
        <!-- CHAPTER 2 -->
        <div id="chapter2" class="content">
            <h2 class="chapter-title">Chapitre 2 : Un plan fou 💡🤪</h2>
            
            <div class="story-text">
                <p>Pendant trois jours, Pia et Quirin pensent. Ils pensent tout le temps. 🤔 Comment peuvent-ils aider Flocke ? Comment peuvent-ils arrêter le réchauffement climatique ?</p>
                
                <p>Chaque jour, Flocke perd plus de poils. Maintenant, il a de grandes taches roses sur tout le corps. Il passe ses journées devant la fenêtre, enroulé dans une petite couverture douce. 🛏️</p>
                
                <div class="dialogue">
                    <p>« Qui suis-je ? » demande-t-il souvent. « Un Flocke sans fourrure n'est pas un vrai Flocke. Et je vais être si laid ! Si ridicule ! » 😔</p>
                </div>
                
                <p>Il refuse de regarder dans le miroir. 🪞 Il refuse de sortir. Il a trop honte.</p>
                
                <div class="dialogue">
                    <p>« Je vais avoir besoin de petits pulls », dit-il tristement. « Des pulls pour chat chauve. Quelle humiliation ! » 😿</p>
                </div>
                
                <p>Le mercredi soir, Pia a une idée. Une idée folle. 💡</p>
                
                <div class="dialogue">
                    <p>« Quirin ! » dit-elle. Ils sont dans le salon. « J'ai trouvé ! »</p>
                    <p>« Quoi ? » Son frère lève les yeux de son ordinateur. 💻</p>
                    <p>« Nous allons construire un magasin de glace géant au milieu de l'océan ! » 🍦🌊</p>
                </div>
                
                <p>Quirin la regarde. Il ne dit rien.</p>
                
                <div class="dialogue">
                    <p>« Pour refroidir l'atmosphère ! » continue Pia. Ses yeux brillent. ✨ « Un magasin de glace énorme ! Avec des panneaux solaires et des éoliennes ! » ☀️💨</p>
                    <p>« Tu es folle », dit Quirin.</p>
                    <p>« Non ! Écoute ! » Pia s'assoit à côté de lui. « La glace est froide. Si nous fabriquons beaucoup de glace, nous pouvons refroidir l'air. Et si nous utilisons seulement l'énergie solaire et éolienne, nous ne polluons pas ! Si la température baisse, Flocke va arrêter de perdre ses poils ! » 🌡️❄️</p>
                </div>
                
                <p>Flocke entre dans le salon, enroulé dans sa couverture. On voit maintenant sa peau rose sur presque tout son corps. Seulement quelques touffes de fourrure blanche restent sur sa tête et sa queue.</p>
                
                <div class="dialogue">
                    <p>« C'est une idée intéressante », dit le chat d'une petite voix. « Mais est-ce que ça va vraiment fonctionner ? Et est-ce que ce sera assez rapide ? Je vais être complètement chauve dans quatre jours ! » ⏰</p>
                </div>
                
                <p>Quirin réfléchit. Il aime les sciences. 🔬 Il aime résoudre les problèmes.</p>
                
                <div class="dialogue">
                    <p>« En théorie... » commence-t-il lentement. « Si le magasin est assez grand... et si nous utilisons des technologies pour refroidir l'air... peut-être. Mais ce ne sera pas instantané. »</p>
                    <p>« Peut-être ? » répète Pia. « Tu veux dire oui ! »</p>
                    <p>« Je veux dire que c'est très compliqué », répond Quirin. « Nous devons penser aux animaux marins. Aux coraux. 🪸 À la température de l'océan. Nous ne pouvons pas simplement construire quelque chose sans plan. »</p>
                    <p>« Alors faisons un plan ! » Pia saute sur ses pieds. « Nous avons Internet ! Nous avons notre cerveau ! 🧠 Nous pouvons le faire ! »</p>
                </div>
                
                <p>Flocke touche les dernières touffes de fourrure sur sa tête. Ses yeux se remplissent de larmes. 😢</p>
                
                <div class="dialogue">
                    <p>« S'il vous plaît », dit-il doucement. « Je ne veux pas être nu. Je veux rester Flocke. Je veux garder ma belle fourrure blanche. »</p>
                </div>
                
                <p>Pia prend le chat dans ses bras, couverture comprise.</p>
                
                <div class="dialogue">
                    <p>« Tu vas garder ta fourrure », promet-elle. « Nous allons sauver chaque poil. » 💪</p>
                </div>
                
                <p>Quirin ouvre un nouveau document sur son ordinateur.</p>
                
                <div class="dialogue">
                    <p>« D'accord », dit-il. « Commençons. Mais nous devons être intelligents. Nous devons être responsables. Et nous devons être RAPIDES. » ⚡</p>
                </div>
                
                <p>Les trois—deux humains et un chat qui parle—travaillent toute la nuit. 🌙 Ils dessinent des plans. Ils lisent des articles sur l'océan, sur les coraux, sur les animaux marins. 🐠 Ils calculent combien de panneaux solaires ils ont besoin. Combien d'éoliennes.</p>
                
                <p>Au matin, ils ont un plan. Un plan fou. Mais un plan possible. ✅</p>
                
                <div class="dialogue">
                    <p>« Nous allons avoir besoin d'aide », dit Quirin. « Beaucoup d'aide. Et très vite. »</p>
                    <p>« Alors trouvons de l'aide », répond Pia. Elle regarde Flocke qui dort dans sa couverture. « Nous n'avons pas le choix. »</p>
                </div>
            </div>
            
            <!-- Vocab Exercise Chapter 2 -->
            <div class="vocab-section">
                <h3 class="vocab-title">📚 Exercice de Vocabulaire</h3>
                <p><strong>Glissez les mots français vers leurs définitions :</strong></p>
                
                <div class="drag-drop-container">
                    <div class="word-bank" id="wordBank2">
                        <div class="draggable" draggable="true" data-word="la glace">la glace</div>
                        <div class="draggable" draggable="true" data-word="refroidir">refroidir</div>
                        <div class="draggable" draggable="true" data-word="une éolienne">une éolienne</div>
                        <div class="draggable" draggable="true" data-word="un panneau solaire">un panneau solaire</div>
                        <div class="draggable" draggable="true" data-word="polluer">polluer</div>
                    </div>
                    
                    <div class="drop-zones">
                        <div class="drop-zone" data-answer="un panneau solaire">
                            <span>solar panel</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="refroidir">
                            <span>to cool down</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="la glace">
                            <span>ice cream / ice</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="polluer">
                            <span>to pollute</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="une éolienne">
                            <span>wind turbine</span>
                            <span class="dropped-word"></span>
                        </div>
                    </div>
                </div>
                
                <button class="check-btn vocab-check" data-chapter="2">Vérifier ✓</button>
                <button class="reset-btn vocab-reset" data-chapter="2">Recommencer ↺</button>
                <div id="vocabFeedback2" class="feedback"></div>
            </div>
            
            <!-- Quiz Chapter 2 -->
            <div class="quiz-section">
                <h3 class="quiz-title">❓ Questions de Compréhension</h3>
                
                <div class="question" data-question="2-1">
                    <div class="question-text">1. Qu'est-ce que Flocke dit qu'il va avoir besoin ?</div>
                    <div class="option" data-correct="false">A) Un nouveau nom</div>
                    <div class="option" data-correct="true">B) Des petits pulls</div>
                    <div class="option" data-correct="false">C) Un chapeau</div>
                    <div class="option" data-correct="false">D) Des lunettes de soleil</div>
                </div>
                
                <div class="question" data-question="2-2">
                    <div class="question-text">2. Quelle est l'idée folle de Pia ?</div>
                    <div class="option" data-correct="false">A) Construire un igloo géant</div>
                    <div class="option" data-correct="true">B) Construire un magasin de glace au milieu de l'océan</div>
                    <div class="option" data-correct="false">C) Déménager au pôle Nord</div>
                    <div class="option" data-correct="false">D) Acheter un réfrigérateur pour Flocke</div>
                </div>
                
                <div class="question" data-question="2-3">
                    <div class="question-text">3. Pourquoi est-ce que Quirin dit qu'ils doivent être "responsables" ?</div>
                    <div class="option" data-correct="false">A) Pour ne pas dépenser trop d'argent</div>
                    <div class="option" data-correct="true">B) Pour protéger les animaux marins et l'océan</div>
                    <div class="option" data-correct="false">C) Pour finir leurs devoirs</div>
                    <div class="option" data-correct="false">D) Pour ne pas faire de bruit</div>
                </div>
                
                <div class="question" data-question="2-4">
                    <div class="question-text">4. 💭 Si tu devais créer un projet pour aider l'environnement rapidement, qu'est-ce que tu ferais ?</div>
                    <div class="option" data-correct="true">A) Je planterais beaucoup d'arbres</div>
                    <div class="option" data-correct="true">B) Je créerais une campagne de recyclage</div>
                    <div class="option" data-correct="true">C) J'utiliserais seulement l'énergie solaire</div>
                    <div class="option" data-correct="true">D) J'éduquerais les gens sur le climat</div>
                    <p style="font-size:0.9em; color:#666; margin-top:10px;"><em>Toutes les réponses sont acceptables !</em></p>
                </div>
                
                <button class="check-btn quiz-check" data-quiz="2">Vérifier les réponses ✓</button>
                <div id="quizFeedback2" class="feedback"></div>
            </div>
            
            <!-- Drawing Section Chapter 2 -->
            <div class="drawing-section">
                <h3 class="drawing-title">🎨 Dessine le magasin de glace !</h3>
                <p><strong>Dessine comment tu imagines le magasin de glace au milieu de l'océan :</strong></p>
                
                <div class="drawing-controls">
                    <div class="control-row">
                        <span class="control-label">Couleur:</span>
                        <div class="color-palette">
                            <div class="color-btn active" data-color="#000000" style="background-color: #000000;"></div>
                            <div class="color-btn" data-color="#FF0000" style="background-color: #FF0000;"></div>
                            <div class="color-btn" data-color="#FFA500" style="background-color: #FFA500;"></div>
                            <div class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;"></div>
                            <div class="color-btn" data-color="#00FF00" style="background-color: #00FF00;"></div>
                            <div class="color-btn" data-color="#0000FF" style="background-color: #0000FF;"></div>
                            <div class="color-btn" data-color="#4B0082" style="background-color: #4B0082;"></div>
                            <div class="color-btn" data-color="#EE82EE" style="background-color: #EE82EE;"></div>
                            <div class="color-btn" data-color="#FFC0CB" style="background-color: #FFC0CB;"></div>
                            <div class="color-btn" data-color="#8B4513" style="background-color: #8B4513;"></div>
                            <div class="color-btn" data-color="#808080" style="background-color: #808080;"></div>
                            <div class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF; border-color: #999;"></div>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <span class="control-label">Taille:</span>
                        <div class="pen-size-control">
                            <input type="range" class="pen-size-slider" min="1" max="20" value="3">
                            <span class="pen-size-display">3px</span>
                        </div>
                    </div>
                </div>
                
                <canvas class="drawing-canvas" data-canvas="2" width="600" height="400"></canvas>
                
                <div class="canvas-buttons">
                    <button class="canvas-btn undo-btn" data-canvas="2" disabled>↶ Annuler</button>
                    <button class="canvas-btn redo-btn" data-canvas="2" disabled>↷ Refaire</button>
                    <button class="canvas-btn eraser-btn" data-canvas="2">Gomme 🧹</button>
                    <button class="canvas-btn clear-btn" data-canvas="2">Effacer tout 🗑️</button>
                </div>
            </div>
        </div>
        
        <!-- CHAPTER 3 -->
        <div id="chapter3" class="content">
            <h2 class="chapter-title">Chapitre 3 : Le voyage commence ⛵🌊</h2>
            
            <div class="story-text">
                <p>Trouver de l'aide n'est pas facile. 😓</p>
                
                <p>Pia et Quirin parlent à leurs professeurs. Les professeurs sourient et disent : « C'est une idée créative ! » Mais ils ne les aident pas.</p>
                
                <p>Ils parlent à leurs parents. Leurs parents disent : « C'est adorable que vous vouliez aider la planète ! » Mais ils pensent que c'est juste un rêve d'enfants.</p>
                
                <p>Flocke perd encore plus de poils. Le cinquième jour, il est presque complètement chauve. Il reste seulement une petite touffe de fourrure blanche sur le bout de sa queue. 😿</p>
                
                <div class="dialogue">
                    <p>« C'est mon dernier flocon », dit-il tristement. Il regarde sa queue. « Bientôt, même ça va disparaître. »</p>
                </div>
                
                <p>Il reste dans la couverture tout le temps. Il ne mange presque plus. Il a trop honte.</p>
                
                <div class="dialogue">
                    <p>« Je ne suis plus moi-même », dit-il. « Je suis juste... rose. Et ridicule. »</p>
                </div>
                
                <p>Pia le caresse doucement. Sa peau est douce mais si étrange sans fourrure.</p>
                
                <div class="dialogue">
                    <p>« Nous n'abandonnons pas », dit-elle. 💪</p>
                </div>
                
                <p>Mais dans son cœur, elle a peur. 💔 Ils n'ont plus beaucoup de temps.</p>
                
                <p>Puis, un jour, tout change. ✨</p>
                
                <p>Quirin poste leur plan sur Internet. 🌐 Il écrit : « Deux jeunes et un chat intelligent veulent sauver la planète. Nous avons un plan. Nous avons besoin d'aide URGENTE. Notre chat perd tous ses poils à cause du réchauffement climatique. »</p>
                
                <p>Il ajoute une photo de Flocke. 📸 Le chat est presque chauve, enroulé dans sa couverture, avec ses grands yeux verts tristes.</p>
                
                <p>Le lendemain, ils ont trois mille messages. Le jour suivant, trente mille. Une semaine plus tard, toute l'Internet parle d'eux. 🚀</p>
                
                <p>« Sauvons Flocke ! » devient un hashtag populaire. #️⃣ Des milliers de personnes partagent la photo du chat chauve.</p>
                
                <p>Des scientifiques les contactent. 👩‍🔬👨‍🔬 « Votre idée est intéressante », écrivent-ils. « Et nous voulons aider ce pauvre chat. Nous allons travailler vite. »</p>
                
                <p>Des ingénieurs envoient des plans améliorés. 🏗️ Des artistes dessinent le magasin de glace. Il est magnifique : un grand bâtiment blanc avec des panneaux solaires brillants sur le toit. Des éoliennes tournent autour comme des danseurs géants. 💃</p>
                
                <p>Une compagnie offre de donner les matériaux. Une autre offre un bateau. 🚢 Une équipe de biologistes marins dit : « Nous allons vous aider à protéger les animaux et les coraux. » 🐠🪸</p>
                
                <div class="dialogue">
                    <p>« Et nous allons travailler jour et nuit », promettent les ingénieurs. « Pour Flocke. » ⚙️</p>
                </div>
                
                <p>En deux semaines—un record—tout est prêt. ⚡</p>
                
                <p>Un mardi matin, Pia, Quirin et Flocke montent sur un bateau. Le bateau est grand et sent le sel et les poissons. 🌊 Il y a quinze scientifiques avec eux. Il y a des ingénieurs. Il y a des spécialistes des océans.</p>
                
                <p>Flocke porte un petit pull bleu. 🧥 Il est complètement chauve maintenant, sauf pour la petite touffe sur sa queue. Il a très honte, mais il essaie d'être courageux.</p>
                
                <div class="dialogue">
                    <p>« Nous allons au milieu de l'Atlantique », explique Docteur Rousseau. 🗺️</p>
                </div>
                
                <p>C'est une femme avec des cheveux gris et des yeux gentils.</p>
                
                <div class="dialogue">
                    <p>« Nous avons trouvé l'endroit parfait. Pas trop près des récifs coralliens. Pas sur une route migratoire des baleines. » 🐋</p>
                </div>
                
                <p>Le bateau voyage pendant trois jours. Pendant le voyage, Pia apprend beaucoup de choses. 📚</p>
                
                <p>Elle apprend que l'océan est en train de mourir. L'eau devient trop chaude. 🌡️ Les coraux deviennent blancs—on appelle ça le blanchissement. Les poissons n'ont plus assez à manger.</p>
                
                <div class="dialogue">
                    <p>« Comme moi », dit Flocke doucement. « Les coraux perdent leur couleur. Je perds ma fourrure. Nous souffrons tous à cause de la chaleur. » 😢</p>
                </div>
                
                <p>Docteur Rousseau hoche la tête.</p>
                
                <div class="dialogue">
                    <p>« C'est pour ça que votre projet est important », dit-elle. « Mais il ne suffit pas de refroidir l'air. Nous devons aussi changer nos habitudes. » ♻️</p>
                    <p>« Je sais », répond Pia. « C'est pour ça que nous voulons que les gens viennent ici. Pour qu'ils voient l'océan. Pour qu'ils comprennent. Et pour qu'ils voient Flocke. »</p>
                </div>
                
                <p>Quirin travaille avec les ingénieurs. 👷 Ils vérifient tous les plans. Ils s'assurent que le magasin ne va pas polluer. Ils installent des systèmes pour surveiller la température de l'eau.</p>
                
                <div class="dialogue">
                    <p>« Si l'eau devient trop froide, nous devons arrêter », dit Quirin. Il est sérieux. « Nous ne voulons pas aider d'un côté et détruire de l'autre. » ⚖️</p>
                </div>
                
                <p>Flocke reste sur le pont du bateau, dans son petit pull. Le vent est frais. 🌬️ Sans sa fourrure, il a froid. Mais il regarde l'océan bleu et infini avec espoir.</p>
                
                <div class="dialogue">
                    <p>« Peut-être », dit-il à Pia une nuit, « peut-être que ma fourrure va repousser quand l'air sera plus frais. » 🙏</p>
                    <p>« Elle va repousser », dit Pia fermement. « J'en suis sûre. » ✨</p>
                </div>
                
                <p>Flocke touche la dernière touffe de fourrure sur sa queue.</p>
                
                <div class="dialogue">
                    <p>« Mon dernier flocon », murmure-t-il. « Ne tombe pas. Pas encore. » ❄️</p>
                </div>
            </div>
            
            <!-- Vocab Exercise Chapter 3 -->
            <div class="vocab-section">
                <h3 class="vocab-title">📚 Exercice de Vocabulaire</h3>
                <p><strong>Glissez les mots français vers leurs définitions :</strong></p>
                
                <div class="drag-drop-container">
                    <div class="word-bank" id="wordBank3">
                        <div class="draggable" draggable="true" data-word="un bateau">un bateau</div>
                        <div class="draggable" draggable="true" data-word="un scientifique">un scientifique</div>
                        <div class="draggable" draggable="true" data-word="le blanchissement">le blanchissement</div>
                        <div class="draggable" draggable="true" data-word="surveiller">surveiller</div>
                        <div class="draggable" draggable="true" data-word="honte">honte</div>
                    </div>
                    
                    <div class="drop-zones">
                        <div class="drop-zone" data-answer="surveiller">
                            <span>to monitor/watch over</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="honte">
                            <span>shame</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="un bateau">
                            <span>boat</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="le blanchissement">
                            <span>bleaching (coral)</span>
                            <span class="dropped-word"></span>
                        </div>
                        <div class="drop-zone" data-answer="un scientifique">
                            <span>scientist</span>
                            <span class="dropped-word"></span>
                        </div>
                    </div>
                </div>
                
                <button class="check-btn vocab-check" data-chapter="3">Vérifier ✓</button>
                <button class="reset-btn vocab-reset" data-chapter="3">Recommencer ↺</button>
                <div id="vocabFeedback3" class="feedback"></div>
            </div>
            
            <!-- Quiz Chapter 3 -->
            <div class="quiz-section">
                <h3 class="quiz-title">❓ Questions de Compréhension</h3>
                
                <div class="question" data-question="3-1">
                    <div class="question-text">1. Qu'est-ce qui reste de la fourrure de Flocke au cinquième jour ?</div>
                    <div class="option" data-correct="false">A) Toute sa fourrure</div>
                    <div class="option" data-correct="true">B) Une petite touffe sur sa queue</div>
                    <div class="option" data-correct="false">C) Seulement sur sa tête</div>
                    <div class="option" data-correct="false">D) Plus rien du tout</div>
                </div>
                
                <div class="question" data-question="3-2">
                    <div class="question-text">2. Comment est-ce que le plan devient viral sur Internet ?</div>
                    <div class="option" data-correct="false">A) Les parents postent une vidéo</div>
                    <div class="option" data-correct="true">B) Quirin poste le plan et une photo de Flocke</div>
                    <div class="option" data-correct="false">C) Un professeur parle à la télévision</div>
                    <div class="option" data-correct="false">D) Flocke crée un compte Instagram</div>
                </div>
                
                <div class="question" data-question="3-3">
                    <div class="question-text">3. Quelle connexion est-ce que Flocke fait entre les coraux et lui-même ?</div>
                    <div class="option" data-correct="false">A) Ils sont tous les deux bleus</div>
                    <div class="option" data-correct="true">B) Ils perdent tous les deux leur couleur à cause de la chaleur</div>
                    <div class="option" data-correct="false">C) Ils vivent tous les deux dans l'océan</div>
                    <div class="option" data-correct="false">D) Ils sont tous les deux très vieux</div>
                </div>
                
                <div class="question" data-question="3-4">
                    <div class="question-text">4. 💭 Si tu étais sur ce bateau, qu'est-ce que tu dirais à Flocke pour lui remonter le moral ?</div>
                    <div class="option" data-correct="true">A) "Tu es très courageux !"</div>
                    <div class="option" data-correct="true">B) "Ta fourrure va repousser bientôt"</div>
                    <div class="option" data-correct="true">C) "Tu es toujours beau, même sans poils"</div>
                    <div class="option" data-correct="true">D) "Tu inspires le monde entier !"</div>
                    <p style="font-size:0.9em; color:#666; margin-top:10px;"><em>Toutes les réponses sont acceptables !</em></p>
                </div>
                
                <button class="check-btn quiz-check" data-quiz="3">Vérifier les réponses ✓</button>
                <div id="quizFeedback3" class="feedback"></div>
            </div>
            
            <!-- Drawing Section Chapter 3 -->
            <div class="drawing-section">
                <h3 class="drawing-title">🎨 Dessine le bateau !</h3>
                <p><strong>Dessine le bateau avec Pia, Quirin, Flocke et tous les scientifiques :</strong></p>
                
                <div class="drawing-controls">
                    <div class="control-row">
                        <span class="control-label">Couleur:</span>
                        <div class="color-palette">
                            <div class="color-btn active" data-color="#000000" style="background-color: #000000;"></div>
                            <div class="color-btn" data-color="#FF0000" style="background-color: #FF0000;"></div>
                            <div class="color-btn" data-color="#FFA500" style="background-color: #FFA500;"></div>
                            <div class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;"></div>
                            <div class="color-btn" data-color="#00FF00" style="background-color: #00FF00;"></div>
                            <div class="color-btn" data-color="#0000FF" style="background-color: #0000FF;"></div>
                            <div class="color-btn" data-color="#4B0082" style="background-color: #4B0082;"></div>
                            <div class="color-btn" data-color="#EE82EE" style="background-color: #EE82EE;"></div>
                            <div class="color-btn" data-color="#FFC0CB" style="background-color: #FFC0CB;"></div>
                            <div class="color-btn" data-color="#8B4513" style="background-color: #8B4513;"></div>
                            <div class="color-btn" data-color="#808080" style="background-color: #808080;"></div>
                            <div class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF; border-color: #999;"></div>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <span class="control-label">Taille:</span>
                        <div class="pen-size-control">
                            <input type="range" class="pen-size-slider" min="1" max="20" value="3">
                            <span class="pen-size-display">3px</span>
                        </div>
                    </div>
                </div>
                
                <canvas class="drawing-canvas" data-canvas="3" width="600" height="400"></canvas>
                
                <div class="canvas-buttons">
                    <button class="canvas-btn undo-btn" data-canvas="3" disabled>↶ Annuler</button>
                    <button class="canvas-btn redo-btn" data-canvas="3" disabled>↷ Refaire</button>
                    <button class="canvas-btn eraser-btn" data-canvas="3">Gomme 🧹</button>
                    <button class="canvas-btn clear-btn" data-canvas="3">Effacer tout 🗑️</button>
                </div>
            </div>
        </div>

        <!-- Due to length, I'll add chapters 4 and 5 with just the structure and then the complete JavaScript -->
        
        <!-- CHAPTER 4 -->
        <div id="chapter4" class="content">
            <h2 class="chapter-title">Chapitre 4 : La construction du rêve 🏗️✨</h2>
            
            <div class="story-text">
                <p>Construire un magasin de glace au milieu de l'océan n'est pas simple. 😅</p>
                
                <p>Le premier jour, une tempête arrive. ⛈️ Les vagues sont hautes comme des maisons. Le bateau bouge dans tous les sens. Pia a mal au cœur. Quirin est vert. Flocke s'accroche à sa couverture et ferme les yeux très fort.</p>
                
                <div class="dialogue">
                    <p>« J'ai peur ! » miaule-t-il. « Et j'ai froid ! Ma fourrure me manque ! » 😿</p>
                </div>
                
                <p>« C'est normal », dit un des ingénieurs. Il s'appelle Jacques et il a construit des plateformes dans l'océan pendant vingt ans. 👷</p>
                
                <div class="dialogue">
                    <p>« L'océan nous teste. Mais la tempête va passer. » 🌊</p>
                </div>
                
                <p>Après la tempête, le travail commence. Tout le monde travaille très vite. Pour Flocke. ⚡</p>
                
                <p>Des machines énormes descendent au fond de l'océan. Elles installent les fondations—la base du magasin. Mais d'abord, l'équipe de biologistes vérifie tout. Ils cherchent s'il y a des animaux. Ils vérifient qu'il n'y a pas de coraux.</p>
                
                <div class="dialogue">
                    <p>« Ici, c'est bon », dit une biologiste qui s'appelle Maria. 🤿 Elle remonte d'une plongée. « Il y a quelques poissons, mais nous les avons guidés vers une autre zone. Personne ne sera blessé. » 🐠</p>
                </div>
                
                <p>Petit à petit, le magasin prend forme. Les murs montent. Le toit se pose. Les panneaux solaires brillent au soleil. ☀️ Les éoliennes commencent à tourner, et elles font un bruit doux comme une chanson. 💨</p>
                
                <p>Pia aide partout. Elle apporte des outils. 🔧 Elle pose des questions. Elle prend des photos pour leur blog. 📸</p>
                
                <div class="dialogue">
                    <p>« Regardez ! » écrit-elle sur Internet chaque jour. « Le magasin de glace grandit ! Nous sommes en train de sauver Flocke ! » 🌟</p>
                </div>
                
                <p>Des milliers de personnes envoient des messages de soutien. 💬</p>
                
                <p>« Courage, Flocke ! » « Nous t'aimons, petit chat chauve ! » « Ta fourrure va repousser ! » ❤️</p>
                
                <p>Flocke lit tous les messages. Il pleure un peu. 😢</p>
                
                <div class="dialogue">
                    <p>« Les gens sont gentils », dit-il. « Même si je suis laid maintenant. »</p>
                    <p>« Tu n'es pas laid », dit Pia fermement. « Tu es courageux. » 💪</p>
                </div>
                
                <p>Quirin travaille avec les scientifiques. 🔬 Ils installent des capteurs dans l'eau. Ces petites machines mesurent la température, la salinité, l'oxygène.</p>
                
                <div class="dialogue">
                    <p>« Si quelque chose change, nous le saurons immédiatement », explique Quirin à Pia. 📊</p>
                </div>
                
                <p>Un jour, il y a un problème. ⚠️ L'eau autour du magasin commence à devenir trop froide.</p>
                
                <div class="dialogue">
                    <p>« Nous devons arrêter la production de glace », dit Docteur Rousseau. Tout le monde est inquiet. « Nous ne pouvons pas refroidir trop vite. » 😰</p>
                </div>
                
                <p>Flocke panique.</p>
                
                <div class="dialogue">
                    <p>« Mais... mais ma fourrure ! » dit-il. « J'ai besoin que l'air soit plus frais ! S'il vous plaît ! » 🙏</p>
                    <p>« Ne t'inquiète pas », dit Quirin. Il réfléchit intensément. 🤔 « J'ai une idée. Et si nous créons un système de circulation ? L'eau froide monte. L'eau chaude descend. Nous pouvons équilibrer la température. Le magasin va refroidir l'air, mais pas l'eau. »</p>
                </div>
                
                <p>Les ingénieurs travaillent pendant trois jours. Ils installent des pompes spéciales. 🔄 Elles mélangent l'eau froide et l'eau chaude doucement. Elles créent des courants qui protègent les animaux marins.</p>
                
                <p>Ça marche. ✅</p>
                
                <div class="dialogue">
                    <p>« Tu es un génie ! » dit Pia à son frère.</p>
                </div>
                
                <p>Quirin rougit. 😊</p>
                
                <div class="dialogue">
                    <p>« Non. J'ai juste réfléchi. Pour Flocke. »</p>
                </div>
                
                <p>Le chat chauve frotte sa tête contre la jambe de Quirin.</p>
                
                <div class="dialogue">
                    <p>« Merci », murmure-t-il. 🐱</p>
                </div>
                
                <p>Après quatre semaines, le magasin est terminé. 🎉</p>
                
                <p>Il est magnifique. Les murs sont blancs et lisses. Le toit est couvert de panneaux solaires. Vingt éoliennes tournent autour. À l'intérieur, il y a des machines qui font de la glace—des centaines de parfums différents. 🍦</p>
                
                <p>Mais ce n'est pas qu'un magasin. C'est aussi un centre éducatif. 📚 Il y a des écrans qui montrent la température de l'océan. Il y a des informations sur le changement climatique. Il y a un aquarium où les visiteurs peuvent voir les poissons et les coraux en bonne santé. 🐟</p>
                
                <p>Et il y a une grande photo de Flocke—avant et après. Le beau chat blanc, et le chat chauve courageux. 🖼️</p>
                
                <div class="dialogue">
                    <p>« C'est plus qu'un magasin », dit Docteur Rousseau le jour de l'ouverture. « C'est un symbole. Un symbole d'espoir. » ✨</p>
                </div>
                
                <p>Le premier client arrive en bateau. C'est une petite fille avec sa mère. 👧 La fille a sept ans et elle s'appelle Léa.</p>
                
                <div class="dialogue">
                    <p>« Je veux une glace à la fraise ! » dit-elle. « Et je veux voir le chat chauve ! » 🍓</p>
                </div>
                
                <p>Pia lui donne la glace avec un grand sourire. 😊</p>
                
                <div class="dialogue">
                    <p>« C'est gratuit aujourd'hui », dit-elle. « Parce que tu es notre première cliente. »</p>
                </div>
                
                <p>Flocke sort de sa cachette. Il porte son pull bleu. Léa le regarde avec de grands yeux.</p>
                
                <div class="dialogue">
                    <p>« Oh ! » dit-elle. « Tu es vraiment chauve ! »</p>
                    <p>« Oui », répond Flocke tristement. 😔</p>
                    <p>« Tu es le chat le plus courageux du monde ! » dit Léa. Elle le caresse doucement. « Ma grand-mère aussi a perdu ses cheveux. Elle dit que ça va repousser. »</p>
                </div>
                
                <p>Flocke sent quelque chose de chaud dans son cœur. 💓</p>
                
                <div class="dialogue">
                    <p>« Merci », dit-il. 😊</p>
                </div>
            </div>
            
            <div class="vocab-section">
                <h3 class="vocab-title">📚 Exercice de Vocabulaire</h3>
                <p><strong>Glissez les mots français vers leurs définitions :</strong></p>
                <div class="drag-drop-container">
                    <div class="word-bank" id="wordBank4">
                        <div class="draggable" draggable="true" data-word="une tempête">une tempête</div>
                        <div class="draggable" draggable="true" data-word="construire">construire</div>
                        <div class="draggable" draggable="true" data-word="un capteur">un capteur</div>
                        <div class="draggable" draggable="true" data-word="équilibrer">équilibrer</div>
                        <div class="draggable" draggable="true" data-word="courageux">courageux</div>
                    </div>
                    <div class="drop-zones">
                        <div class="drop-zone" data-answer="construire"><span>to build</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="une tempête"><span>storm</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="équilibrer"><span>to balance</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="courageux"><span>brave/courageous</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="un capteur"><span>sensor</span><span class="dropped-word"></span></div>
                    </div>
                </div>
                <button class="check-btn vocab-check" data-chapter="4">Vérifier ✓</button>
                <button class="reset-btn vocab-reset" data-chapter="4">Recommencer ↺</button>
                <div id="vocabFeedback4" class="feedback"></div>
            </div>
            
            <div class="quiz-section">
                <h3 class="quiz-title">❓ Questions de Compréhension</h3>
                <div class="question" data-question="4-1">
                    <div class="question-text">1. Quel est le premier obstacle ?</div>
                    <div class="option" data-correct="true">A) Une tempête</div>
                    <div class="option" data-correct="false">B) Pas d'argent</div>
                    <div class="option" data-correct="false">C) Le bateau casse</div>
                    <div class="option" data-correct="false">D) Flocke est malade</div>
                </div>
                <button class="check-btn quiz-check" data-quiz="4">Vérifier les réponses ✓</button>
                <div id="quizFeedback4" class="feedback"></div>
            </div>
            
            
            <!-- Drawing Section Chapter 4 -->
            <div class="drawing-section">
                <h3 class="drawing-title">🎨 Dessine la tempête !</h3>
                <p><strong>Dessine la tempête avec les vagues énormes et le bateau :</strong></p>
                
                <div class="drawing-controls">
                    <div class="control-row">
                        <span class="control-label">Couleur:</span>
                        <div class="color-palette">
                            <div class="color-btn active" data-color="#000000" style="background-color: #000000;"></div>
                            <div class="color-btn" data-color="#FF0000" style="background-color: #FF0000;"></div>
                            <div class="color-btn" data-color="#FFA500" style="background-color: #FFA500;"></div>
                            <div class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;"></div>
                            <div class="color-btn" data-color="#00FF00" style="background-color: #00FF00;"></div>
                            <div class="color-btn" data-color="#0000FF" style="background-color: #0000FF;"></div>
                            <div class="color-btn" data-color="#4B0082" style="background-color: #4B0082;"></div>
                            <div class="color-btn" data-color="#EE82EE" style="background-color: #EE82EE;"></div>
                            <div class="color-btn" data-color="#FFC0CB" style="background-color: #FFC0CB;"></div>
                            <div class="color-btn" data-color="#8B4513" style="background-color: #8B4513;"></div>
                            <div class="color-btn" data-color="#808080" style="background-color: #808080;"></div>
                            <div class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF; border-color: #999;"></div>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <span class="control-label">Taille:</span>
                        <div class="pen-size-control">
                            <input type="range" class="pen-size-slider" min="1" max="20" value="3">
                            <span class="pen-size-display">3px</span>
                        </div>
                    </div>
                </div>
                
                <canvas class="drawing-canvas" data-canvas="4" width="600" height="400"></canvas>
                
                <div class="canvas-buttons">
                    <button class="canvas-btn undo-btn" data-canvas="4" disabled>↶ Annuler</button>
                    <button class="canvas-btn redo-btn" data-canvas="4" disabled>↷ Refaire</button>
                    <button class="canvas-btn eraser-btn" data-canvas="4">Gomme 🧹</button>
                    <button class="canvas-btn clear-btn" data-canvas="4">Effacer tout 🗑️</button>
                </div>
            </div>
        </div>
        
        <!-- CHAPTER 5 -->
        <div id="chapter5" class="content">
            <h2 class="chapter-title">Chapitre 5 : Le flocon d'espoir 🌟❄️</h2>
            
            <div class="story-text">
                <p>Trois mois passent. ⏰</p>
                
                <p>Le magasin de glace devient célèbre. 🌟 Des gens viennent du monde entier. Ils arrivent en bateau. 🚢 Ils mangent de la glace. Ils apprennent sur le changement climatique. Ils repartent en promettant de changer leurs habitudes.</p>
                
                <div class="dialogue">
                    <p>« Je vais utiliser moins de plastique », dit un homme. ♻️</p>
                    <p>« Je vais planter des arbres », dit une femme. 🌳</p>
                    <p>« Je vais parler à mes amis de l'environnement », dit un adolescent. 🗣️</p>
                </div>
                
                <p>Petit à petit, la température de l'air au-dessus du magasin diminue. 🌡️ Ce n'est pas beaucoup. Mais c'est un début.</p>
                
                <p>Pia et Quirin vivent maintenant sur une petite île près du magasin. 🏝️ Leurs parents sont venus les rejoindre. Ils sont très fiers. 😊</p>
                
                <p>Flocke passe ses journées sur la plage. 🏖️ Il porte des pulls de différentes couleurs. Il a un pull rouge, un pull vert, un pull jaune. Il est devenu la mascotte du magasin. Les enfants viennent le voir et lui demander de raconter son histoire.</p>
                
                <div class="dialogue">
                    <p>« J'étais un beau chat blanc », dit-il aux enfants. « Puis j'ai perdu tous mes poils à cause de la chaleur. Mais je n'ai pas abandonné. » 💪</p>
                </div>
                
                <p>Les enfants l'écoutent avec attention. 👂 Ils touchent sa peau rose doucement. Ils lui disent qu'il est courageux.</p>
                
                <p>Mais Flocke regarde souvent ses photos d'avant. 📷 Il touche la dernière petite touffe de fourrure blanche sur sa queue—son dernier flocon. Elle est encore là, miraculeusement. ✨</p>
                
                <div class="dialogue">
                    <p>« Je me demande si ma fourrure va vraiment repousser », dit-il à Pia un soir. 🌅</p>
                </div>
                
                <p>Ils sont sur la plage. Le soleil se couche sur l'océan. Les couleurs sont magnifiques—rose, orange, doré. 🌄</p>
                
                <div class="dialogue">
                    <p>« Je ne sais pas », répond Pia honnêtement. « Mais tu sais quoi ? »</p>
                    <p>« Quoi ? »</p>
                    <p>« Même si elle ne repousse pas, tu es toujours Flocke. Tu es toujours mon chat préféré. Tu es toujours toi. » 💕</p>
                </div>
                
                <p>Flocke se blottit contre elle.</p>
                
                <div class="dialogue">
                    <p>« C'est dur », dit-il. « Chaque jour, je regarde dans le miroir et je ne me reconnais pas. » 😔</p>
                    <p>« Je comprends », dit Pia. Elle le caresse doucement. « Mais tu sais ce que je vois quand je te regarde ? »</p>
                    <p>« Quoi ? Un chat ridicule et nu ? »</p>
                    <p>« Non. Je vois un chat qui a changé le monde. Je vois un chat qui a inspiré des milliers de personnes. Je vois un chat qui m'a appris quelque chose d'important. »</p>
                    <p>« Quoi ? » demande Flocke.</p>
                    <p>« Que qui nous sommes n'est pas seulement notre apparence. » 💫</p>
                </div>
                
                <p>Ce soir-là, il y a une grande fête sur l'île. 🎉 Des scientifiques sont là. Des bénévoles. Des clients du magasin. Tout le monde célèbre le succès du projet.</p>
                
                <p>Mais il y a aussi une surprise. 🎁</p>
                
                <p>Docteur Rousseau prend le microphone. 🎤</p>
                
                <div class="dialogue">
                    <p>« Nous avons une annonce spéciale », dit-elle. Son visage brille de joie. « Grâce à notre magasin et aux efforts de millions de personnes autour du monde qui ont changé leurs habitudes, la température moyenne dans cette région a baissé de deux degrés. » 🌍</p>
                </div>
                
                <p>Tout le monde applaudit. 👏</p>
                
                <div class="dialogue">
                    <p>« Et... » continue Docteur Rousseau, « nous avons observé quelque chose d'extraordinaire chez notre ami Flocke. »</p>
                </div>
                
                <p>Flocke lève la tête. Son cœur bat vite. 💓</p>
                
                <div class="dialogue">
                    <p>« Montrez-leur, Flocke », dit doucement Docteur Rousseau.</p>
                </div>
                
                <p>Flocke enlève son pull rouge lentement. Les gens regardent. Et puis ils voient. 👀</p>
                
                <p>Sur son dos, il y a de minuscules poils blancs. Tout petits. Comme du duvet de bébé. Mais ils sont là. ❄️</p>
                
                <div class="dialogue">
                    <p>« Ta fourrure repousse ! » crie Pia. Elle prend Flocke dans ses bras et pleure de joie. 😭💕</p>
                </div>
                
                <p>« Lentement », dit Docteur Rousseau. « Très lentement. Ça va prendre des mois, peut-être un an. Mais oui, sa fourrure repousse. » ✨</p>
                
                <p>Flocke touche les petits poils sur son dos. Il pleure aussi. 😢</p>
                
                <div class="dialogue">
                    <p>« Je vais redevenir blanc ? »</p>
                    <p>« Oui », dit Docteur Rousseau. « Si nous continuons à refroidir l'atmosphère. Si les gens continuent à changer. Si nous continuons à nous battre pour la planète. » 🌎</p>
                </div>
                
                <p>Ce soir-là, tout le monde célèbre. 🎊 Il y a de la musique. 🎵 Il y a de la glace gratuite. Il y a de la joie.</p>
                
                <p>Mais plus tard, quand tout le monde dort, Pia trouve Flocke sur la plage. Il regarde les étoiles. ⭐ Il porte toujours son pull rouge, même si la nuit est chaude.</p>
                
                <div class="dialogue">
                    <p>« Pourquoi tu portes encore ton pull ? » demande Pia. Elle s'assoit à côté de lui. 🪑</p>
                    <p>« Parce que », dit Flocke, « j'ai réalisé quelque chose. »</p>
                    <p>« Quoi ? »</p>
                    <p>« Pendant ces trois mois, j'ai été chauve. J'ai eu honte. J'ai eu peur. Mais j'ai aussi été moi-même. Les gens m'ont aimé—pas pour ma belle fourrure blanche, mais pour qui je suis à l'intérieur. » 💗</p>
                </div>
                
                <p>Il regarde Pia avec ses grands yeux verts.</p>
                
                <div class="dialogue">
                    <p>« Ces pulls », continue-t-il, « m'ont protégé quand j'avais froid. Mais ils ont aussi été mes armures. Ma nouvelle identité. Je ne veux pas oublier ce chat chauve courageux que j'ai été. » 🛡️</p>
                    <p>« Tu ne vas pas oublier », dit Pia. « Personne ne va oublier. »</p>
                    <p>« Quand ma fourrure va repousser complètement », dit Flocke, « je vais garder un pull. Pour me souvenir. Pour me souvenir que le changement est difficile, mais que nous pouvons survivre. Nous pouvons nous adapter. » 🌱</p>
                </div>
                
                <p>Quirin arrive sur la plage. Il s'assoit avec eux. 👦</p>
                
                <div class="dialogue">
                    <p>« Tu crois que nous avons vraiment changé quelque chose ? » demande Pia.</p>
                    <p>« Oui », répond Quirin. « Regarde tous ces gens. Ils vont rentrer chez eux et parler de ce qu'ils ont vu. De Flocke. Du magasin. De l'océan. Ils vont changer leurs habitudes. Peut-être qu'ils vont créer leurs propres projets. » 🌍</p>
                    <p>« Un flocon de neige peut commencer une avalanche », murmure Flocke. ❄️</p>
                    <p>« Et un chat chauve peut changer le monde », ajoute Pia. 🌟</p>
                </div>
                
                <p>Flocke touche la dernière touffe de fourrure sur sa queue—son dernier flocon d'origine. Puis il touche les nouveaux petits poils sur son dos—ses nouveaux flocons.</p>
                
                <div class="dialogue">
                    <p>« Je m'appelle toujours Flocke », dit-il. « Pas seulement parce que je suis blanc comme la neige. Mais parce que je suis un flocon d'espoir. Un petit flocon qui peut inspirer une avalanche de changement. » 💫</p>
                </div>
                
                <p>Et sous les étoiles, au milieu de l'océan, avec leur chat qui commence à retrouver sa fourrure, Pia et Quirin savent que leur aventure ne fait que commencer. 🌟</p>
                
                <p>Parce que sauver la planète n'est pas quelque chose qu'on fait une fois. C'est quelque chose qu'on fait chaque jour. Avec amour. Avec espoir. Et ensemble. 💚🌍</p>
                
                <p style="text-align: center; font-size: 1.5em; margin-top: 30px;"><strong>FIN ✨</strong></p>
            </div>
            
            <div class="vocab-section">
                <h3 class="vocab-title">📚 Exercice de Vocabulaire</h3>
                <p><strong>Glissez les mots français vers leurs définitions :</strong></p>
                <div class="drag-drop-container">
                    <div class="word-bank" id="wordBank5">
                        <div class="draggable" draggable="true" data-word="repousser">repousser</div>
                        <div class="draggable" draggable="true" data-word="célèbre">célèbre</div>
                        <div class="draggable" draggable="true" data-word="l'apparence">l'apparence</div>
                        <div class="draggable" draggable="true" data-word="inspirer">inspirer</div>
                        <div class="draggable" draggable="true" data-word="l'espoir">l'espoir</div>
                    </div>
                    <div class="drop-zones">
                        <div class="drop-zone" data-answer="l'espoir"><span>hope</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="célèbre"><span>famous</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="repousser"><span>to grow back</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="inspirer"><span>to inspire</span><span class="dropped-word"></span></div>
                        <div class="drop-zone" data-answer="l'apparence"><span>appearance</span><span class="dropped-word"></span></div>
                    </div>
                </div>
                <button class="check-btn vocab-check" data-chapter="5">Vérifier ✓</button>
                <button class="reset-btn vocab-reset" data-chapter="5">Recommencer ↺</button>
                <div id="vocabFeedback5" class="feedback"></div>
            </div>
            
            <div class="quiz-section">
                <h3 class="quiz-title">❓ Questions de Compréhension</h3>
                <div class="question" data-question="5-1">
                    <div class="question-text">1. Que promettent les visiteurs de faire ?</div>
                    <div class="option" data-correct="true">A) Changer leurs habitudes</div>
                    <div class="option" data-correct="false">B) Acheter plus de glace</div>
                    <div class="option" data-correct="false">C) Adopter un chat</div>
                    <div class="option" data-correct="false">D) Construire un autre magasin</div>
                </div>
                <button class="check-btn quiz-check" data-quiz="5">Vérifier les réponses ✓</button>
                <div id="quizFeedback5" class="feedback"></div>
            </div>
            
            <!-- Drawing Section Chapter 5 -->
            <div class="drawing-section">
                <h3 class="drawing-title">🎨 Dessine Flocke avec sa nouvelle fourrure !</h3>
                <p><strong>Dessine Flocke avec les petits poils blancs qui repoussent :</strong></p>
                
                <div class="drawing-controls">
                    <div class="control-row">
                        <span class="control-label">Couleur:</span>
                        <div class="color-palette">
                            <div class="color-btn active" data-color="#000000" style="background-color: #000000;"></div>
                            <div class="color-btn" data-color="#FF0000" style="background-color: #FF0000;"></div>
                            <div class="color-btn" data-color="#FFA500" style="background-color: #FFA500;"></div>
                            <div class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;"></div>
                            <div class="color-btn" data-color="#00FF00" style="background-color: #00FF00;"></div>
                            <div class="color-btn" data-color="#0000FF" style="background-color: #0000FF;"></div>
                            <div class="color-btn" data-color="#4B0082" style="background-color: #4B0082;"></div>
                            <div class="color-btn" data-color="#EE82EE" style="background-color: #EE82EE;"></div>
                            <div class="color-btn" data-color="#FFC0CB" style="background-color: #FFC0CB;"></div>
                            <div class="color-btn" data-color="#8B4513" style="background-color: #8B4513;"></div>
                            <div class="color-btn" data-color="#808080" style="background-color: #808080;"></div>
                            <div class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF; border-color: #999;"></div>
                        </div>
                    </div>
                    
                    <div class="control-row">
                        <span class="control-label">Taille:</span>
                        <div class="pen-size-control">
                            <input type="range" class="pen-size-slider" min="1" max="20" value="3">
                            <span class="pen-size-display">3px</span>
                        </div>
                    </div>
                </div>
                
                <canvas class="drawing-canvas" data-canvas="5" width="600" height="400"></canvas>
                
                <div class="canvas-buttons">
                    <button class="canvas-btn undo-btn" data-canvas="5" disabled>↶ Annuler</button>
                    <button class="canvas-btn redo-btn" data-canvas="5" disabled>↷ Refaire</button>
                    <button class="canvas-btn eraser-btn" data-canvas="5">Gomme 🧹</button>
                    <button class="canvas-btn clear-btn" data-canvas="5">Effacer tout 🗑️</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            
            // Navigation between chapters
            const navBtns = document.querySelectorAll('.nav-btn');
            const contents = document.querySelectorAll('.content');
            
            navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const chapterNum = this.getAttribute('data-chapter');
                    
                    // Remove active from all
                    contents.forEach(c => c.classList.remove('active'));
                    navBtns.forEach(b => b.classList.remove('active'));
                    
                    // Add active to selected
                    document.getElementById('chapter' + chapterNum).classList.add('active');
                    this.classList.add('active');
                    
                    // Scroll to top
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
            });
            
            // Drag and Drop
            let draggedElement = null;
            
            function setupDraggable(draggable) {
                draggable.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                });
                
                draggable.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            }
            
            // Setup all initial draggables
            document.querySelectorAll('.draggable').forEach(setupDraggable);
            
            // Setup drop zones
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('over');
                });
                
                zone.addEventListener('dragleave', function() {
                    this.classList.remove('over');
                });
                
                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('over');
                    
                    if (draggedElement) {
                        const droppedWord = this.querySelector('.dropped-word');
                        const word = draggedElement.getAttribute('data-word');
                        
                        // Return existing word to bank
                        if (droppedWord.textContent) {
                            const wordBank = draggedElement.closest('.vocab-section').querySelector('.word-bank');
                            const newDraggable = document.createElement('div');
                            newDraggable.className = 'draggable';
                            newDraggable.draggable = true;
                            newDraggable.setAttribute('data-word', droppedWord.textContent);
                            newDraggable.textContent = droppedWord.textContent;
                            wordBank.appendChild(newDraggable);
                            setupDraggable(newDraggable);
                        }
                        
                        droppedWord.textContent = word;
                        draggedElement.remove();
                        this.classList.remove('correct', 'incorrect');
                    }
                });
            });
            
            // Vocab check buttons
            document.querySelectorAll('.vocab-check').forEach(btn => {
                btn.addEventListener('click', function() {
                    const chapter = this.getAttribute('data-chapter');
                    const section = this.closest('.vocab-section');
                    const dropZones = section.querySelectorAll('.drop-zone');
                    let correct = 0;
                    let total = dropZones.length;
                    
                    dropZones.forEach(zone => {
                        const answer = zone.getAttribute('data-answer');
                        const dropped = zone.querySelector('.dropped-word').textContent;
                        
                        if (dropped === answer) {
                            zone.classList.add('correct');
                            zone.classList.remove('incorrect');
                            correct++;
                        } else if (dropped) {
                            zone.classList.add('incorrect');
                            zone.classList.remove('correct');
                        }
                    });
                    
                    const feedback = document.getElementById('vocabFeedback' + chapter);
                    feedback.classList.add('show');
                    
                    if (correct === total) {
                        feedback.className = 'feedback correct show';
                        feedback.textContent = `🎉 Parfait ! ${correct}/${total} correct !`;
                    } else {
                        feedback.className = 'feedback incorrect show';
                        feedback.textContent = `📝 ${correct}/${total} correct. Essayez encore !`;
                    }
                });
            });
            
            // Vocab reset buttons
            document.querySelectorAll('.vocab-reset').forEach(btn => {
                btn.addEventListener('click', function() {
                    const chapter = this.getAttribute('data-chapter');
                    const section = this.closest('.vocab-section');
                    const wordBank = section.querySelector('.word-bank');
                    const dropZones = section.querySelectorAll('.drop-zone');
                    
                    dropZones.forEach(zone => {
                        const droppedWord = zone.querySelector('.dropped-word');
                        if (droppedWord.textContent) {
                            const newDraggable = document.createElement('div');
                            newDraggable.className = 'draggable';
                            newDraggable.draggable = true;
                            newDraggable.setAttribute('data-word', droppedWord.textContent);
                            newDraggable.textContent = droppedWord.textContent;
                            wordBank.appendChild(newDraggable);
                            setupDraggable(newDraggable);
                        }
                        droppedWord.textContent = '';
                        zone.classList.remove('correct', 'incorrect');
                    });
                    
                    document.getElementById('vocabFeedback' + chapter).classList.remove('show');
                });
            });
            
            // Quiz options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    if (this.classList.contains('correct') || this.classList.contains('incorrect')) {
                        return;
                    }
                    
                    const question = this.closest('.question');
                    const options = question.querySelectorAll('.option');
                    
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            // Quiz check buttons
            document.querySelectorAll('.quiz-check').forEach(btn => {
                btn.addEventListener('click', function() {
                    const quiz = this.getAttribute('data-quiz');
                    const section = this.closest('.quiz-section');
                    const questions = section.querySelectorAll('.question');
                    let correct = 0;
                    let total = questions.length;
                    
                    questions.forEach(question => {
                        const selectedOption = question.querySelector('.option.selected');
                        const allOptions = question.querySelectorAll('.option');
                        
                        if (selectedOption) {
                            const isCorrect = selectedOption.getAttribute('data-correct') === 'true';
                            
                            if (isCorrect) {
                                selectedOption.classList.add('correct');
                                correct++;
                            } else {
                                selectedOption.classList.add('incorrect');
                                allOptions.forEach(opt => {
                                    if (opt.getAttribute('data-correct') === 'true') {
                                        opt.classList.add('correct');
                                    }
                                });
                            }
                        }
                    });
                    
                    const feedback = document.getElementById('quizFeedback' + quiz);
                    feedback.classList.add('show');
                    
                    if (correct === total) {
                        feedback.className = 'feedback correct show';
                        feedback.textContent = `🎉 Parfait ! ${correct}/${total} correct ! Tu as très bien compris !`;
                    } else if (correct >= total * 0.75) {
                        feedback.className = 'feedback correct show';
                        feedback.textContent = `👍 Très bien ! ${correct}/${total} correct !`;
                    } else {
                        feedback.className = 'feedback incorrect show';
                        feedback.textContent = `📖 ${correct}/${total} correct. Relis et essaie encore !`;
                    }
                });
            });
            
            // Drawing Canvas Setup
            const canvases = document.querySelectorAll('.drawing-canvas');
            const canvasStates = {};
            
            canvases.forEach(canvas => {
                const canvasId = canvas.getAttribute('data-canvas');
                const ctx = canvas.getContext('2d');
                const section = canvas.closest('.drawing-section');
                
                // Initialize canvas state
                canvasStates[canvasId] = {
                    isDrawing: false,
                    currentColor: '#000000',
                    currentSize: 3,
                    isEraser: false,
                    history: [],
                    historyStep: -1
                };
                
                // Set initial canvas background
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Save initial state
                saveState(canvasId, canvas);
                
                // Get buttons
                const undoBtn = section.querySelector('.undo-btn');
                const redoBtn = section.querySelector('.redo-btn');
                
                // Function to save canvas state
                function saveState(id, cnv) {
                    const state = canvasStates[id];
                    // Remove any states after current step
                    state.history = state.history.slice(0, state.historyStep + 1);
                    // Save current canvas state
                    state.history.push(cnv.toDataURL());
                    state.historyStep++;
                    
                    // Update button states
                    updateUndoRedoButtons(id);
                }
                
                // Function to update undo/redo button states
                function updateUndoRedoButtons(id) {
                    const state = canvasStates[id];
                    const undo = section.querySelector('.undo-btn');
                    const redo = section.querySelector('.redo-btn');
                    
                    undo.disabled = state.historyStep <= 0;
                    redo.disabled = state.historyStep >= state.history.length - 1;
                }
                
                // Undo button
                undoBtn.addEventListener('click', function() {
                    const state = canvasStates[canvasId];
                    if (state.historyStep > 0) {
                        state.historyStep--;
                        const img = new Image();
                        img.src = state.history[state.historyStep];
                        img.onload = function() {
                            ctx.clearRect(0, 0, canvas.width, canvas.height);
                            ctx.drawImage(img, 0, 0);
                            updateUndoRedoButtons(canvasId);
                        };
                    }
                });
                
                // Redo button
                redoBtn.addEventListener('click', function() {
                    const state = canvasStates[canvasId];
                    if (state.historyStep < state.history.length - 1) {
                        state.historyStep++;
                        const img = new Image();
                        img.src = state.history[state.historyStep];
                        img.onload = function() {
                            ctx.clearRect(0, 0, canvas.width, canvas.height);
                            ctx.drawImage(img, 0, 0);
                            updateUndoRedoButtons(canvasId);
                        };
                    }
                });
                
                // Color palette
                const colorBtns = section.querySelectorAll('.color-btn');
                colorBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        colorBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        canvasStates[canvasId].currentColor = this.getAttribute('data-color');
                        canvasStates[canvasId].isEraser = false;
                        
                        // Remove eraser active state
                        section.querySelector('.eraser-btn').classList.remove('active');
                    });
                });
                
                // Pen size slider
                const sizeSlider = section.querySelector('.pen-size-slider');
                const sizeDisplay = section.querySelector('.pen-size-display');
                
                sizeSlider.addEventListener('input', function() {
                    canvasStates[canvasId].currentSize = this.value;
                    sizeDisplay.textContent = this.value + 'px';
                });
                
                // Eraser button
                const eraserBtn = section.querySelector('.eraser-btn');
                eraserBtn.addEventListener('click', function() {
                    canvasStates[canvasId].isEraser = !canvasStates[canvasId].isEraser;
                    this.classList.toggle('active');
                    
                    if (canvasStates[canvasId].isEraser) {
                        colorBtns.forEach(b => b.classList.remove('active'));
                    }
                });
                
                // Clear button
                const clearBtn = section.querySelector('.clear-btn');
                clearBtn.addEventListener('click', function() {
                    if (confirm('Es-tu sûr(e) de vouloir effacer tout le dessin ? 🎨')) {
                        ctx.fillStyle = 'white';
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                        saveState(canvasId, canvas);
                    }
                });
                
                // Drawing functions
                let lastX = 0;
                let lastY = 0;
                
                function startDrawing(e) {
                    canvasStates[canvasId].isDrawing = true;
                    const rect = canvas.getBoundingClientRect();
                    lastX = e.clientX - rect.left;
                    lastY = e.clientY - rect.top;
                }
                
                function stopDrawing() {
                    if (canvasStates[canvasId].isDrawing) {
                        canvasStates[canvasId].isDrawing = false;
                        ctx.beginPath();
                        saveState(canvasId, canvas);
                    }
                }
                
                function draw(e) {
                    if (!canvasStates[canvasId].isDrawing) return;
                    
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    ctx.lineWidth = canvasStates[canvasId].currentSize;
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';
                    
                    if (canvasStates[canvasId].isEraser) {
                        ctx.strokeStyle = 'white';
                    } else {
                        ctx.strokeStyle = canvasStates[canvasId].currentColor;
                    }
                    
                    ctx.beginPath();
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(x, y);
                    ctx.stroke();
                    
                    lastX = x;
                    lastY = y;
                }
                
                // Mouse events
                canvas.addEventListener('mousedown', startDrawing);
                canvas.addEventListener('mouseup', stopDrawing);
                canvas.addEventListener('mousemove', draw);
                canvas.addEventListener('mouseout', stopDrawing);
                
                // Touch events for mobile
                canvas.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const mouseEvent = new MouseEvent('mousedown', {
                        clientX: touch.clientX,
                        clientY: touch.clientY
                    });
                    canvas.dispatchEvent(mouseEvent);
                });
                
                canvas.addEventListener('touchmove', function(e) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const mouseEvent = new MouseEvent('mousemove', {
                        clientX: touch.clientX,
                        clientY: touch.clientY
                    });
                    canvas.dispatchEvent(mouseEvent);
                });
                
                canvas.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    const mouseEvent = new MouseEvent('mouseup', {});
                    canvas.dispatchEvent(mouseEvent);
                });
            });
            
        }); // End DOMContentLoaded
    </script>
</body>
</html>
