<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEF Canada ‚Äî Expression orale NCLC 8</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a2332;
            --bg-tertiary: #243044;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-yellow: #f59e0b;
            --accent-red: #ef4444;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: #334155;
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .header h1 {
            font-family: 'Source Serif 4', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .level-badge {
            display: inline-block;
            background: var(--accent-blue);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 0.75rem;
        }

        /* Teacher Panel */
        .teacher-panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 2rem;
        }

        .teacher-panel-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
        }

        .teacher-panel-header h3 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .teacher-panel-content {
            display: none;
        }

        .teacher-panel.open .teacher-panel-content {
            display: block;
        }

        .teacher-panel .toggle-icon {
            transition: transform 0.2s;
        }

        .teacher-panel.open .toggle-icon {
            transform: rotate(180deg);
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .input-group input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: monospace;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .voice-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--bg-tertiary);
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .voice-status.active {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .voice-status.inactive {
            color: var(--text-muted);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--accent-blue);
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* Scenario Selection */
        .scenario-grid {
            display: grid;
            gap: 1rem;
        }

        .scenario-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .scenario-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .scenario-icon {
            font-size: 2rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border-radius: 12px;
            flex-shrink: 0;
        }

        .scenario-info h3 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .scenario-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Context Screen */
        .context-screen {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .context-screen .scenario-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            font-family: 'Source Serif 4', serif;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .context-screen .context-text {
            text-align: left;
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .context-screen .objective {
            text-align: left;
            padding: 1rem 1.5rem;
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid var(--accent-blue);
            border-radius: 0 8px 8px 0;
            margin-bottom: 2rem;
        }

        .context-screen .objective strong {
            color: var(--accent-blue);
        }

        /* Dialogue Screen */
        .dialogue-screen {
            display: none;
        }

        .dialogue-screen.active {
            display: block;
        }

        .progress-bar {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .progress-step {
            flex: 1;
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-step.completed {
            background: var(--accent-green);
        }

        .progress-step.current {
            background: var(--accent-blue);
        }

        .progress-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            white-space: nowrap;
            margin-left: 0.5rem;
        }

        /* Interviewer Response */
        .interviewer-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .interviewer-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .interviewer-text {
            font-family: 'Source Serif 4', serif;
            font-size: 1.2rem;
            line-height: 1.7;
            padding: 1.25rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border-left: 3px solid var(--accent-blue);
            position: relative;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .audio-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .audio-btn:hover {
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .audio-btn.playing {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .audio-loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--border-color);
            border-top-color: var(--accent-blue);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Question Options */
        .question-section h3 {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .question-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .question-option {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem 1.25rem;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .question-option:hover {
            border-color: var(--accent-blue);
            background: var(--bg-tertiary);
        }

        .question-option.selected {
            border-color: var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .question-option input {
            display: none;
        }

        .question-radio {
            width: 22px;
            height: 22px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 2px;
        }

        .question-option.selected .question-radio {
            border-color: var(--accent-blue);
            background: var(--accent-blue);
        }

        .question-option.selected .question-radio::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        .question-text {
            font-size: 1rem;
            line-height: 1.6;
        }

        .validate-btn-container {
            margin-top: 1.5rem;
            display: flex;
            justify-content: flex-end;
        }

        /* Feedback */
        .feedback-box {
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            display: none;
        }

        .feedback-box.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-box.mauvaise {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--accent-red);
        }

        .feedback-box.acceptable {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--accent-yellow);
        }

        .feedback-box.ideale {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--accent-green);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .feedback-box.mauvaise .feedback-header { color: var(--accent-red); }
        .feedback-box.acceptable .feedback-header { color: var(--accent-yellow); }
        .feedback-box.ideale .feedback-header { color: var(--accent-green); }

        .feedback-text {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .feedback-actions {
            display: flex;
            gap: 0.75rem;
        }

        /* Results Screen */
        .results-screen {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .results-screen h2 {
            font-family: 'Source Serif 4', serif;
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
        }

        .score-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .score-item {
            padding: 1.25rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
        }

        .score-item .count {
            font-size: 2rem;
            font-weight: 700;
        }

        .score-item .label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .score-item.ideale .count { color: var(--accent-green); }
        .score-item.acceptable .count { color: var(--accent-yellow); }
        .score-item.mauvaise .count { color: var(--accent-red); }

        .nclc-estimate {
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .nclc-estimate .level {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-blue);
        }

        .nclc-estimate .label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .tips-box {
            text-align: left;
            background: var(--bg-tertiary);
            padding: 1.25rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .tips-box h4 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .tips-box ul {
            list-style: none;
            padding: 0;
        }

        .tips-box li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .tips-box li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--accent-blue);
        }

        .results-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* Utility */
        .hidden {
            display: none !important;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>TEF Canada ‚Äî Expression orale</h1>
            <p class="subtitle">Section A : Obtenir des renseignements</p>
            <span class="level-badge">Niveau cible : NCLC 8</span>
        </header>

        <!-- Teacher Panel -->
        <div class="teacher-panel" id="teacherPanel">
            <div class="teacher-panel-header" onclick="toggleTeacherPanel()">
                <span>üîë</span>
                <h3>Mode enseignant</h3>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="teacher-panel-content">
                <div class="input-group">
                    <label>Cl√© API ElevenLabs</label>
                    <input type="password" id="apiKeyInput" placeholder="sk_xxxxxxxxxxxxxxxx">
                </div>
                <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem;">
                    <button class="btn btn-primary btn-small" onclick="activateVoice()">Activer la voix</button>
                    <div class="voice-status inactive" id="voiceStatus">
                        <span>üîá</span>
                        <span>Voix d√©sactiv√©e</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scenario Selection Screen -->
        <div class="screen active" id="scenarioScreen">
            <h2 style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 1rem; font-weight: 500;">Choisissez un sc√©nario :</h2>
            <div class="scenario-grid">
                <div class="scenario-card" onclick="selectScenario(0)">
                    <div class="scenario-icon">üè†</div>
                    <div class="scenario-info">
                        <h3>Louer un appartement</h3>
                        <p>Vous t√©l√©phonez √† une agence immobili√®re pour obtenir des renseignements sur un appartement.</p>
                    </div>
                </div>
                <div class="scenario-card" onclick="selectScenario(1)">
                    <div class="scenario-icon">üõçÔ∏è</div>
                    <div class="scenario-info">
                        <h3>Retourner un produit</h3>
                        <p>Vous contactez le service client pour retourner ou √©changer un produit d√©fectueux.</p>
                    </div>
                </div>
                <div class="scenario-card" onclick="selectScenario(2)">
                    <div class="scenario-icon">üíº</div>
                    <div class="scenario-info">
                        <h3>Se renseigner sur une offre d'emploi</h3>
                        <p>Vous appelez une entreprise pour obtenir des d√©tails sur un poste affich√©.</p>
                    </div>
                </div>
                <div class="scenario-card" onclick="selectScenario(3)">
                    <div class="scenario-icon">üè®</div>
                    <div class="scenario-info">
                        <h3>Modifier une r√©servation</h3>
                        <p>Vous contactez un h√¥tel pour modifier les dates de votre r√©servation.</p>
                    </div>
                </div>
                <div class="scenario-card" onclick="selectScenario(4)">
                    <div class="scenario-icon">üéæ</div>
                    <div class="scenario-info">
                        <h3>S'inscrire √† un cours</h3>
                        <p>Vous t√©l√©phonez √† un centre sportif pour vous renseigner sur les cours disponibles.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Context Screen -->
        <div class="screen" id="contextScreen">
            <div class="context-screen">
                <div class="scenario-title">
                    <span id="contextIcon"></span>
                    <span id="contextTitle"></span>
                </div>
                <div class="context-text" id="contextText"></div>
                <div class="objective" id="contextObjective"></div>
                <button class="btn btn-primary" onclick="startDialogue()">
                    Commencer l'appel ‚ñ∂
                </button>
            </div>
        </div>

        <!-- Dialogue Screen -->
        <div class="screen" id="dialogueScreen">
            <div class="progress-bar">
                <div id="progressSteps"></div>
                <span class="progress-text" id="progressText"></span>
            </div>

            <div class="interviewer-box">
                <div class="interviewer-header">
                    <span>üéß</span>
                    <span>L'interlocuteur :</span>
                </div>
                <div class="interviewer-text" id="interviewerText"></div>
                <div class="audio-controls">
                    <button class="audio-btn" id="playBtn" onclick="playAudio()">
                        <span id="playIcon">üîä</span>
                        <span id="playText">√âcouter</span>
                    </button>
                    <button class="audio-btn" id="replayBtn" onclick="replayAudio()" style="display: none;">
                        <span>üîÑ</span>
                        <span>R√©√©couter</span>
                    </button>
                </div>
            </div>

            <div class="question-section">
                <h3>Choisissez votre question :</h3>
                <div class="question-options" id="questionOptions"></div>
            </div>

            <div class="validate-btn-container">
                <button class="btn btn-primary" id="validateBtn" onclick="validateChoice()" disabled>
                    Valider ‚ñ∂
                </button>
            </div>

            <div class="feedback-box" id="feedbackBox">
                <div class="feedback-header" id="feedbackHeader"></div>
                <div class="feedback-text" id="feedbackText"></div>
                <div class="feedback-actions" id="feedbackActions"></div>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="resultsScreen">
            <div class="results-screen">
                <h2>üìä R√©sultats</h2>
                <h3 id="resultsScenarioTitle" style="color: var(--text-secondary); font-weight: 400; margin-bottom: 1.5rem;"></h3>
                
                <div class="score-grid">
                    <div class="score-item ideale">
                        <div class="count" id="idealeCount">0</div>
                        <div class="label">‚úÖ Id√©ales</div>
                    </div>
                    <div class="score-item acceptable">
                        <div class="count" id="acceptableCount">0</div>
                        <div class="label">‚ö†Ô∏è Acceptables</div>
                    </div>
                    <div class="score-item mauvaise">
                        <div class="count" id="mauvaiseCount">0</div>
                        <div class="label">‚ùå Reprises</div>
                    </div>
                </div>

                <div class="nclc-estimate">
                    <div class="label">Estimation NCLC</div>
                    <div class="level" id="nclcLevel">7-8</div>
                </div>

                <div class="tips-box">
                    <h4>üí° Conseils personnalis√©s</h4>
                    <ul id="tipsList"></ul>
                </div>

                <div class="results-actions">
                    <button class="btn btn-secondary" onclick="restartScenario()">Recommencer</button>
                    <button class="btn btn-primary" onclick="backToScenarios()">Autre sc√©nario</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =====================================================
        // CONFIGURATION
        // =====================================================
        const VOICE_ID = 'XTyroWkQl32ZSd3rRVZ1';
        let apiKey = null;
        let voiceEnabled = false;
        let currentAudio = null;

        // =====================================================
        // SCENARIO DATA
        // =====================================================
        const scenarios = [
            // SCENARIO 0: Louer un appartement
            {
                id: 0,
                icon: 'üè†',
                title: 'Louer un appartement',
                context: `Vous avez vu une annonce sur le site d'une agence immobili√®re pour un appartement de trois pi√®ces situ√© dans le quartier du Plateau-Mont-Royal √† Montr√©al. Le loyer affich√© est de 1 450 $ par mois. Vous t√©l√©phonez √† l'agence pour obtenir plus de renseignements avant de prendre rendez-vous pour une visite.`,
                objective: `<strong>Votre objectif :</strong> Poser des questions pr√©cises et professionnelles pour obtenir toutes les informations n√©cessaires sur l'appartement (disponibilit√©, charges, conditions, visite).`,
                rounds: [
                    {
                        interviewerText: `Agence Immobili√®re Dumoulin, bonjour. Je suis Nathalie, comment puis-je vous aider ?`,
                        responses: {
                            mauvaise: `Euh, oui... c'est √† quel sujet ? Vous cherchez un appartement en particulier ?`,
                            acceptable: `Oui, c'est toujours disponible. C'est pour le T3 sur le Plateau, c'est √ßa ?`,
                            ideale: `Ah oui, le trois-pi√®ces rue Saint-Denis ! Oui, il est toujours disponible. Vous avez des questions sur l'appartement ?`
                        },
                        feedback: {
                            mauvaise: `Votre phrase ne pr√©cise pas de quel appartement il s'agit ni pourquoi vous appelez. L'interlocuteur doit vous demander des clarifications. √Ä un niveau NCLC 8, on s'attend √† des questions pr√©cises d√®s le d√©part.`,
                            acceptable: `Votre question est compr√©hensible et l'interlocuteur peut identifier l'annonce. Cependant, une formulation plus compl√®te (adresse pr√©cise, type d'appartement) serait plus professionnelle.`,
                            ideale: `Excellent ! Vous avez identifi√© clairement l'appartement avec des d√©tails pr√©cis (adresse, type). Cela permet une conversation efficace d√®s le d√©part.`
                        },
                        options: [
                            { text: `C'est pour un appartement.`, type: 'mauvaise' },
                            { text: `Bonjour, j'appelle pour une annonce que j'ai vue.`, type: 'mauvaise' },
                            { text: `Bonjour, j'ai vu une annonce pour un appartement sur le Plateau. Il est encore disponible ?`, type: 'acceptable' },
                            { text: `Bonjour Madame. Je vous appelle au sujet de l'appartement de trois pi√®ces situ√© rue Saint-Denis, dans le Plateau-Mont-Royal. Pourriez-vous me confirmer s'il est toujours disponible ?`, type: 'ideale' },
                            { text: `Vous avez des appartements ?`, type: 'mauvaise' }
                        ]
                    },
                    {
                        interviewerText: `Oui, tout √† fait. L'appartement est disponible √† partir du premier mars. Qu'est-ce que vous aimeriez savoir ?`,
                        responses: {
                            mauvaise: `Euh... le loyer ? C'est 1 450 $ comme indiqu√© sur l'annonce. Vous vouliez savoir autre chose ?`,
                            acceptable: `Le loyer est de 1 450 $ par mois. Les charges ne sont pas comprises, il faut compter environ 80 $ de plus pour l'√©lectricit√©.`,
                            ideale: `Bien s√ªr. Le loyer est de 1 450 $ par mois, et √ßa inclut le chauffage et l'eau chaude. L'√©lectricit√© est √† votre charge, mais c'est un appartement bien isol√©, donc g√©n√©ralement √ßa ne d√©passe pas 50 √† 60 $ par mois.`
                        },
                        feedback: {
                            mauvaise: `La question ¬´ C'est cher ? ¬ª est trop vague et informelle. Le prix est d√©j√† dans l'annonce. Posez plut√¥t des questions sur ce qui n'est pas mentionn√©, comme les charges.`,
                            acceptable: `Bonne question sur le loyer. Cependant, √† ce niveau, il serait pr√©f√©rable d'anticiper et de demander directement si les charges sont incluses.`,
                            ideale: `Parfait ! Vous avez anticip√© un d√©tail important (les charges) et pos√© une question compl√®te. C'est exactement le niveau de pr√©cision attendu pour NCLC 8.`
                        },
                        options: [
                            { text: `C'est cher ?`, type: 'mauvaise' },
                            { text: `Le loyer, c'est combien ?`, type: 'mauvaise' },
                            { text: `Pourriez-vous me confirmer le montant du loyer mensuel ?`, type: 'acceptable' },
                            { text: `Je voudrais savoir si le loyer de 1 450 $ inclut les charges, notamment le chauffage et l'√©lectricit√© ?`, type: 'ideale' },
                            { text: `Pourriez-vous me pr√©ciser ce qui est compris dans le loyer ? Je pense notamment au chauffage, √† l'eau chaude et √† l'√©lectricit√©.`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `C'est un appartement lumineux avec de grandes fen√™tres. Il y a un salon, deux chambres, une cuisine √©quip√©e et une salle de bain. Le b√¢timent date de 1985, mais il a √©t√© r√©nov√© il y a trois ans.`,
                        responses: {
                            mauvaise: `Euh, c'est grand, oui. Environ 75 m√®tres carr√©s, je crois.`,
                            acceptable: `L'appartement fait 75 m√®tres carr√©s. C'est au troisi√®me √©tage.`,
                            ideale: `L'appartement fait exactement 78 m√®tres carr√©s. Il est situ√© au troisi√®me √©tage d'un immeuble de quatre √©tages, avec ascenseur. Le salon fait environ 25 m√®tres carr√©s et les chambres font 12 et 14 m√®tres carr√©s.`
                        },
                        feedback: {
                            mauvaise: `Votre question est trop vague. ¬´ C'est grand comment ? ¬ª manque de pr√©cision. Demandez plut√¥t la superficie exacte ou des d√©tails sur les pi√®ces.`,
                            acceptable: `Bonne question sur la superficie. Vous pourriez enrichir en demandant √©galement l'√©tage ou d'autres d√©tails pratiques.`,
                            ideale: `Excellent ! Vous avez pos√© une question compl√®te qui couvre plusieurs aspects importants (superficie, √©tage, ascenseur). C'est efficace et professionnel.`
                        },
                        options: [
                            { text: `C'est grand comment ?`, type: 'mauvaise' },
                            { text: `Il y a combien de pi√®ces ?`, type: 'mauvaise' },
                            { text: `Quelle est la superficie de l'appartement ?`, type: 'acceptable' },
                            { text: `Pourriez-vous me donner la superficie totale de l'appartement ainsi que l'√©tage ? Y a-t-il un ascenseur dans l'immeuble ?`, type: 'ideale' },
                            { text: `J'aimerais conna√Ætre la surface habitable et savoir √† quel √©tage se situe l'appartement.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Pour les conditions, nous demandons g√©n√©ralement un d√©p√¥t de garantie √©quivalent √† un mois de loyer, ainsi que des r√©f√©rences de votre ancien propri√©taire.`,
                        responses: {
                            mauvaise: `Il faut des papiers, oui. Une pi√®ce d'identit√©, des fiches de paie...`,
                            acceptable: `Nous demandons une pi√®ce d'identit√©, vos trois derni√®res fiches de paie et une lettre de r√©f√©rence de votre employeur ou ancien propri√©taire.`,
                            ideale: `Pour constituer votre dossier, nous avons besoin d'une pi√®ce d'identit√© valide, de vos trois derni√®res fiches de paie, d'une preuve d'emploi actuel, ainsi qu'une lettre de r√©f√©rence. Si vous √™tes travailleur autonome, nous acceptons vos deux derniers avis d'imposition. Le d√©p√¥t de garantie est encaiss√© √† la signature du bail.`
                        },
                        feedback: {
                            mauvaise: `La question ¬´ Il faut quoi comme papiers ? ¬ª est trop informelle pour ce contexte. Utilisez un registre plus soutenu et soyez plus pr√©cis.`,
                            acceptable: `Bonne question sur les documents. Vous pourriez la formuler de mani√®re plus √©labor√©e en demandant √©galement les conditions sp√©cifiques.`,
                            ideale: `Parfait ! Vous avez anticip√© les d√©marches administratives avec une question compl√®te et professionnelle. Cela montre que vous √™tes un locataire s√©rieux.`
                        },
                        options: [
                            { text: `Il faut quoi comme papiers ?`, type: 'mauvaise' },
                            { text: `C'est quoi les conditions ?`, type: 'mauvaise' },
                            { text: `Quels documents dois-je fournir pour le dossier de location ?`, type: 'acceptable' },
                            { text: `Pourriez-vous me d√©tailler les pi√®ces justificatives √† fournir pour constituer mon dossier de candidature ? Y a-t-il des conditions particuli√®res concernant les revenus ou les garanties ?`, type: 'ideale' },
                            { text: `J'aimerais savoir quelles sont les pi√®ces √† fournir et si vous avez des exigences particuli√®res concernant le garant ou les revenus minimum.`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `Nous organisons des visites du mardi au samedi. Cette semaine, j'ai encore des disponibilit√©s jeudi apr√®s-midi et samedi matin.`,
                        responses: {
                            mauvaise: `Euh, vous voulez venir quand exactement ?`,
                            acceptable: `D'accord. Jeudi, je peux vous proposer 14h ou 16h. Samedi, ce serait plut√¥t 10h ou 11h30.`,
                            ideale: `Tr√®s bien. Jeudi apr√®s-midi, j'ai des cr√©neaux √† 14h, 15h30 et 16h. Samedi matin, ce serait √† 10h ou 11h30. La visite dure environ 20 minutes et je pourrai r√©pondre √† toutes vos questions sur place. Qu'est-ce qui vous arrangerait ?`
                        },
                        feedback: {
                            mauvaise: `La question ¬´ Je peux venir quand ? ¬ª est trop directe et manque de politesse. Proposez plut√¥t vos disponibilit√©s ou demandez les cr√©neaux pr√©cis.`,
                            acceptable: `Bonne d√©marche de demander un rendez-vous. Vous pourriez √™tre plus pr√©cis en proposant vos propres disponibilit√©s.`,
                            ideale: `Excellent ! Vous avez propos√© des cr√©neaux pr√©cis tout en restant flexible. C'est professionnel et facilite l'organisation pour les deux parties.`
                        },
                        options: [
                            { text: `Je peux venir quand ?`, type: 'mauvaise' },
                            { text: `C'est possible de visiter ?`, type: 'mauvaise' },
                            { text: `Quels cr√©neaux avez-vous de disponibles pour une visite ?`, type: 'acceptable' },
                            { text: `Serait-il possible de planifier une visite ? Je suis disponible jeudi apr√®s-midi √† partir de 14h ou samedi matin avant midi. Quel cr√©neau vous conviendrait le mieux ?`, type: 'ideale' },
                            { text: `J'aimerais visiter l'appartement. Est-ce que samedi matin vous conviendrait ? Je suis flexible sur l'horaire.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Parfait, je vous note pour samedi √† 10h alors. L'adresse exacte est le 4521, rue Saint-Denis. Y a-t-il autre chose que vous aimeriez savoir avant la visite ?`,
                        responses: {
                            mauvaise: `D'accord. √Ä samedi alors.`,
                            acceptable: `Tr√®s bien. Je serai l√† √† 10h samedi. Merci pour ces informations.`,
                            ideale: `Merci beaucoup. C'est not√© pour samedi √† 10h au 4521, rue Saint-Denis. J'aurai tous mes documents avec moi au cas o√π l'appartement me conviendrait. Bonne fin de journ√©e !`
                        },
                        feedback: {
                            mauvaise: `La r√©ponse ¬´ Non c'est bon ¬ª est trop br√®ve et informelle. Confirmez les d√©tails et remerciez votre interlocuteur.`,
                            acceptable: `Bonne conclusion. Vous pourriez enrichir en r√©capitulant les informations importantes (heure, adresse).`,
                            ideale: `Parfait ! Vous avez r√©capitul√© les informations cl√©s, montr√© votre pr√©paration et conclu de mani√®re professionnelle et courtoise.`
                        },
                        options: [
                            { text: `Non c'est bon.`, type: 'mauvaise' },
                            { text: `OK, √† samedi.`, type: 'mauvaise' },
                            { text: `Non, je crois avoir toutes les informations. Merci beaucoup et √† samedi.`, type: 'acceptable' },
                            { text: `Non, je pense avoir toutes les informations n√©cessaires. Je vous remercie pour votre disponibilit√© et ces renseignements d√©taill√©s. Je serai donc au 4521, rue Saint-Denis samedi √† 10h. Bonne journ√©e !`, type: 'ideale' },
                            { text: `Merci pour ces pr√©cisions. C'est tr√®s clair. Je me r√©jouis de visiter l'appartement samedi. √Ä bient√¥t !`, type: 'acceptable' }
                        ]
                    }
                ]
            },

            // SCENARIO 1: Retourner un produit
            {
                id: 1,
                icon: 'üõçÔ∏è',
                title: 'Retourner un produit',
                context: `Vous avez achet√© un ordinateur portable en ligne il y a deux semaines. Depuis hier, l'√©cran affiche des lignes horizontales et l'appareil surchauffe anormalement. Vous contactez le service client du magasin TechnoPlus pour signaler le probl√®me et demander un √©change ou un remboursement.`,
                objective: `<strong>Votre objectif :</strong> Expliquer clairement le probl√®me, vous renseigner sur la proc√©dure de retour et obtenir une solution satisfaisante (√©change ou remboursement).`,
                rounds: [
                    {
                        interviewerText: `TechnoPlus, service client, bonjour. Je suis Marc. Comment puis-je vous aider aujourd'hui ?`,
                        responses: {
                            mauvaise: `Euh... vous avez un probl√®me avec un produit ? C'est quoi comme appareil ?`,
                            acceptable: `D'accord, je comprends. C'est un ordinateur portable, c'est √ßa ? Vous l'avez achet√© quand ?`,
                            ideale: `Je suis d√©sol√© d'apprendre cela. Pourriez-vous me donner la r√©f√©rence de votre commande ou le num√©ro de s√©rie de l'appareil pour que je puisse acc√©der √† votre dossier ?`
                        },
                        feedback: {
                            mauvaise: `Votre phrase est trop vague. L'interlocuteur ne sait pas de quel produit il s'agit ni quel est le probl√®me exact. Soyez plus pr√©cis d√®s le d√©part.`,
                            acceptable: `Vous avez mentionn√© le produit et le probl√®me. Cependant, ajouter des d√©tails comme la date d'achat ou le num√©ro de commande rendrait votre demande plus efficace.`,
                            ideale: `Excellent ! Vous avez fourni tous les √©l√©ments essentiels : le produit, le probl√®me pr√©cis, et la date d'achat. Cela permet un traitement rapide de votre demande.`
                        },
                        options: [
                            { text: `Mon ordi marche plus.`, type: 'mauvaise' },
                            { text: `J'ai un probl√®me avec un achat.`, type: 'mauvaise' },
                            { text: `Bonjour, j'ai achet√© un ordinateur portable et il ne fonctionne plus correctement.`, type: 'acceptable' },
                            { text: `Bonjour Marc. Je vous contacte au sujet d'un ordinateur portable que j'ai command√© sur votre site il y a deux semaines. L'√©cran pr√©sente des lignes horizontales et l'appareil surchauffe anormalement. J'aimerais savoir comment proc√©der pour un √©change ou un remboursement.`, type: 'ideale' },
                            { text: `Bonjour. J'ai un probl√®me avec mon ordinateur achet√© chez vous r√©cemment. L'√©cran a des d√©fauts et il chauffe beaucoup.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Je vois votre commande. L'ordinateur est bien sous garantie. Pouvez-vous me d√©crire plus pr√©cis√©ment les probl√®mes que vous rencontrez ?`,
                        responses: {
                            mauvaise: `Des lignes ? Elles sont comment ces lignes ? De quelle couleur ?`,
                            acceptable: `D'accord, je comprends. Et ce probl√®me, il est apparu soudainement ou progressivement ?`,
                            ideale: `Je vois. Ces sympt√¥mes peuvent indiquer un probl√®me avec la carte graphique ou le syst√®me de refroidissement. Vu que l'appareil est sous garantie et que le probl√®me est apparu si t√¥t, nous pouvons vous proposer un √©change standard ou un remboursement int√©gral. Quelle option pr√©f√©reriez-vous ?`
                        },
                        feedback: {
                            mauvaise: `Votre description est trop vague (¬´ √ßa marche pas bien ¬ª). D√©crivez les sympt√¥mes pr√©cis pour faciliter le diagnostic.`,
                            acceptable: `Bonne description du probl√®me de l'√©cran. Vous pourriez ajouter des d√©tails sur les circonstances (quand cela se produit, depuis quand).`,
                            ideale: `Parfait ! Vous avez d√©crit les sympt√¥mes de mani√®re pr√©cise et chronologique. Cela aide le technicien √† comprendre et r√©soudre le probl√®me rapidement.`
                        },
                        options: [
                            { text: `Ben, √ßa marche pas bien quoi.`, type: 'mauvaise' },
                            { text: `L'√©cran a des probl√®mes et il chauffe.`, type: 'mauvaise' },
                            { text: `L'√©cran affiche des lignes horizontales vertes et roses depuis hier. L'ordinateur devient aussi tr√®s chaud.`, type: 'acceptable' },
                            { text: `Bien s√ªr. Depuis hier, des lignes horizontales vertes et roses apparaissent sur l'√©cran, surtout dans la partie inf√©rieure. De plus, l'appareil chauffe excessivement apr√®s seulement dix minutes d'utilisation, au point que le ventilateur tourne en permanence √† pleine vitesse. Je n'ai install√© aucun logiciel inhabituel.`, type: 'ideale' },
                            { text: `L'√©cran montre des lignes color√©es en bas et l'ordinateur surchauffe rapidement. Le probl√®me est apparu hier sans raison apparente.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Je vous propose soit un √©change avec le m√™me mod√®le, soit un remboursement int√©gral. Dans les deux cas, il faudra nous retourner l'appareil d√©fectueux.`,
                        responses: {
                            mauvaise: `Euh, qu'est-ce que vous pr√©f√©rez ?`,
                            acceptable: `Pour un √©change, nous vous envoyons le nouvel appareil sous 3 √† 5 jours ouvrables apr√®s r√©ception du retour.`,
                            ideale: `Pour l'√©change, nous pouvons vous envoyer le nouvel appareil en express sous 48 heures, et vous aurez 14 jours pour nous retourner l'appareil d√©fectueux. Pour le remboursement, le montant sera cr√©dit√© sur votre compte dans les 5 √† 7 jours suivant la r√©ception du retour. Quelle option vous conviendrait le mieux ?`
                        },
                        feedback: {
                            mauvaise: `Vous n'avez pas exprim√© de pr√©f√©rence claire. Indiquez votre choix et posez des questions sur la proc√©dure.`,
                            acceptable: `Vous avez indiqu√© votre pr√©f√©rence. Pensez √† demander les d√©tails de la proc√©dure (d√©lais, frais √©ventuels).`,
                            ideale: `Excellent ! Vous avez clairement indiqu√© votre pr√©f√©rence et demand√© les informations pratiques importantes (d√©lais de livraison et de retour).`
                        },
                        options: [
                            { text: `Je sais pas, qu'est-ce qui est mieux ?`, type: 'mauvaise' },
                            { text: `Je veux un √©change.`, type: 'mauvaise' },
                            { text: `Je pr√©f√©rerais un √©change. Comment √ßa se passe pour le retour ?`, type: 'acceptable' },
                            { text: `Je pr√©f√©rerais un √©change plut√¥t qu'un remboursement. Pourriez-vous m'expliquer la proc√©dure exacte ? Notamment, combien de temps faudra-t-il pour recevoir le nouvel appareil et ai-je besoin de renvoyer l'ancien en premier ?`, type: 'ideale' },
                            { text: `Un √©change me conviendrait mieux. Quels sont les d√©lais pour recevoir le nouveau produit et pour retourner l'ancien ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Pour le retour, vous avez deux options : soit vous d√©posez le colis dans un point relais, soit nous organisons un enl√®vement √† domicile. Les frais de retour sont √† notre charge.`,
                        responses: {
                            mauvaise: `Euh, o√π √ßa un point relais ?`,
                            acceptable: `Il y a un point relais √† moins d'un kilom√®tre de chez vous. Je peux vous envoyer l'adresse par courriel. Sinon, pour l'enl√®vement √† domicile, je peux programmer un passage demain ou apr√®s-demain.`,
                            ideale: `Pour le point relais, je vous envoie par courriel l'√©tiquette de retour pr√©pay√©e ainsi que l'adresse du relais le plus proche. Pour l'enl√®vement √† domicile, c'est gratuit et je peux programmer le passage du livreur demain entre 9h et 12h ou entre 14h et 17h. Quelle option vous arrange le mieux ?`
                        },
                        feedback: {
                            mauvaise: `La question est trop vague. Demandez des pr√©cisions sur les deux options (points relais disponibles, horaires d'enl√®vement).`,
                            acceptable: `Bonne question sur la proc√©dure. Vous pourriez demander plus de d√©tails (adresse du point relais, horaires pour l'enl√®vement).`,
                            ideale: `Parfait ! Vous avez demand√© des informations pratiques et pr√©cises qui vous permettront de choisir l'option la plus adapt√©e √† votre situation.`
                        },
                        options: [
                            { text: `C'est o√π le point relais ?`, type: 'mauvaise' },
                            { text: `Comment je fais pour le retour ?`, type: 'mauvaise' },
                            { text: `Pourriez-vous me donner l'adresse du point relais le plus proche de chez moi ?`, type: 'acceptable' },
                            { text: `Je pr√©f√©rerais un enl√®vement √† domicile. Quels cr√©neaux horaires proposez-vous ? Et faut-il pr√©parer le colis d'une mani√®re particuli√®re ?`, type: 'ideale' },
                            { text: `L'enl√®vement √† domicile m'arrangerait. Est-ce possible demain ? Et dois-je emballer l'ordinateur dans son carton d'origine ?`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `D'accord, je programme l'enl√®vement pour demain entre 9h et 12h. Vous recevrez un SMS de confirmation avec un cr√©neau plus pr√©cis. Gardez bien l'emballage d'origine si possible.`,
                        responses: {
                            mauvaise: `Oui, un SMS de confirmation vous sera envoy√© ce soir.`,
                            acceptable: `Oui, vous recevrez un courriel de confirmation avec le num√©ro de suivi dans quelques minutes.`,
                            ideale: `Absolument. Je vous envoie imm√©diatement un courriel r√©capitulatif avec le num√©ro de dossier, les d√©tails de l'enl√®vement et le num√©ro de suivi pour votre √©change. Vous pourrez suivre l'avancement √† tout moment sur notre site. Avez-vous d'autres questions ?`
                        },
                        feedback: {
                            mauvaise: `La question sur la confirmation est importante mais trop basique. Demandez √©galement le num√©ro de suivi ou de dossier.`,
                            acceptable: `Bonne question de confirmation. Pensez √† demander un num√©ro de r√©f√©rence pour suivre votre dossier.`,
                            ideale: `Excellent ! Vous avez pens√© √† demander une confirmation √©crite et un num√©ro de suivi, ce qui est essentiel pour le suivi de votre dossier.`
                        },
                        options: [
                            { text: `OK.`, type: 'mauvaise' },
                            { text: `Je vais recevoir une confirmation ?`, type: 'mauvaise' },
                            { text: `Pourriez-vous m'envoyer une confirmation par courriel avec les d√©tails ?`, type: 'acceptable' },
                            { text: `Parfait. Pourriez-vous m'envoyer un r√©capitulatif par courriel avec le num√©ro de dossier et les informations de suivi pour l'√©change ?`, type: 'ideale' },
                            { text: `Tr√®s bien. Est-ce que je recevrai un num√©ro de suivi pour suivre le retour et l'envoi du nouvel appareil ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Voil√†, j'ai tout enregistr√©. Vous recevrez le courriel de confirmation dans quelques minutes. Y a-t-il autre chose que je puisse faire pour vous ?`,
                        responses: {
                            mauvaise: `D'accord. Au revoir.`,
                            acceptable: `Non, c'est tout. Merci pour votre aide. Au revoir.`,
                            ideale: `Non, je pense que nous avons couvert tous les points. Je vous remercie sinc√®rement pour votre efficacit√© et votre aide. Bonne journ√©e !`
                        },
                        feedback: {
                            mauvaise: `La conclusion est trop abrupte. Remerciez votre interlocuteur pour son aide.`,
                            acceptable: `Bonne conclusion avec remerciement. Vous pourriez r√©capituler bri√®vement ce qui a √©t√© convenu.`,
                            ideale: `Parfait ! Conclusion professionnelle et courtoise. Vous avez r√©capitul√© et remerci√© votre interlocuteur de mani√®re appropri√©e.`
                        },
                        options: [
                            { text: `Non. Salut.`, type: 'mauvaise' },
                            { text: `C'est bon, merci.`, type: 'mauvaise' },
                            { text: `Non, c'est parfait. Merci beaucoup pour votre aide. Bonne journ√©e.`, type: 'acceptable' },
                            { text: `Non, je crois que tout est clair. Je vous remercie pour votre professionnalisme et la rapidit√© du traitement. J'attends donc l'enl√®vement demain matin et le nouvel appareil sous 48 heures. Excellente journ√©e !`, type: 'ideale' },
                            { text: `Non merci, vous avez √©t√© tr√®s efficace. Donc le livreur passe demain matin et je re√ßois le nouvel ordinateur d'ici deux jours. Parfait ! Bonne continuation.`, type: 'ideale' }
                        ]
                    }
                ]
            },

            // SCENARIO 2: Offre d'emploi
            {
                id: 2,
                icon: 'üíº',
                title: "Se renseigner sur une offre d'emploi",
                context: `Vous avez vu une offre d'emploi pour un poste de charg√© de communication dans une entreprise de technologies environnementales, √âcoTech Solutions. L'annonce mentionne un contrat √† dur√©e ind√©termin√©e et indique ¬´ salaire selon exp√©rience ¬ª. Vous appelez pour obtenir plus de renseignements avant d'envoyer votre candidature.`,
                objective: `<strong>Votre objectif :</strong> Obtenir des informations pr√©cises sur le poste (missions, conditions, processus de recrutement) pour pr√©parer une candidature solide.`,
                rounds: [
                    {
                        interviewerText: `√âcoTech Solutions, bonjour. Ressources humaines, Sophie √† l'appareil.`,
                        responses: {
                            mauvaise: `Euh, vous appelez pour quel poste exactement ?`,
                            acceptable: `Oui, le poste est toujours ouvert. Vous avez des questions particuli√®res ?`,
                            ideale: `Bonjour ! Oui, le poste de charg√© de communication est toujours √† pourvoir. La date limite pour postuler est le 15 du mois prochain. Que souhaitez-vous savoir ?`
                        },
                        feedback: {
                            mauvaise: `Votre phrase est trop vague. Identifiez clairement le poste qui vous int√©resse et pr√©cisez votre demande.`,
                            acceptable: `Vous avez identifi√© le poste mais la formulation pourrait √™tre plus professionnelle. Pr√©cisez √©galement ce que vous souhaitez savoir.`,
                            ideale: `Excellent ! Vous avez identifi√© clairement le poste et exprim√© une demande professionnelle et pr√©cise.`
                        },
                        options: [
                            { text: `C'est pour un emploi.`, type: 'mauvaise' },
                            { text: `Bonjour, vous avez encore des postes disponibles ?`, type: 'mauvaise' },
                            { text: `Bonjour, j'appelle pour le poste de charg√© de communication. Il est toujours disponible ?`, type: 'acceptable' },
                            { text: `Bonjour Sophie. Je me permets de vous appeler au sujet de l'offre de charg√© de communication que j'ai vue sur votre site. J'aurais quelques questions avant de soumettre ma candidature. Le poste est-il toujours ouvert ?`, type: 'ideale' },
                            { text: `Bonjour Madame. J'ai consult√© votre offre pour le poste de charg√© de communication et j'aimerais obtenir quelques pr√©cisions avant de postuler.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Le poste est rattach√© √† la direction marketing. Vous serez responsable de la communication externe de l'entreprise et travaillerez avec une √©quipe de cinq personnes.`,
                        responses: {
                            mauvaise: `Euh, vous faites quoi comme communication ?`,
                            acceptable: `Les missions principales incluent la r√©daction de communiqu√©s de presse, la gestion des r√©seaux sociaux et l'organisation d'√©v√©nements.`,
                            ideale: `Les missions sont vari√©es : vous serez en charge de la strat√©gie de communication digitale, de la r√©daction des communiqu√©s de presse, de la gestion des r√©seaux sociaux et des relations avec les m√©dias. Vous participerez √©galement √† l'organisation de nos √©v√©nements annuels, notamment notre salon de l'environnement.`
                        },
                        feedback: {
                            mauvaise: `La question ¬´ Je ferais quoi exactement ? ¬ª est trop informelle. Demandez plut√¥t les missions principales de mani√®re professionnelle.`,
                            acceptable: `Bonne question sur les missions. Vous pourriez √™tre plus pr√©cis en demandant √©galement les responsabilit√©s et projets sp√©cifiques.`,
                            ideale: `Parfait ! Question compl√®te et professionnelle qui couvre les missions, responsabilit√©s et projets concrets du poste.`
                        },
                        options: [
                            { text: `Je ferais quoi exactement ?`, type: 'mauvaise' },
                            { text: `C'est quoi le travail ?`, type: 'mauvaise' },
                            { text: `Pourriez-vous me d√©tailler les missions principales du poste ?`, type: 'acceptable' },
                            { text: `Pourriez-vous me pr√©senter les missions principales ainsi que les projets concrets sur lesquels je serais amen√© √† travailler ? Y a-t-il des responsabilit√©s particuli√®res li√©es √† ce poste ?`, type: 'ideale' },
                            { text: `J'aimerais en savoir plus sur les missions quotidiennes et les responsabilit√©s cl√©s de ce poste. Quels sont les principaux projets en cours ?`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `Nous recherchons quelqu'un avec au moins trois ans d'exp√©rience en communication, une excellente ma√Ætrise du fran√ßais √©crit et la capacit√© de travailler sur plusieurs projets simultan√©ment.`,
                        responses: {
                            mauvaise: `C'est tout ? Pas d'autres comp√©tences ?`,
                            acceptable: `Oui, la ma√Ætrise des outils de cr√©ation graphique comme la suite Adobe serait un plus. L'anglais professionnel est √©galement appr√©ci√©.`,
                            ideale: `En plus de l'exp√©rience en communication, nous appr√©cions la ma√Ætrise des outils de la suite Adobe, une bonne connaissance des strat√©gies SEO et une sensibilit√© aux enjeux environnementaux. L'anglais professionnel est un atout car nous travaillons avec des partenaires internationaux.`
                        },
                        feedback: {
                            mauvaise: `Cette question manque de structure. Posez des questions sp√©cifiques sur les comp√©tences techniques ou linguistiques attendues.`,
                            acceptable: `Bonne question sur les qualifications. Vous pourriez approfondir en demandant les comp√©tences techniques sp√©cifiques ou linguistiques.`,
                            ideale: `Excellent ! Question strat√©gique qui vous permet de mettre en valeur vos comp√©tences dans votre candidature.`
                        },
                        options: [
                            { text: `Il faut quoi comme dipl√¥me ?`, type: 'mauvaise' },
                            { text: `D'accord. C'est tout ?`, type: 'mauvaise' },
                            { text: `Y a-t-il des comp√©tences techniques particuli√®res requises, comme la ma√Ætrise de certains logiciels ?`, type: 'acceptable' },
                            { text: `En dehors de l'exp√©rience professionnelle, y a-t-il des comp√©tences techniques sp√©cifiques attendues ? Je pense notamment aux outils num√©riques, aux comp√©tences r√©dactionnelles ou aux langues √©trang√®res.`, type: 'ideale' },
                            { text: `Quelles comp√©tences additionnelles seraient particuli√®rement valoris√©es pour ce poste ? Des certifications ou des langues par exemple ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Pour le salaire, nous proposons une fourchette entre 45 000 et 55 000 dollars annuels selon l'exp√©rience. Le poste inclut √©galement plusieurs avantages sociaux.`,
                        responses: {
                            mauvaise: `45 000 ? C'est pas beaucoup...`,
                            acceptable: `Nous offrons une assurance collective compl√®te, trois semaines de vacances et la possibilit√© de t√©l√©travailler deux jours par semaine.`,
                            ideale: `Les avantages comprennent une assurance collective compl√®te sant√© et dentaire, un r√©gime de retraite avec contribution de l'employeur, quatre semaines de vacances apr√®s la premi√®re ann√©e, et un mode de travail hybride avec deux jours de t√©l√©travail par semaine. Nous offrons aussi un budget formation annuel.`
                        },
                        feedback: {
                            mauvaise: `√âvitez les jugements de valeur sur le salaire. Demandez plut√¥t des pr√©cisions sur les avantages et conditions.`,
                            acceptable: `Bonne question sur les avantages. Vous pourriez demander plus de d√©tails sur les conditions de travail (t√©l√©travail, horaires).`,
                            ideale: `Parfait ! Question compl√®te qui vous permet d'√©valuer l'offre globale et de n√©gocier si n√©cessaire.`
                        },
                        options: [
                            { text: `C'est tout ?`, type: 'mauvaise' },
                            { text: `C'est n√©gociable le salaire ?`, type: 'mauvaise' },
                            { text: `Pourriez-vous me pr√©ciser les avantages sociaux propos√©s ?`, type: 'acceptable' },
                            { text: `Je vous remercie pour ces pr√©cisions. Pourriez-vous me d√©tailler les avantages sociaux inclus dans ce poste ? Je pense notamment √† l'assurance, au r√©gime de retraite et aux possibilit√©s de t√©l√©travail.`, type: 'ideale' },
                            { text: `J'aimerais en savoir plus sur les conditions de travail : les avantages sociaux, les possibilit√©s de t√©l√©travail et les perspectives d'√©volution.`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `Le processus comprend une premi√®re s√©lection sur CV, puis un entretien avec le responsable marketing et enfin une rencontre avec la directrice des ressources humaines.`,
                        responses: {
                            mauvaise: `C'est long comme processus ?`,
                            acceptable: `Le processus complet prend g√©n√©ralement deux √† trois semaines. Nous pr√©voyons de prendre notre d√©cision fin janvier.`,
                            ideale: `Le processus prend environ trois semaines. Apr√®s l'envoi de votre CV, vous serez contact√© sous huit jours si votre profil est retenu. Le premier entretien se fait en visioconf√©rence et dure environ 45 minutes. Le second entretien, en pr√©sentiel, inclut une mise en situation. Nous visons un d√©but de contrat en f√©vrier.`
                        },
                        feedback: {
                            mauvaise: `La question sur les d√©lais est importante mais trop vague. Demandez des pr√©cisions sur les √©tapes et les dates.`,
                            acceptable: `Bonne question sur le calendrier. Vous pourriez demander des d√©tails sur le format des entretiens.`,
                            ideale: `Excellent ! Question strat√©gique qui vous permet de bien pr√©parer votre candidature et de planifier votre disponibilit√©.`
                        },
                        options: [
                            { text: `C'est quand les entretiens ?`, type: 'mauvaise' },
                            { text: `Y a combien d'√©tapes ?`, type: 'mauvaise' },
                            { text: `Quel est le calendrier pr√©vu pour le processus de recrutement ?`, type: 'acceptable' },
                            { text: `Pourriez-vous me pr√©ciser le calendrier du processus de recrutement ? J'aimerais savoir quand les entretiens sont pr√©vus et quelle est la date d'entr√©e en poste envisag√©e.`, type: 'ideale' },
                            { text: `J'aimerais conna√Ætre les d√©lais du processus de s√©lection et le format des entretiens. La prise de poste est-elle pr√©vue pour une date pr√©cise ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Tr√®s bien. Vous pouvez envoyer votre CV et lettre de motivation √† recrutement@ecotech.ca. Avez-vous d'autres questions ?`,
                        responses: {
                            mauvaise: `D'accord, merci.`,
                            acceptable: `Non, je vous remercie pour ces informations. Je vais envoyer ma candidature rapidement. Bonne journ√©e.`,
                            ideale: `Non, je pense avoir toutes les informations n√©cessaires pour pr√©parer ma candidature. Je vous remercie sinc√®rement pour votre disponibilit√© et ces renseignements d√©taill√©s. J'enverrai mon dossier dans les prochains jours √† l'adresse indiqu√©e. Excellente journ√©e !`
                        },
                        feedback: {
                            mauvaise: `Conclusion trop abrupte. Remerciez votre interlocuteur et confirmez votre intention de postuler.`,
                            acceptable: `Bonne conclusion. Vous pourriez confirmer que vous avez bien not√© l'adresse et exprimer votre enthousiasme.`,
                            ideale: `Parfait ! Conclusion professionnelle qui montre votre motivation et laisse une bonne impression.`
                        },
                        options: [
                            { text: `OK, au revoir.`, type: 'mauvaise' },
                            { text: `D'accord, j'envoie mon CV. Merci.`, type: 'mauvaise' },
                            { text: `Merci beaucoup pour ces informations. Je vous envoie ma candidature tr√®s prochainement. Bonne journ√©e.`, type: 'acceptable' },
                            { text: `Je vous remercie infiniment pour votre temps et toutes ces pr√©cisions, Sophie. J'ai bien not√© l'adresse de candidature. Ce poste correspond exactement √† ce que je recherche et je me ferai un plaisir de vous envoyer mon dossier complet dans les meilleurs d√©lais. Je vous souhaite une excellente journ√©e !`, type: 'ideale' },
                            { text: `Merci beaucoup pour ces informations d√©taill√©es. Le poste m'int√©resse beaucoup. Je pr√©pare mon dossier de candidature et vous l'envoie rapidement. Bonne continuation !`, type: 'acceptable' }
                        ]
                    }
                ]
            },

            // SCENARIO 3: Modifier une r√©servation
            {
                id: 3,
                icon: 'üè®',
                title: 'Modifier une r√©servation',
                context: `Vous avez r√©serv√© une chambre d'h√¥tel √† Qu√©bec pour un voyage d'affaires, du 15 au 17 mars. Suite √† un changement dans votre emploi du temps, vous devez modifier les dates de votre s√©jour. Vous appelez l'h√¥tel Le Ch√¢teau Frontenac pour modifier votre r√©servation.`,
                objective: `<strong>Votre objectif :</strong> Modifier vos dates de r√©servation, v√©rifier les disponibilit√©s et vous assurer qu'il n'y a pas de frais suppl√©mentaires.`,
                rounds: [
                    {
                        interviewerText: `H√¥tel Le Ch√¢teau Frontenac, service des r√©servations. Bonsoir, Philippe √† votre service.`,
                        responses: {
                            mauvaise: `Euh, vous avez une r√©servation √† votre nom ?`,
                            acceptable: `Bonsoir. Bien s√ªr, je vais v√©rifier. √Ä quel nom est la r√©servation ?`,
                            ideale: `Bonsoir ! Bien s√ªr, je peux vous aider. Puis-je avoir votre num√©ro de r√©servation ou le nom sous lequel elle a √©t√© faite ?`
                        },
                        feedback: {
                            mauvaise: `Votre phrase est trop vague (¬´ ma r√©servation ¬ª). Donnez des d√©tails comme votre nom ou num√©ro de r√©servation.`,
                            acceptable: `Vous avez identifi√© votre demande. Cependant, fournir directement les d√©tails de r√©servation serait plus efficace.`,
                            ideale: `Excellent ! Vous avez fourni tous les √©l√©ments n√©cessaires pour permettre au r√©ceptionniste de retrouver rapidement votre r√©servation.`
                        },
                        options: [
                            { text: `Je veux changer ma r√©servation.`, type: 'mauvaise' },
                            { text: `Bonsoir, j'ai r√©serv√© une chambre et je dois modifier.`, type: 'mauvaise' },
                            { text: `Bonsoir, j'ai une r√©servation pour les 15 et 16 mars. J'aimerais la modifier si possible.`, type: 'acceptable' },
                            { text: `Bonsoir Philippe. J'ai une r√©servation √† mon nom, Tremblay, pour les nuits du 15 et 16 mars. Suite √† un impr√©vu professionnel, j'aurais besoin de modifier les dates de mon s√©jour. Serait-ce possible ?`, type: 'ideale' },
                            { text: `Bonsoir. Je vous appelle au sujet de ma r√©servation num√©ro 2847651. J'ai besoin de d√©caler mes dates de s√©jour si c'est faisable.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `J'ai bien votre r√©servation, Monsieur Tremblay. Une chambre Sup√©rieure pour les nuits du 15 et 16 mars. Quelles nouvelles dates souhaiteriez-vous ?`,
                        responses: {
                            mauvaise: `Plus tard dans le mois ? Quand exactement ?`,
                            acceptable: `Le 22 et 23, d'accord. Laissez-moi v√©rifier les disponibilit√©s.`,
                            ideale: `Je v√©rifie imm√©diatement. Oui, nous avons une chambre Sup√©rieure disponible pour les nuits du 22 et 23 mars. Souhaitez-vous conserver le m√™me type de chambre ?`
                        },
                        feedback: {
                            mauvaise: `¬´ Plus tard ¬ª est trop vague. Donnez des dates pr√©cises pour faciliter la recherche de disponibilit√©s.`,
                            acceptable: `Vous avez donn√© les nouvelles dates. Pensez √† demander √©galement si le m√™me type de chambre est disponible.`,
                            ideale: `Parfait ! Demande claire avec les nouvelles dates pr√©cises et une question pertinente sur les disponibilit√©s.`
                        },
                        options: [
                            { text: `Je sais pas, plus tard dans le mois ?`, type: 'mauvaise' },
                            { text: `La semaine d'apr√®s, c'est possible ?`, type: 'mauvaise' },
                            { text: `J'aimerais d√©caler au 22 et 23 mars. C'est disponible ?`, type: 'acceptable' },
                            { text: `J'aurais besoin de reporter mon s√©jour aux nuits du 22 et 23 mars. Auriez-vous encore des disponibilit√©s pour ces dates, id√©alement pour le m√™me type de chambre ?`, type: 'ideale' },
                            { text: `Je souhaiterais d√©caler aux 22 et 23 mars. Pourriez-vous v√©rifier si vous avez une chambre Sup√©rieure disponible pour ces dates ?`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `Oui, nous avons de la disponibilit√©. Le tarif pour ces dates est l√©g√®rement diff√©rent : 285 $ par nuit au lieu de 265 $, car il y a un festival en ville ce week-end-l√†.`,
                        responses: {
                            mauvaise: `C'est cher quand m√™me...`,
                            acceptable: `Oui, le tarif est un peu plus √©lev√© √† cause du festival de musique qui a lieu en ville. C'est notre tarif standard pour cette p√©riode.`,
                            ideale: `Effectivement, le tarif est l√©g√®rement sup√©rieur en raison du Festival de musique de Qu√©bec ce week-end-l√†. Cela dit, nous pouvons vous offrir un surclassement gratuit vers une chambre avec vue sur le fleuve si vous le souhaitez, pour compenser cette diff√©rence.`
                        },
                        feedback: {
                            mauvaise: `√âvitez les commentaires n√©gatifs sur le prix. Demandez plut√¥t s'il existe des alternatives ou des avantages.`,
                            acceptable: `Vous avez accept√© le changement. Vous pourriez n√©gocier ou demander des avantages compensatoires.`,
                            ideale: `Excellent ! Vous avez demand√© une explication et cherch√© une solution avantageuse de mani√®re professionnelle.`
                        },
                        options: [
                            { text: `Pourquoi c'est plus cher ?`, type: 'mauvaise' },
                            { text: `C'est cher. Vous avez pas moins cher ?`, type: 'mauvaise' },
                            { text: `D'accord, je comprends. √áa me convient.`, type: 'acceptable' },
                            { text: `Je comprends pour la diff√©rence de tarif. Y aurait-il un geste commercial possible, comme un surclassement ou le petit-d√©jeuner inclus, pour compenser cette augmentation ?`, type: 'ideale' },
                            { text: `J'entends. Est-ce qu'il serait possible d'obtenir un avantage suppl√©mentaire pour cette diff√©rence ? Un petit-d√©jeuner offert par exemple ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Je peux vous offrir le petit-d√©jeuner continental pour les deux matins, ce qui repr√©sente une valeur de 40 $ par jour. Cela vous conviendrait-il ?`,
                        responses: {
                            mauvaise: `OK.`,
                            acceptable: `Oui, le petit-d√©jeuner est servi de 7h √† 10h dans notre restaurant Le Champlain.`,
                            ideale: `Parfait, c'est une offre int√©ressante. Le petit-d√©jeuner est servi au restaurant Le Champlain de 6h30 √† 10h30. Je vous ajoute cette prestation et je modifie vos dates de r√©servation. Souhaitez-vous √©galement que je note une demande particuli√®re, comme un √©tage √©lev√© ou une chambre calme ?`
                        },
                        feedback: {
                            mauvaise: `R√©ponse trop br√®ve. Confirmez votre accord et posez des questions pratiques sur le service.`,
                            acceptable: `Bonne acceptation. Vous pourriez demander des d√©tails pratiques comme les horaires ou le lieu du petit-d√©jeuner.`,
                            ideale: `Parfait ! Vous avez confirm√© votre acceptation et pos√© une question pratique pertinente.`
                        },
                        options: [
                            { text: `OK, √ßa va.`, type: 'mauvaise' },
                            { text: `D'accord pour le petit-d√©jeuner.`, type: 'mauvaise' },
                            { text: `Oui, c'est tr√®s bien. Le petit-d√©jeuner est servi √† quelle heure ?`, type: 'acceptable' },
                            { text: `C'est parfait, j'accepte avec plaisir. Pourriez-vous me pr√©ciser les horaires du petit-d√©jeuner et s'il est possible de demander une chambre avec vue sur le fleuve ?`, type: 'ideale' },
                            { text: `Merci, c'est une bonne proposition. √Ä quelle heure le restaurant ouvre-t-il le matin ? Et serait-il possible d'avoir une chambre en √©tage √©lev√© ?`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `Je note votre pr√©f√©rence pour une chambre en √©tage √©lev√©. Concernant le paiement, la modification n'entra√Æne pas de frais suppl√©mentaires autres que la diff√©rence de tarif. Souhaitez-vous r√©gler maintenant ou √† l'arriv√©e ?`,
                        responses: {
                            mauvaise: `Je payerai quand j'arrive.`,
                            acceptable: `Le paiement √† l'arriv√©e est tout √† fait possible. Un pr√©l√®vement d'autorisation sera effectu√© sur votre carte pour garantir la r√©servation.`,
                            ideale: `Vous pouvez r√©gler √† l'arriv√©e, aucun probl√®me. Une empreinte de carte sera prise pour garantir la r√©servation mais le pr√©l√®vement ne sera effectu√© qu'√† votre d√©part. Nous acceptons toutes les cartes bancaires. Avez-vous d'autres questions ?`
                        },
                        feedback: {
                            mauvaise: `R√©ponse correcte mais trop directe. Demandez des pr√©cisions sur les modalit√©s de paiement.`,
                            acceptable: `Bon choix. Vous pourriez demander si une garantie de carte est requise et quels modes de paiement sont accept√©s.`,
                            ideale: `Excellent ! Vous avez clarifi√© les modalit√©s de paiement et demand√© des d√©tails importants.`
                        },
                        options: [
                            { text: `√Ä l'arriv√©e.`, type: 'mauvaise' },
                            { text: `Je paye comment ?`, type: 'mauvaise' },
                            { text: `Je pr√©f√©rerais r√©gler √† l'arriv√©e. C'est possible ?`, type: 'acceptable' },
                            { text: `Je souhaiterais r√©gler √† l'arriv√©e si c'est possible. Une empreinte de carte bancaire est-elle n√©cessaire pour garantir la r√©servation ? Et quels moyens de paiement acceptez-vous ?`, type: 'ideale' },
                            { text: `Le paiement √† l'arriv√©e me conviendrait mieux. Dois-je fournir une garantie par carte de cr√©dit d'ici l√† ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Parfait, votre r√©servation est maintenant modifi√©e pour les 22 et 23 mars avec le petit-d√©jeuner inclus. Puis-je faire autre chose pour vous ?`,
                        responses: {
                            mauvaise: `Non, c'est bon.`,
                            acceptable: `Non, c'est parfait. Merci pour votre aide. √Ä bient√¥t.`,
                            ideale: `Non, je crois avoir toutes les informations. Je vous remercie beaucoup pour votre flexibilit√© et votre professionnalisme, Philippe. J'ai donc bien not√© : chambre Sup√©rieure les 22 et 23 mars avec petit-d√©jeuner inclus. Je me r√©jouis de s√©journer chez vous. Bonne soir√©e !`
                        },
                        feedback: {
                            mauvaise: `Conclusion trop br√®ve. Remerciez et r√©capitulez les modifications.`,
                            acceptable: `Bonne conclusion. Un r√©capitulatif des modifications montrerait votre attention aux d√©tails.`,
                            ideale: `Parfait ! Conclusion professionnelle avec r√©capitulatif et remerciements appropri√©s.`
                        },
                        options: [
                            { text: `Non merci, au revoir.`, type: 'mauvaise' },
                            { text: `C'est tout, merci.`, type: 'mauvaise' },
                            { text: `Non, tout est en ordre. Merci beaucoup pour votre aide. Bonne soir√©e.`, type: 'acceptable' },
                            { text: `Non, vous avez r√©pondu √† toutes mes questions. Je r√©capitule : chambre Sup√©rieure pour les nuits du 22 et 23 mars, petit-d√©jeuner inclus, pr√©f√©rence pour un √©tage √©lev√©. Je vous remercie pour votre excellent service, Philippe. Passez une agr√©able soir√©e !`, type: 'ideale' },
                            { text: `Merci infiniment pour votre efficacit√©. C'est not√© pour les 22 et 23 mars avec le petit-d√©jeuner. Je vous dis donc √† bient√¥t et bonne continuation !`, type: 'acceptable' }
                        ]
                    }
                ]
            },

            // SCENARIO 4: S'inscrire √† un cours
            {
                id: 4,
                icon: 'üéæ',
                title: "S'inscrire √† un cours",
                context: `Vous souhaitez reprendre une activit√© sportive et vous avez entendu parler des cours de tennis propos√©s par le Centre sportif du Parc. Vous t√©l√©phonez pour obtenir des informations sur les cours pour adultes d√©butants et les modalit√©s d'inscription.`,
                objective: `<strong>Votre objectif :</strong> Obtenir des informations sur les cours disponibles (horaires, tarifs, niveaux) et comprendre la proc√©dure d'inscription.`,
                rounds: [
                    {
                        interviewerText: `Centre sportif du Parc, bonjour. √âmilie √† l'accueil, comment puis-je vous aider ?`,
                        responses: {
                            mauvaise: `Vous donnez des cours de quoi ?`,
                            acceptable: `Oui, nous proposons des cours de tennis pour tous les niveaux. Vous √™tes plut√¥t d√©butant, interm√©diaire ou avanc√© ?`,
                            ideale: `Bonjour ! Oui, nous avons plusieurs formules pour les adultes d√©butants. Nous proposons des cours collectifs et des le√ßons particuli√®res. Qu'est-ce qui vous int√©resserait davantage ?`
                        },
                        feedback: {
                            mauvaise: `Votre demande est trop vague. Pr√©cisez l'activit√© et votre niveau pour obtenir des informations pertinentes.`,
                            acceptable: `Bonne introduction. Vous pourriez pr√©ciser votre niveau et le type de cours souhait√©.`,
                            ideale: `Excellent ! Demande claire et pr√©cise qui permet √† l'interlocuteur de vous orienter efficacement.`
                        },
                        options: [
                            { text: `Vous avez des cours de sport ?`, type: 'mauvaise' },
                            { text: `C'est pour des cours de tennis.`, type: 'mauvaise' },
                            { text: `Bonjour, j'aimerais me renseigner sur vos cours de tennis pour adultes.`, type: 'acceptable' },
                            { text: `Bonjour √âmilie. Je souhaiterais me renseigner sur vos cours de tennis pour adultes d√©butants. Pourriez-vous me pr√©senter les diff√©rentes formules que vous proposez ?`, type: 'ideale' },
                            { text: `Bonjour. Je suis int√©ress√© par les cours de tennis. Je suis d√©butant et j'aimerais conna√Ætre les options disponibles pour les adultes.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Pour les cours collectifs d√©butants, nous avons des cr√©neaux le mardi soir de 19h √† 20h30 et le samedi matin de 10h √† 11h30. Les groupes sont limit√©s √† six personnes.`,
                        responses: {
                            mauvaise: `C'est quand d√©j√† ?`,
                            acceptable: `Une session comprend dix cours. Nous fonctionnons par trimestres, le prochain commence d√©but janvier.`,
                            ideale: `Les cours sont organis√©s en sessions de dix semaines. La prochaine session d√©bute le 8 janvier et se termine le 15 mars. Vous pouvez vous inscrire d√®s maintenant, et nous avons encore des places disponibles sur les deux cr√©neaux.`
                        },
                        feedback: {
                            mauvaise: `La question ¬´ √ßa dure combien de temps ? ¬ª est ambigu√´ ‚Äî chaque cours ou la session enti√®re ? Soyez plus pr√©cis.`,
                            acceptable: `Bonne question sur la dur√©e. Vous pourriez pr√©ciser si vous parlez de la dur√©e d'un cours ou de la session compl√®te.`,
                            ideale: `Parfait ! Question compl√®te qui couvre √† la fois le format des cours et l'organisation de la session.`
                        },
                        options: [
                            { text: `√áa dure combien de temps ?`, type: 'mauvaise' },
                            { text: `Les cours, c'est comment ?`, type: 'mauvaise' },
                            { text: `Combien y a-t-il de cours dans une session et quand commence la prochaine ?`, type: 'acceptable' },
                            { text: `Pourriez-vous me pr√©ciser le nombre de cours par session, les dates de d√©but et de fin, ainsi que les places encore disponibles pour la prochaine session ?`, type: 'ideale' },
                            { text: `Comment s'organisent les sessions ? J'aimerais conna√Ætre le nombre de s√©ances, les dates de la prochaine session et s'il reste des places.`, type: 'ideale' }
                        ]
                    },
                    {
                        interviewerText: `La session de dix cours collectifs est √† 180 $. Ce tarif comprend l'acc√®s aux courts et le pr√™t de raquettes pour les d√©butants. Vous pouvez aussi opter pour des cours particuliers √† 45 $ la s√©ance.`,
                        responses: {
                            mauvaise: `C'est cher. Y a pas de r√©duction ?`,
                            acceptable: `Nous avons un tarif r√©duit de 150 $ pour les √©tudiants et les personnes de 65 ans et plus. Nous proposons aussi un paiement en trois fois sans frais.`,
                            ideale: `Nous proposons effectivement des r√©ductions : 150 $ pour les √©tudiants et les a√Æn√©s, et un tarif famille de 320 $ pour deux personnes du m√™me foyer. Le paiement peut √™tre √©chelonn√© en trois fois sans frais. Pour les nouveaux membres, le premier cours est offert si vous souhaitez essayer avant de vous engager.`
                        },
                        feedback: {
                            mauvaise: `√âvitez les commentaires n√©gatifs sur le prix. Demandez plut√¥t les r√©ductions ou facilit√©s de paiement possibles.`,
                            acceptable: `Bonne question sur les r√©ductions. Vous pourriez √©galement demander les facilit√©s de paiement.`,
                            ideale: `Excellent ! Vous avez demand√© √† la fois les r√©ductions et les facilit√©s de paiement de mani√®re professionnelle.`
                        },
                        options: [
                            { text: `C'est trop cher pour moi.`, type: 'mauvaise' },
                            { text: `Combien √ßa co√ªte exactement ?`, type: 'mauvaise' },
                            { text: `Y a-t-il des tarifs r√©duits ou des possibilit√©s de paiement en plusieurs fois ?`, type: 'acceptable' },
                            { text: `Proposez-vous des tarifs r√©duits pour certaines cat√©gories, comme les √©tudiants ou les familles ? Et serait-il possible d'√©chelonner le paiement ?`, type: 'ideale' },
                            { text: `J'aimerais conna√Ætre les √©ventuelles r√©ductions disponibles et savoir s'il est possible de r√©gler en plusieurs versements.`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Pour l'√©quipement, nous fournissons les balles et pouvons vous pr√™ter une raquette pendant les premiers cours. Nous recommandons d'apporter des chaussures de sport propres pour les courts int√©rieurs.`,
                        responses: {
                            mauvaise: `OK et c'est o√π le centre ?`,
                            acceptable: `Des v√™tements de sport confortables suffisent. Pour les chaussures, √©vitez les semelles noires qui marquent les courts. Nous avons une boutique sur place si vous souhaitez acheter du mat√©riel.`,
                            ideale: `Une tenue de sport confortable est parfaite. Pour les chaussures, nous recommandons des chaussures de tennis √† semelles claires, obligatoires sur nos courts int√©rieurs. Si vous n'en avez pas encore, notre boutique propose des mod√®les √† partir de 60 $. Apr√®s quelques cours, votre professeur pourra vous conseiller sur le choix d'une raquette adapt√©e √† votre style de jeu.`
                        },
                        feedback: {
                            mauvaise: `Question trop basique. Demandez des d√©tails sur les exigences vestimentaires et l'√©quipement n√©cessaire.`,
                            acceptable: `Bonne question sur la tenue. Vous pourriez demander des recommandations pr√©cises pour les chaussures ou le mat√©riel.`,
                            ideale: `Parfait ! Question pratique et compl√®te qui montre votre pr√©paration s√©rieuse.`
                        },
                        options: [
                            { text: `Je mets quoi comme habits ?`, type: 'mauvaise' },
                            { text: `Il faut acheter une raquette ?`, type: 'mauvaise' },
                            { text: `Quelle tenue recommandez-vous pour les cours ?`, type: 'acceptable' },
                            { text: `Pourriez-vous me pr√©ciser les exigences vestimentaires, notamment pour les chaussures ? Y a-t-il des recommandations particuli√®res pour un d√©butant concernant le choix d'une raquette ?`, type: 'ideale' },
                            { text: `Quelles sont vos recommandations pour la tenue et les chaussures ? Faut-il pr√©voir d'acheter une raquette tout de suite ou peut-on attendre ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Pour vous inscrire, vous pouvez le faire directement sur notre site internet ou passer √† l'accueil du centre. Nous avons besoin d'une pi√®ce d'identit√© et du paiement pour finaliser l'inscription.`,
                        responses: {
                            mauvaise: `D'accord, je vais voir.`,
                            acceptable: `L'inscription en ligne prend environ cinq minutes. Vous recevrez une confirmation par courriel avec tous les d√©tails pratiques.`,
                            ideale: `L'inscription en ligne est simple : cr√©ez un compte, s√©lectionnez le cr√©neau souhait√© et proc√©dez au paiement. Vous recevrez imm√©diatement un courriel de confirmation avec le lieu exact, le nom de votre professeur et la liste du mat√©riel recommand√©. Si vous pr√©f√©rez vous inscrire sur place, nos horaires d'accueil sont du lundi au samedi de 9h √† 20h.`
                        },
                        feedback: {
                            mauvaise: `R√©ponse vague. Posez des questions sur les √©tapes de l'inscription en ligne ou les documents requis.`,
                            acceptable: `Bonne question de suivi. Vous pourriez demander les horaires d'accueil ou ce qui est inclus dans la confirmation.`,
                            ideale: `Excellent ! Vous avez demand√© les d√©tails pratiques pour faciliter votre inscription.`
                        },
                        options: [
                            { text: `OK, je regarde sur internet.`, type: 'mauvaise' },
                            { text: `C'est quoi le site ?`, type: 'mauvaise' },
                            { text: `L'inscription en ligne est-elle rapide ? Que faut-il pr√©voir comme documents ?`, type: 'acceptable' },
                            { text: `Je pr√©f√©rerais m'inscrire en ligne. Pourriez-vous me confirmer l'adresse du site et me pr√©ciser les informations n√©cessaires pour finaliser l'inscription ? Re√ßoit-on une confirmation par courriel ?`, type: 'ideale' },
                            { text: `Je vais opter pour l'inscription en ligne. Quelles sont les √©tapes et quand recevrai-je la confirmation de mon inscription ?`, type: 'acceptable' }
                        ]
                    },
                    {
                        interviewerText: `Notre site est centresportifduparc.ca. Il vous reste des questions ou puis-je vous aider avec autre chose ?`,
                        responses: {
                            mauvaise: `Non c'est bon.`, 
                            acceptable: `Non, je crois avoir toutes les informations. Merci beaucoup pour votre aide. Au revoir.`,
                            ideale: `Non, je pense avoir toutes les informations n√©cessaires. Je r√©capitule : session de dix cours d√©butants √† 180 $, cr√©neau du samedi matin, prochaine session le 8 janvier. Je vais m'inscrire en ligne d√®s aujourd'hui. Je vous remercie sinc√®rement pour votre patience et ces explications d√©taill√©es, √âmilie. Bonne journ√©e !`
                        },
                        feedback: {
                            mauvaise: `Conclusion trop br√®ve. Remerciez votre interlocuteur et r√©capitulez ce que vous avez retenu.`,
                            acceptable: `Bonne conclusion avec remerciement. Un r√©capitulatif montrerait votre attention aux d√©tails.`,
                            ideale: `Parfait ! Conclusion exemplaire avec r√©capitulatif complet et remerciements personnalis√©s.`
                        },
                        options: [
                            { text: `OK merci, salut.`, type: 'mauvaise' },
                            { text: `Non, √ßa va. Au revoir.`, type: 'mauvaise' },
                            { text: `Non, c'est parfait. Merci pour toutes ces informations. Je vais m'inscrire rapidement. Bonne journ√©e !`, type: 'acceptable' },
                            { text: `Non, vous avez r√©pondu √† toutes mes questions. Donc session de dix cours le samedi matin √† partir du 8 janvier, pour 180 $. Je m'inscris sur centresportifduparc.ca. Merci infiniment pour votre accueil chaleureux et vos explications, √âmilie. Je me r√©jouis de commencer ! Excellente journ√©e !`, type: 'ideale' },
                            { text: `Merci beaucoup √âmilie, c'est tr√®s clair. Je vais m'inscrire pour le cr√©neau du samedi. J'ai h√¢te de commencer les cours ! Bonne continuation !`, type: 'acceptable' }
                        ]
                    }
                ]
            }
        ];

        // =====================================================
        // STATE MANAGEMENT
        // =====================================================
        let currentScenario = null;
        let currentRound = 0;
        let selectedOption = null;
        let scores = { ideale: 0, acceptable: 0, mauvaise: 0 };
        let hasPlayedAudio = false;

        // =====================================================
        // TEACHER PANEL
        // =====================================================
        function toggleTeacherPanel() {
            document.getElementById('teacherPanel').classList.toggle('open');
        }

        async function activateVoice() {
            const key = document.getElementById('apiKeyInput').value.trim();
            if (!key) {
                alert('Veuillez entrer votre cl√© API ElevenLabs.');
                return;
            }

            // Show what we're testing
            console.log('Testing API key (first 10 chars):', key.substring(0, 10) + '...');
            console.log('Key length:', key.length);

            // Test the API key
            try {
                const response = await fetch('https://api.elevenlabs.io/v1/user', {
                    headers: { 'xi-api-key': key }
                });

                console.log('Response status:', response.status);
                const data = await response.json();
                console.log('Response data:', data);

                if (response.ok) {
                    apiKey = key;
                    voiceEnabled = true;
                    sessionStorage.setItem('elevenlabs_key', key);
                    document.getElementById('voiceStatus').innerHTML = '<span>üîä</span><span>Voix activ√©e</span>';
                    document.getElementById('voiceStatus').className = 'voice-status active';
                    alert('‚úÖ Voix activ√©e avec succ√®s !');
                } else {
                    alert('Cl√© API invalide.\n\nStatus: ' + response.status + '\nD√©tail: ' + JSON.stringify(data));
                }
            } catch (error) {
                console.log('Error:', error);
                alert('Erreur de connexion:\n' + error.message + '\n\n√ätes-vous sur localhost ou GitHub Pages? Les fichiers locaux (file://) ne fonctionnent pas.');
            }
        }

        // Check for saved API key on load
        window.addEventListener('load', () => {
            const savedKey = sessionStorage.getItem('elevenlabs_key');
            if (savedKey) {
                document.getElementById('apiKeyInput').value = savedKey;
                apiKey = savedKey;
                voiceEnabled = true;
                document.getElementById('voiceStatus').innerHTML = '<span>üîä</span><span>Voix activ√©e</span>';
                document.getElementById('voiceStatus').className = 'voice-status active';
            }
        });

        // =====================================================
        // NAVIGATION
        // =====================================================
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function selectScenario(index) {
            currentScenario = scenarios[index];
            currentRound = 0;
            selectedOption = null;
            scores = { ideale: 0, acceptable: 0, mauvaise: 0 };

            // Populate context screen
            document.getElementById('contextIcon').textContent = currentScenario.icon;
            document.getElementById('contextTitle').textContent = currentScenario.title;
            document.getElementById('contextText').textContent = currentScenario.context;
            document.getElementById('contextObjective').innerHTML = currentScenario.objective;

            showScreen('contextScreen');
        }

        function startDialogue() {
            showScreen('dialogueScreen');
            loadRound();
        }

        function backToScenarios() {
            showScreen('scenarioScreen');
        }

        function restartScenario() {
            currentRound = 0;
            selectedOption = null;
            scores = { ideale: 0, acceptable: 0, mauvaise: 0 };
            showScreen('dialogueScreen');
            loadRound();
        }

        // =====================================================
        // DIALOGUE LOGIC
        // =====================================================
        function loadRound() {
            const round = currentScenario.rounds[currentRound];
            hasPlayedAudio = false;

            // Update progress bar
            updateProgressBar();

            // Set interviewer text
            document.getElementById('interviewerText').textContent = `¬´ ${round.interviewerText} ¬ª`;

            // Reset audio controls
            document.getElementById('playBtn').style.display = 'flex';
            document.getElementById('replayBtn').style.display = 'none';
            document.getElementById('playIcon').textContent = 'üîä';
            document.getElementById('playText').textContent = '√âcouter';

            // Shuffle and load options
            const shuffledOptions = [...round.options].sort(() => Math.random() - 0.5);
            const optionsContainer = document.getElementById('questionOptions');
            optionsContainer.innerHTML = '';

            shuffledOptions.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'question-option';
                optionDiv.innerHTML = `
                    <input type="radio" name="question" id="q${index}" value="${index}">
                    <div class="question-radio"></div>
                    <label class="question-text" for="q${index}">¬´ ${option.text} ¬ª</label>
                `;
                optionDiv.dataset.type = option.type;
                optionDiv.dataset.text = option.text;
                optionDiv.onclick = () => selectQuestion(optionDiv, index);
                optionsContainer.appendChild(optionDiv);
            });

            // Reset UI
            selectedOption = null;
            document.getElementById('validateBtn').disabled = true;
            document.getElementById('feedbackBox').classList.remove('show', 'mauvaise', 'acceptable', 'ideale');

            // Auto-play audio if voice is enabled
            if (voiceEnabled) {
                setTimeout(() => playAudio(), 500);
            }
        }

        function updateProgressBar() {
            const totalRounds = currentScenario.rounds.length;
            const progressContainer = document.getElementById('progressSteps');
            progressContainer.innerHTML = '';

            for (let i = 0; i < totalRounds; i++) {
                const step = document.createElement('div');
                step.className = 'progress-step';
                if (i < currentRound) step.classList.add('completed');
                if (i === currentRound) step.classList.add('current');
                progressContainer.appendChild(step);
            }

            document.getElementById('progressText').textContent = `${currentRound + 1}/${totalRounds}`;
        }

        function selectQuestion(element, index) {
            document.querySelectorAll('.question-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedOption = {
                type: element.dataset.type,
                text: element.dataset.text
            };
            document.getElementById('validateBtn').disabled = false;
        }

        function validateChoice() {
            if (!selectedOption) return;

            const round = currentScenario.rounds[currentRound];
            const type = selectedOption.type;

            // Record score
            scores[type]++;

            // Get response and feedback
            const response = round.responses[type];
            const feedback = round.feedback[type];

            // Show feedback
            const feedbackBox = document.getElementById('feedbackBox');
            feedbackBox.className = `feedback-box show ${type}`;

            let headerIcon, headerText;
            if (type === 'mauvaise') {
                headerIcon = '‚ùå';
                headerText = 'Question inappropri√©e';
            } else if (type === 'acceptable') {
                headerIcon = '‚ö†Ô∏è';
                headerText = 'Correct, mais basique';
            } else {
                headerIcon = '‚úÖ';
                headerText = 'Excellent !';
            }

            document.getElementById('feedbackHeader').innerHTML = `<span>${headerIcon}</span><span>${headerText}</span>`;
            document.getElementById('feedbackText').innerHTML = `
                <p style="margin-bottom: 1rem;"><strong>L'interlocuteur r√©pond :</strong></p>
                <p style="font-style: italic; margin-bottom: 1rem;">¬´ ${response} ¬ª</p>
                <p>${feedback}</p>
            `;

            // Set up action buttons with proper event binding
            const actionsContainer = document.getElementById('feedbackActions');
            actionsContainer.innerHTML = '';
            
            const actionBtn = document.createElement('button');
            actionBtn.className = 'btn btn-primary';
            
            if (type === 'mauvaise') {
                actionBtn.textContent = 'Essayer encore ‚Üí';
                actionBtn.addEventListener('click', function() {
                    retryRound();
                });
            } else {
                if (currentRound < currentScenario.rounds.length - 1) {
                    actionBtn.textContent = 'Continuer ‚Üí';
                    actionBtn.addEventListener('click', function() {
                        nextRound();
                    });
                } else {
                    actionBtn.textContent = 'Voir les r√©sultats ‚Üí';
                    actionBtn.addEventListener('click', function() {
                        showResults();
                    });
                }
            }
            actionsContainer.appendChild(actionBtn);

            // Play response audio (don't let errors block UI)
            if (voiceEnabled) {
                playResponseAudio(response).catch(err => {
                    console.log('Audio error (non-blocking):', err);
                });
            }

            // Disable further selection
            document.getElementById('validateBtn').disabled = true;
            document.querySelectorAll('.question-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
                opt.style.opacity = '0.6';
            });
        }

        function retryRound() {
            // Reset options but keep on same round
            loadRound();
        }

        function nextRound() {
            currentRound++;
            loadRound();
        }

        // =====================================================
        // AUDIO
        // =====================================================
        async function playAudio() {
            if (!voiceEnabled || !apiKey) {
                alert('La voix n\'est pas activ√©e. Entrez votre cl√© API dans le panneau enseignant.');
                return;
            }

            const text = currentScenario.rounds[currentRound].interviewerText;
            await synthesizeAndPlay(text);
            hasPlayedAudio = true;
            document.getElementById('playBtn').style.display = 'none';
            document.getElementById('replayBtn').style.display = 'flex';
        }

        async function replayAudio() {
            const text = currentScenario.rounds[currentRound].interviewerText;
            await synthesizeAndPlay(text);
        }

        async function playResponseAudio(text) {
            await synthesizeAndPlay(text);
        }

        async function synthesizeAndPlay(text) {
            const playBtn = document.getElementById('playBtn');
            const replayBtn = document.getElementById('replayBtn');

            // Show loading state
            try {
                if (playBtn && playBtn.style.display !== 'none') {
                    playBtn.innerHTML = '<span class="audio-loading"></span><span>Chargement...</span>';
                } else if (replayBtn) {
                    replayBtn.innerHTML = '<span class="audio-loading"></span><span>Chargement...</span>';
                }
            } catch (e) {
                console.log('UI update error:', e);
            }

            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'xi-api-key': apiKey
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: 'eleven_multilingual_v2',
                        voice_settings: {
                            stability: 0.5,
                            similarity_boost: 0.75
                        }
                    })
                });

                if (!response.ok) {
                    console.log('Audio generation failed:', response.status);
                    throw new Error('Audio generation failed');
                }

                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);

                if (currentAudio) {
                    currentAudio.pause();
                }

                currentAudio = new Audio(audioUrl);
                currentAudio.play().catch(err => console.log('Audio play error:', err));

                currentAudio.onended = () => {
                    if (replayBtn) {
                        replayBtn.innerHTML = '<span>üîÑ</span><span>R√©√©couter</span>';
                    }
                };

            } catch (error) {
                console.error('Audio error:', error);
                // Don't alert - just log and continue
            }

            // Reset button states
            try {
                if (playBtn) playBtn.innerHTML = '<span>üîä</span><span>√âcouter</span>';
                if (replayBtn) replayBtn.innerHTML = '<span>üîÑ</span><span>R√©√©couter</span>';
            } catch (e) {
                console.log('Button reset error:', e);
            }
        }

        // =====================================================
        // RESULTS
        // =====================================================
        function showResults() {
            showScreen('resultsScreen');

            document.getElementById('resultsScenarioTitle').textContent = currentScenario.title;
            document.getElementById('idealeCount').textContent = scores.ideale;
            document.getElementById('acceptableCount').textContent = scores.acceptable;
            document.getElementById('mauvaiseCount').textContent = scores.mauvaise;

            // Calculate NCLC estimate
            const total = scores.ideale + scores.acceptable;
            const idealPercentage = scores.ideale / total;
            let nclcLevel;

            if (idealPercentage >= 0.8 && scores.mauvaise === 0) {
                nclcLevel = '8-9';
            } else if (idealPercentage >= 0.6) {
                nclcLevel = '7-8';
            } else if (idealPercentage >= 0.4) {
                nclcLevel = '6-7';
            } else {
                nclcLevel = '5-6';
            }

            document.getElementById('nclcLevel').textContent = nclcLevel;

            // Generate tips
            const tipsList = document.getElementById('tipsList');
            tipsList.innerHTML = '';

            const tips = [];
            if (scores.mauvaise > 0) {
                tips.push('√âvitez les formulations trop vagues ou informelles au d√©but de l\'√©change.');
            }
            if (scores.acceptable > scores.ideale) {
                tips.push('Pensez √† anticiper les d√©tails importants dans vos questions (dates, conditions, modalit√©s).');
            }
            if (scores.ideale >= 3) {
                tips.push('Excellent travail sur la pr√©cision et le registre formel !');
            }
            tips.push('Continuez √† pratiquer pour automatiser les formulations de niveau NCLC 8.');

            tips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                tipsList.appendChild(li);
            });
        }
    </script>
</body>
</html>
