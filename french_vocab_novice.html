<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©vision Vocabulaire - Histoires pour D√©butants</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --secondary: #f472b6;
            --accent: #fbbf24;
            --success: #10b981;
            --success-light: #34d399;
            --error: #ef4444;
            --error-light: #f87171;
            --bg-light: #faf5ff;
            --bg-card: #ffffff;
            --text-dark: #1e1b4b;
            --text-muted: #6b7280;
            --border: #e9d5ff;
            --shadow: rgba(99, 102, 241, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.7;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '‚ú®';
            position: absolute;
            font-size: 8rem;
            opacity: 0.1;
            top: -1rem;
            left: 5%;
            animation: float 6s ease-in-out infinite;
        }

        .header::after {
            content: 'üìö';
            position: absolute;
            font-size: 6rem;
            opacity: 0.1;
            bottom: -1rem;
            right: 5%;
            animation: float 6s ease-in-out infinite 3s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .header h1 {
            font-family: 'Nunito', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            position: relative;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
            position: relative;
        }

        .level-badge {
            display: inline-block;
            background: var(--accent);
            color: var(--text-dark);
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.85rem;
            margin-top: 0.75rem;
        }

        /* Progress Dashboard */
        .progress-dashboard {
            background: white;
            margin: -1.5rem 2rem 2rem;
            padding: 1.5rem 2rem;
            border-radius: 16px;
            box-shadow: 0 10px 40px var(--shadow);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            position: relative;
            z-index: 10;
            border: 2px solid var(--border);
        }

        .progress-item {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, #faf5ff 0%, #fce7f3 100%);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .progress-item .number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Fira Code', monospace;
        }

        .progress-item .label {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
            margin-top: 0.25rem;
        }

        .progress-item.save-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            justify-content: center;
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
        }

        .progress-item .btn {
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
        }

        /* Navigation */
        .nav-container {
            padding: 0 2rem;
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .story-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
        }

        .nav-btn {
            padding: 0.6rem 1rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 25px;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-color: var(--primary);
            color: white;
        }

        /* Main Container */
        .main-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 1.5rem 3rem;
        }

        /* Story Section */
        .story-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .story-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .story-header {
            background: white;
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 20px var(--shadow);
            border-left: 6px solid var(--secondary);
            border: 2px solid var(--border);
            border-left: 6px solid var(--secondary);
        }

        .story-header h2 {
            font-family: 'Nunito', sans-serif;
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .story-header .summary {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        /* Module Cards */
        .module-card {
            background: white;
            border-radius: 16px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 20px var(--shadow);
            overflow: hidden;
            border: 2px solid var(--border);
        }

        .module-header {
            padding: 1rem 1.25rem;
            background: linear-gradient(135deg, #faf5ff 0%, #fce7f3 100%);
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
        }

        .module-header:hover {
            background: linear-gradient(135deg, #f3e8ff 0%, #fbcfe8 100%);
        }

        .module-header h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .module-header .toggle-icon {
            font-size: 1rem;
            transition: transform 0.3s;
            color: var(--text-muted);
        }

        .module-header.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .module-content {
            padding: 1.25rem;
            display: none;
        }

        .module-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Vocabulary Cards */
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .vocab-card {
            background: linear-gradient(135deg, #faf5ff 0%, #fff 100%);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            transition: all 0.2s;
        }

        .vocab-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px var(--shadow);
            border-color: var(--primary-light);
        }

        .vocab-card .french {
            font-weight: 700;
            color: var(--primary-dark);
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .vocab-card .english {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .vocab-card .example {
            font-style: italic;
            color: var(--text-dark);
            font-size: 0.85rem;
            padding: 0.5rem;
            background: white;
            border-radius: 6px;
            border-left: 3px solid var(--accent);
        }

        /* Grammar Box */
        .grammar-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 2px solid #a7f3d0;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .grammar-box-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-weight: 700;
            color: #065f46;
            margin-bottom: 0.5rem;
        }

        .grammar-box-header .icon {
            background: #10b981;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .grammar-explanation {
            display: none;
            padding-top: 0.75rem;
            border-top: 2px dashed #a7f3d0;
            line-height: 1.8;
        }

        .grammar-explanation.show {
            display: block;
        }

        .grammar-rule {
            background: white;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            border-left: 4px solid var(--success);
            font-size: 0.95rem;
        }

        .grammar-example {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            background: rgba(255,255,255,0.8);
            padding: 0.75rem;
            border-radius: 8px;
            margin: 0.5rem 0;
        }

        .highlight {
            background: var(--accent);
            padding: 0.1rem 0.3rem;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Exercise Styles */
        .exercise-block {
            background: linear-gradient(135deg, #faf5ff 0%, #fff 100%);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .exercise-title {
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }

        .exercise-title .badge {
            background: var(--secondary);
            color: white;
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-weight: 600;
        }

        /* Fill in the Blank */
        .fill-blank-item {
            margin-bottom: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            border: 2px solid var(--border);
        }

        .fill-blank-item .sentence {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            line-height: 2;
        }

        .blank-input {
            display: inline-block;
            min-width: 100px;
            padding: 0.4rem 0.6rem;
            border: 2px dashed var(--border);
            border-radius: 6px;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            background: #faf5ff;
            transition: all 0.2s;
        }

        .blank-input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            border-style: solid;
        }

        .blank-input.correct {
            border-color: var(--success);
            background: #ecfdf5;
            border-style: solid;
        }

        .blank-input.incorrect {
            border-color: var(--error);
            background: #fef2f2;
            border-style: solid;
        }

        /* Word Bank */
        .word-bank-container {
            background: #f8fafc;
            border: 2px dashed var(--border);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .word-bank-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .word-chip {
            padding: 0.4rem 0.8rem;
            background: white;
            border: 2px solid var(--primary-light);
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-dark);
            transition: all 0.2s;
            user-select: none;
        }

        .word-chip:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .word-chip.used {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        /* Multiple Choice */
        .mc-options {
            display: grid;
            gap: 0.5rem;
        }

        .mc-option {
            padding: 0.75rem 1rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.95rem;
        }

        .mc-option:hover {
            border-color: var(--primary-light);
            background: #faf5ff;
            transform: translateX(5px);
        }

        .mc-option.selected {
            border-color: var(--primary);
            background: #ede9fe;
        }

        .mc-option.correct {
            border-color: var(--success);
            background: #ecfdf5;
        }

        .mc-option.incorrect {
            border-color: var(--error);
            background: #fef2f2;
        }

        .mc-option .letter {
            width: 28px;
            height: 28px;
            background: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .mc-option.selected .letter {
            background: var(--primary);
            color: white;
        }

        .mc-option.correct .letter {
            background: var(--success);
            color: white;
        }

        .mc-option.incorrect .letter {
            background: var(--error);
            color: white;
        }

        /* Matching Exercise */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .matching-column h4 {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .matching-item {
            padding: 0.6rem 0.8rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            margin-bottom: 0.4rem;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .matching-item:hover {
            border-color: var(--secondary);
            background: #fdf2f8;
        }

        .matching-item.selected {
            border-color: var(--secondary);
            background: #fdf2f8;
        }

        .matching-item.matched {
            border-color: var(--success);
            background: #ecfdf5;
            cursor: default;
        }

        /* Sentence Builder */
        .sentence-builder {
            padding: 1rem;
            background: white;
            border: 2px dashed var(--primary-light);
            border-radius: 10px;
            min-height: 50px;
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            align-items: center;
        }

        .sentence-builder .word-chip {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .sentence-builder .word-chip:hover {
            background: var(--error);
            border-color: var(--error);
        }

        /* Buttons */
        .btn {
            padding: 0.65rem 1.25rem;
            border: none;
            border-radius: 10px;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, var(--success-light) 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
        }

        .btn-group {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-top: 1.25rem;
        }

        /* Feedback */
        .feedback {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-top: 0.75rem;
            display: none;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .feedback.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        .feedback.success {
            background: #ecfdf5;
            border: 2px solid #a7f3d0;
            color: #065f46;
        }

        .feedback.error {
            background: #fef2f2;
            border: 2px solid #fecaca;
            color: #991b1b;
        }

        /* Text Response */
        .text-response {
            width: 100%;
            min-height: 80px;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.95rem;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .text-response:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Export Section */
        .export-section {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            margin-top: 2rem;
            box-shadow: 0 4px 20px var(--shadow);
            text-align: center;
            border: 2px solid var(--border);
        }

        .export-section h3 {
            font-family: 'Nunito', sans-serif;
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .export-section p {
            color: var(--text-muted);
            margin-bottom: 1.25rem;
        }

        /* Comprehension Question */
        .comprehension-question {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent);
            margin-bottom: 1rem;
        }

        .comprehension-question .question-text {
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--text-dark);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success { background: var(--success); }
        .toast.error { background: var(--error); }
        .toast.info { background: var(--primary); }

        /* Tip Box */
        .tip-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 0.75rem 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .tip-box strong {
            color: #92400e;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .progress-dashboard {
                margin: -1rem 1rem 1.5rem;
                padding: 1rem;
                grid-template-columns: repeat(2, 1fr);
            }

            .main-container {
                padding: 0 1rem 2rem;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .vocab-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>üìñ Mes Histoires en Fran√ßais</h1>
        <p>Module de Vocabulaire Interactif</p>
        <span class="level-badge">üåü Niveau Novice-High / Intermediate-Low</span>
    </header>

    <div class="progress-dashboard">
        <div class="progress-item">
            <div class="number" id="totalAnswered">0</div>
            <div class="label">Questions</div>
        </div>
        <div class="progress-item">
            <div class="number" id="correctAnswers">0</div>
            <div class="label">Correctes</div>
        </div>
        <div class="progress-item">
            <div class="number" id="accuracyRate">0%</div>
            <div class="label">R√©ussite</div>
        </div>
        <div class="progress-item">
            <div class="number" id="storiesCompleted">0/8</div>
            <div class="label">Histoires</div>
        </div>
        <div class="progress-item save-actions">
            <button class="btn btn-success" onclick="saveProgress()">üíæ Sauvegarder</button>
            <button class="btn btn-secondary" onclick="loadProgress()">üìÇ Charger</button>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <nav class="nav-container">
        <div class="story-nav">
            <button class="nav-btn active" onclick="showStory('adeline')">üèÄ Adeline</button>
            <button class="nav-btn" onclick="showStory('lillian')">üíá Lillian</button>
            <button class="nav-btn" onclick="showStory('chiens')">üõ∏ Les Chiens</button>
            <button class="nav-btn" onclick="showStory('hampton')">ü•¨ Hampton</button>
            <button class="nav-btn" onclick="showStory('rhys')">üç´ Rhys</button>
            <button class="nav-btn" onclick="showStory('marguerite')">üéæ Marguerite</button>
            <button class="nav-btn" onclick="showStory('rowan')">üçï Rowan</button>
            <button class="nav-btn" onclick="showStory('mateo')">‚öΩ Mateo</button>
        </div>
    </nav>

    <main class="main-container">
        <!-- STORY 1: Adeline -->
        <section id="story-adeline" class="story-section active">
            <div class="story-header">
                <h2>üèÄ Adeline et la machine √† voyager dans le temps</h2>
                <p class="summary">Adeline trouve une machine √† voyager dans le temps et rencontre l'inventeur du basketball!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">s'entendre bien avec</div>
                            <div class="english">to get along well with</div>
                            <div class="example">Elle s'entend bien avec ses co√©quipi√®res.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">chercher</div>
                            <div class="english">to look for / to search</div>
                            <div class="example">Elle cherche un ballon de basket.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">une machine √† voyager dans le temps</div>
                            <div class="english">a time travel machine</div>
                            <div class="example">C'√©tait une machine √† voyager dans le temps!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">toucher / activer</div>
                            <div class="english">to touch / to activate</div>
                            <div class="example">Elle a touch√© la machine. Elle a activ√© la machine.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">le pass√©</div>
                            <div class="english">the past</div>
                            <div class="example">Elle est all√©e dans le pass√©.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">les r√®gles</div>
                            <div class="english">the rules</div>
                            <div class="example">Est-ce que vous pouvez changer les r√®gles?</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">un panier (de trois points)</div>
                            <div class="english">a basket (three-pointer)</div>
                            <div class="example">Un panier de trois points donne trois points.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">accepter que</div>
                            <div class="english">to accept that</div>
                            <div class="example">Elle accepte que le basket est parfait.</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: Le Pass√© Compos√© avec AVOIR</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>Formation:</strong> AVOIR (conjugu√©) + participe pass√©<br>
                                j'ai, tu as, il/elle a, nous avons, vous avez, ils/elles ont
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                Elle <span class="highlight">a regard√©</span> la machine. (regarder ‚Üí regard√©)<br>
                                Elle <span class="highlight">a touch√©</span> la machine. (toucher ‚Üí touch√©)<br>
                                Elle <span class="highlight">a activ√©</span> la machine. (activer ‚Üí activ√©)<br>
                                James <span class="highlight">a r√©fl√©chi</span>. (r√©fl√©chir ‚Üí r√©fl√©chi)
                            </div>
                            <div class="tip-box">
                                <strong>üí° Astuce:</strong> La plupart des verbes utilisent AVOIR. Les verbes en -ER ont un participe pass√© en -√â.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>‚úèÔ∏è Exercice: Compl√©tez avec la banque de mots</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="word-bank-container">
                        <div class="word-bank-label">Banque de mots</div>
                        <div class="word-bank" id="adeline-wordbank">
                            <span class="word-chip" onclick="useWord(this, 'adeline')">cherchait</span>
                            <span class="word-chip" onclick="useWord(this, 'adeline')">s'entend</span>
                            <span class="word-chip" onclick="useWord(this, 'adeline')">a voyag√©</span>
                            <span class="word-chip" onclick="useWord(this, 'adeline')">les r√®gles</span>
                            <span class="word-chip" onclick="useWord(this, 'adeline')">accepte</span>
                        </div>
                    </div>

                    <div class="fill-blank-item" data-answer="s'entend">
                        <div class="sentence">1. Adeline <input type="text" class="blank-input" placeholder="..."> bien avec toutes ses co√©quipi√®res.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="cherchait">
                        <div class="sentence">2. Elle <input type="text" class="blank-input" placeholder="..."> un ballon de basket dans la salle de sciences.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="a voyag√©">
                        <div class="sentence">3. BOOM! Adeline <input type="text" class="blank-input" placeholder="..."> dans le temps.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="les r√®gles">
                        <div class="sentence">4. Elle demande √† James de changer <input type="text" class="blank-input" placeholder="..."> du basket.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="accepte">
                        <div class="sentence">5. Maintenant, elle <input type="text" class="blank-input" placeholder="..."> que le basket est parfait.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkFillBlanks('story-adeline')">‚úì V√©rifier</button>
                        <button class="btn btn-secondary" onclick="showAnswers('story-adeline')">üëÅ Voir les r√©ponses</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">O√π est-ce qu'Adeline trouve la machine?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Dans le gymnase</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Dans le placard de son prof de sciences</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Dans sa chambre</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Qui est James Naismith?</p>
                        <div class="mc-options" data-correct="1">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>L'inventeur du basketball</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Le professeur de sciences</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Un joueur c√©l√®bre</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 3</div>
                        <p style="margin-bottom: 0.75rem;">Pourquoi est-ce que James dit "non" √† Adeline?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Il ne comprend pas le fran√ßais</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Il n'aime pas Adeline</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Un panier de quinze points, c'est ridicule</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 2: Lillian -->
        <section id="story-lillian" class="story-section">
            <div class="story-header">
                <h2>üíá La Perruque magique de Lillian</h2>
                <p class="summary">Lillian trouve une perruque magique qui l'aide √† trouver le steak parfait!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">un grenier</div>
                            <div class="english">an attic</div>
                            <div class="example">Lillian monte au grenier.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">une perruque</div>
                            <div class="english">a wig</div>
                            <div class="example">Elle met la perruque sur sa t√™te.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">sentir</div>
                            <div class="english">to smell / to feel</div>
                            <div class="example">Elle sent l'odeur d'un steak!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">suivre</div>
                            <div class="english">to follow</div>
                            <div class="example">Elle suit l'odeur du steak.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">avoir peur</div>
                            <div class="english">to be afraid</div>
                            <div class="example">Lillian a peur! Tr√®s peur!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">lancer</div>
                            <div class="english">to throw</div>
                            <div class="example">Elle lance le biscuit loin.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">s'endormir</div>
                            <div class="english">to fall asleep</div>
                            <div class="example">Le chien s'endort.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">mi-saignant</div>
                            <div class="english">medium-rare</div>
                            <div class="example">Le steak est exactement mi-saignant!</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: Les Questions avec QU'EST-CE QUE</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>Qu'est-ce que...?</strong> = What...? (pour les choses)<br>
                                <strong>Qu'est-ce qu'il y a?</strong> = What is there?
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                <span class="highlight">Qu'est-ce qu'</span>elle voit? ‚Üí Elle voit une bo√Æte!<br>
                                <span class="highlight">Qu'est-ce qu'</span>il y a dans la bo√Æte? ‚Üí Il y a une perruque!<br>
                                <span class="highlight">Qu'est-ce qui</span> bouge? ‚Üí Quelque chose bouge!
                            </div>
                            <div class="tip-box">
                                <strong>üí° Astuce:</strong> "Qu'est-ce que" + sujet + verbe. "Qu'est-ce qui" quand la chose EST le sujet.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üîó Exercice: Associez les mots</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <p style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">Cliquez sur un mot fran√ßais, puis sur sa traduction.</p>
                    
                    <div class="matching-container" id="lillian-matching">
                        <div class="matching-column">
                            <h4>Fran√ßais</h4>
                            <div class="matching-item" data-match="1" onclick="selectMatching(this, 'fr')">un grenier</div>
                            <div class="matching-item" data-match="2" onclick="selectMatching(this, 'fr')">sentir</div>
                            <div class="matching-item" data-match="3" onclick="selectMatching(this, 'fr')">avoir peur</div>
                            <div class="matching-item" data-match="4" onclick="selectMatching(this, 'fr')">s'endormir</div>
                            <div class="matching-item" data-match="5" onclick="selectMatching(this, 'fr')">lancer</div>
                        </div>
                        <div class="matching-column">
                            <h4>English</h4>
                            <div class="matching-item" data-match="4" onclick="selectMatching(this, 'en')">to fall asleep</div>
                            <div class="matching-item" data-match="1" onclick="selectMatching(this, 'en')">an attic</div>
                            <div class="matching-item" data-match="3" onclick="selectMatching(this, 'en')">to be afraid</div>
                            <div class="matching-item" data-match="5" onclick="selectMatching(this, 'en')">to throw</div>
                            <div class="matching-item" data-match="2" onclick="selectMatching(this, 'en')">to smell</div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="resetMatching('lillian-matching')">üîÑ Recommencer</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">De quelle couleur est la perruque?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Rose</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Turquoise</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Rouge</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Combien de t√™tes a le chien?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Une t√™te</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Deux t√™tes</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Trois t√™tes</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 3</div>
                        <p style="margin-bottom: 0.75rem;">Comment est-ce que Lillian calme le chien?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Elle lui donne un biscuit</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Elle chante une chanson douce</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Elle court tr√®s vite</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 3: Les Chiens et les extraterrestres -->
        <section id="story-chiens" class="story-section">
            <div class="story-header">
                <h2>üõ∏ Les Chiens et les extraterrestres</h2>
                <p class="summary">Les chiens de Juanita montent dans un vaisseau spatial avec des extraterrestres qui adorent les arepas!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">partir (ils sont partis)</div>
                            <div class="english">to leave (they left)</div>
                            <div class="example">Ses deux Yorkshire Terriers sont partis.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">un vaisseau spatial</div>
                            <div class="english">a spaceship</div>
                            <div class="example">Elle a vu un vaisseau spatial violet et vert!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">monter (ils sont mont√©s)</div>
                            <div class="english">to go up / to get on (they got on)</div>
                            <div class="example">Les chiens sont mont√©s dans le vaisseau.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">descendre (ils sont descendus)</div>
                            <div class="english">to go down / to get off</div>
                            <div class="example">Les extraterrestres sont descendus du vaisseau.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">rester (ils sont rest√©s)</div>
                            <div class="english">to stay (they stayed)</div>
                            <div class="example">Les chiens sont rest√©s calmes.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">revenir (ils sont revenus)</div>
                            <div class="english">to come back (they came back)</div>
                            <div class="example">Ils sont revenus chaque semaine.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">devenir (ils sont devenus)</div>
                            <div class="english">to become (they became)</div>
                            <div class="example">Tu es devenue notre amie!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">rentrer / retourner</div>
                            <div class="english">to return home / to go back</div>
                            <div class="example">Ils sont retourn√©s √† leur plan√®te.</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: Le Pass√© Compos√© avec √äTRE (DR. & MRS. VANDERTRAMP)</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>Certains verbes utilisent √äTRE au pass√© compos√©!</strong><br>
                                Le participe pass√© s'accorde avec le sujet (comme un adjectif).
                            </div>
                            <p><strong>Les verbes √äTRE (DR. & MRS. VANDERTRAMP):</strong></p>
                            <div class="grammar-example">
                                <strong>D</strong>evenir ‚Üí devenu(e)(s)<br>
                                <strong>R</strong>evenir ‚Üí revenu(e)(s)<br>
                                <strong>M</strong>onter ‚Üí mont√©(e)(s)<br>
                                <strong>R</strong>ester ‚Üí rest√©(e)(s)<br>
                                <strong>S</strong>ortir ‚Üí sorti(e)(s)<br>
                                <strong>V</strong>enir ‚Üí venu(e)(s)<br>
                                <strong>A</strong>ller ‚Üí all√©(e)(s)<br>
                                <strong>N</strong>a√Ætre ‚Üí n√©(e)(s)<br>
                                <strong>D</strong>escendre ‚Üí descendu(e)(s)<br>
                                <strong>E</strong>ntrer ‚Üí entr√©(e)(s)<br>
                                <strong>R</strong>entrer ‚Üí rentr√©(e)(s)<br>
                                <strong>T</strong>omber ‚Üí tomb√©(e)(s)<br>
                                <strong>R</strong>etourner ‚Üí retourn√©(e)(s)<br>
                                <strong>A</strong>rriver ‚Üí arriv√©(e)(s)<br>
                                <strong>M</strong>ourir ‚Üí mort(e)(s)<br>
                                <strong>P</strong>artir ‚Üí parti(e)(s)
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                Les chiens <span class="highlight">sont partis</span>. (masculin pluriel)<br>
                                Elle <span class="highlight">est sortie</span> dans le jardin. (f√©minin singulier)<br>
                                Ils <span class="highlight">sont mont√©s</span> dans le vaisseau. (masculin pluriel)<br>
                                Tu <span class="highlight">es devenue</span> notre amie! (f√©minin singulier)
                            </div>
                            <div class="tip-box">
                                <strong>üí° Accord:</strong> Ajoute -e pour f√©minin, -s pour pluriel, -es pour f√©minin pluriel!
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>‚úèÔ∏è Exercice: Pass√© Compos√© avec √äTRE</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <p style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">Compl√©tez avec le pass√© compos√©. Attention √† l'accord!</p>

                    <div class="fill-blank-item" data-answer="sont all√©s">
                        <div class="sentence">1. Les chiens (aller) <input type="text" class="blank-input" placeholder="..."> dans le jardin.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="est sortie">
                        <div class="sentence">2. Juanita (sortir) <input type="text" class="blank-input" placeholder="..."> rapidement. (Juanita = fille)</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="sont mont√©s">
                        <div class="sentence">3. Les deux chiens (monter) <input type="text" class="blank-input" placeholder="..."> dans le vaisseau.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="sont descendus">
                        <div class="sentence">4. Les extraterrestres (descendre) <input type="text" class="blank-input" placeholder="..."> du vaisseau.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="sont rest√©s">
                        <div class="sentence">5. Manolo et Rosita (rester) <input type="text" class="blank-input" placeholder="..."> calmes.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="est devenue">
                        <div class="sentence">6. Juanita (devenir) <input type="text" class="blank-input" placeholder="..."> leur amie.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkFillBlanks('story-chiens')">‚úì V√©rifier</button>
                        <button class="btn btn-secondary" onclick="showAnswers('story-chiens')">üëÅ Voir les r√©ponses</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">Pourquoi est-ce que les extraterrestres sont venus sur Terre?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Pour voir les chiens</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Pour apprendre le fran√ßais</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Pour chercher des arepas</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Combien de langues parlent les extraterrestres?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Une langue</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Trois langues (fran√ßais, espagnol, anglais)</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Cinq langues</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 4: Hampton -->
        <section id="story-hampton" class="story-section">
            <div class="story-header">
                <h2>ü•¨ Hampton et les asperges g√©antes</h2>
                <p class="summary">Hampton d√©teste les asperges, mais il doit combattre des asperges g√©antes au festival de musique!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">les l√©gumes</div>
                            <div class="english">vegetables</div>
                            <div class="example">Hampton aime les l√©gumes.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">les asperges</div>
                            <div class="english">asparagus</div>
                            <div class="example">Il n'aime pas les asperges!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">attaquer</div>
                            <div class="english">to attack</div>
                            <div class="example">L'asperge g√©ante attaque Hampton!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">courir</div>
                            <div class="english">to run</div>
                            <div class="example">Hampton court! Tout le monde court!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">jeter</div>
                            <div class="english">to throw</div>
                            <div class="example">Hampton jette une carotte sur l'asperge.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">tomber</div>
                            <div class="english">to fall</div>
                            <div class="example">BOOM! L'asperge tombe!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">gagner</div>
                            <div class="english">to win</div>
                            <div class="example">Nous gagnons! Les l√©gumes sont victorieux!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">un h√©ros</div>
                            <div class="english">a hero</div>
                            <div class="example">Hampton est un h√©ros!</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: La N√©gation (NE...PAS)</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>Structure:</strong> Sujet + <span class="highlight">NE</span> + verbe + <span class="highlight">PAS</span><br>
                                Le NE devient N' devant une voyelle.
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                Il <span class="highlight">n'</span>aime <span class="highlight">pas</span> les asperges!<br>
                                Ce <span class="highlight">n'</span>est <span class="highlight">pas</span> un chien normal.<br>
                                Je <span class="highlight">n'</span>aime TOUJOURS <span class="highlight">pas</span> les asperges!
                            </div>
                            <div class="tip-box">
                                <strong>üí° Astuce:</strong> NE...PAS entourent le verbe comme un sandwich! ü•™
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>‚úèÔ∏è Exercice: Transformez √† la n√©gation</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <p style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">√âcrivez la phrase √† la forme n√©gative.</p>

                    <div class="fill-blank-item" data-answer="n'aime pas">
                        <div class="sentence">1. Hampton aime les asperges. ‚Üí Hampton <input type="text" class="blank-input" style="min-width: 140px;" placeholder="ne...pas..."> les asperges.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="n'est pas">
                        <div class="sentence">2. C'est un chien normal. ‚Üí Ce <input type="text" class="blank-input" style="min-width: 140px;" placeholder="ne...pas..."> un chien normal.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="ne bouge pas">
                        <div class="sentence">3. Le chien bouge. ‚Üí Le chien <input type="text" class="blank-input" style="min-width: 140px;" placeholder="ne...pas...">.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkFillBlanks('story-hampton')">‚úì V√©rifier</button>
                        <button class="btn btn-secondary" onclick="showAnswers('story-hampton')">üëÅ Voir les r√©ponses</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">Qu'est-ce que c'est, le L√©gumefest?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Un restaurant</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Un festival de musique country</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Un supermarch√©</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Comment est-ce que Hampton et les personnes battent les asperges?</p>
                        <div class="mc-options" data-correct="1">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Ils jettent d'autres l√©gumes sur les asperges</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Ils chantent une chanson</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Ils courent tr√®s vite</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 5: Rhys -->
        <section id="story-rhys" class="story-section">
            <div class="story-header">
                <h2>üç´ Le D√©sastre au chocolat de Rhys</h2>
                <p class="summary">Rhys fait un moelleux au chocolat, mais il met trop de chocolat... catastrophe!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">cuisiner / faire un g√¢teau</div>
                            <div class="english">to cook / to make a cake</div>
                            <div class="example">Rhys adore cuisiner.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">les ingr√©dients</div>
                            <div class="english">ingredients</div>
                            <div class="example">Rhys prend les ingr√©dients.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">le four</div>
                            <div class="english">the oven</div>
                            <div class="example">Rhys ouvre le four. Oh non!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">couler</div>
                            <div class="english">to flow / to run (liquid)</div>
                            <div class="example">Le chocolat coule sur le sol!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">nettoyer</div>
                            <div class="english">to clean</div>
                            <div class="example">Nous devons nettoyer MAINTENANT!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">essuyer</div>
                            <div class="english">to wipe</div>
                            <div class="example">Wyatt, essuie sous la table!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">propre</div>
                            <div class="english">clean</div>
                            <div class="example">La cuisine est propre!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">go√ªter</div>
                            <div class="english">to taste</div>
                            <div class="example">Tout le monde go√ªte. C'est d√©licieux!</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: L'Imp√©ratif (donner des ordres)</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>L'imp√©ratif:</strong> Pour donner des ordres ou des instructions.<br>
                                Pas de sujet! Conjuguez comme tu, nous, ou vous.
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                <span class="highlight">Nettoie</span> le sol! (tu)<br>
                                <span class="highlight">Essuie</span> sous la table! (tu)<br>
                                Nous <span class="highlight">devons</span> nettoyer MAINTENANT!
                            </div>
                            <div class="tip-box">
                                <strong>üí° Pour les verbes en -ER (tu):</strong> Enl√®ve le -s! ‚Üí Tu nettoies ‚Üí Nettoie!
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">Combien de fr√®res et s≈ìurs a Rhys?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Un fr√®re</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Deux fr√®res</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Deux fr√®res et une s≈ìur</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Pourquoi est-ce qu'il y a une catastrophe?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Le four est cass√©</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Rhys met trop de chocolat au centre</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Wyatt mange tout le chocolat</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 3</div>
                        <p style="margin-bottom: 0.75rem;">Qui organise le nettoyage?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Rhys</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Griffin</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Isla (la grande s≈ìur)</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 6: Marguerite -->
        <section id="story-marguerite" class="story-section">
            <div class="story-header">
                <h2>üéæ Marguerite et le grand tournoi</h2>
                <p class="summary">Marguerite se r√©veille en retard pour son tournoi de tennis et rencontre sa chanteuse pr√©f√©r√©e!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">dormir</div>
                            <div class="english">to sleep</div>
                            <div class="example">Marguerite dort profond√©ment.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">se r√©veiller</div>
                            <div class="english">to wake up</div>
                            <div class="example">Elle doit se r√©veiller!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">un tournoi</div>
                            <div class="english">a tournament</div>
                            <div class="example">Le tournoi de tennis commence √† 9h00!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">conduire</div>
                            <div class="english">to drive</div>
                            <div class="example">Marguerite conduit tr√®s vite.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">jouer contre</div>
                            <div class="english">to play against</div>
                            <div class="example">En finale, elle joue contre Megan.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">gagner / perdre</div>
                            <div class="english">to win / to lose</div>
                            <div class="example">Marguerite gagne! Elle est championne!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">un billet (gratuit)</div>
                            <div class="english">a ticket (free)</div>
                            <div class="example">Voici deux billets gratuits!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">les r√™ves deviennent r√©alit√©</div>
                            <div class="english">dreams come true</div>
                            <div class="example">Parfois, les r√™ves deviennent r√©alit√©!</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: DEVOIR + infinitif (must/have to)</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>DEVOIR + infinitif = must / have to</strong><br>
                                je dois, tu dois, il/elle doit, nous devons, vous devez, ils/elles doivent
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                "Je <span class="highlight">dois</span> arriver!" ‚Üí I have to arrive!<br>
                                "Elle <span class="highlight">doit</span> se r√©veiller!" ‚Üí She must wake up!
                            </div>
                            <div class="tip-box">
                                <strong>üí° Similaire:</strong> VOULOIR (to want) + infinitif, POUVOIR (to be able) + infinitif
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>‚úèÔ∏è Exercice: DEVOIR, VOULOIR, POUVOIR</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="word-bank-container">
                        <div class="word-bank-label">Banque de mots</div>
                        <div class="word-bank" id="marguerite-wordbank">
                            <span class="word-chip" onclick="useWord(this, 'marguerite')">doit</span>
                            <span class="word-chip" onclick="useWord(this, 'marguerite')">veut</span>
                            <span class="word-chip" onclick="useWord(this, 'marguerite')">peut</span>
                            <span class="word-chip" onclick="useWord(this, 'marguerite')">peuvent</span>
                            <span class="word-chip" onclick="useWord(this, 'marguerite')">devons</span>
                        </div>
                    </div>

                    <div class="fill-blank-item" data-answer="doit">
                        <div class="sentence">1. Marguerite <input type="text" class="blank-input" placeholder="..."> arriver avant 9h00.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="veut">
                        <div class="sentence">2. Elle <input type="text" class="blank-input" placeholder="..."> gagner le tournoi.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="peut">
                        <div class="sentence">3. Megan <input type="text" class="blank-input" placeholder="..."> bien jouer au tennis.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="peuvent">
                        <div class="sentence">4. Marguerite et Megan <input type="text" class="blank-input" placeholder="..."> √™tre amies.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkFillBlanks('story-marguerite')">‚úì V√©rifier</button>
                        <button class="btn btn-secondary" onclick="showAnswers('story-marguerite')">üëÅ Voir les r√©ponses</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">Qui est Megan Moroney?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Une joueuse de tennis professionnelle</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Une chanteuse country</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>La meilleure amie de Marguerite</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Combien de matchs est-ce que Marguerite gagne?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Deux matchs</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Trois matchs</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Quatre matchs (trois + la finale)</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 7: Rowan -->
        <section id="story-rowan" class="story-section">
            <div class="story-header">
                <h2>üçï Rowan et la pizza mutante</h2>
                <p class="summary">Une pizza g√©ante et mutante attaque un concert! Rowan d√©couvre que la pizza est triste √† cause de ses cheveux.</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">monter sur la sc√®ne</div>
                            <div class="english">to go up on stage</div>
                            <div class="example">Megan monte sur la sc√®ne et chante.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">exploser</div>
                            <div class="english">to explode</div>
                            <div class="example">Le mur du stade explose!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">√™tre en col√®re</div>
                            <div class="english">to be angry</div>
                            <div class="example">Je suis en col√®re! Tr√®s en col√®re!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">malheureux / malheureuse</div>
                            <div class="english">unhappy</div>
                            <div class="example">La pizza est malheureuse √† cause de ses cheveux.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">un salon de coiffure</div>
                            <div class="english">a hair salon</div>
                            <div class="example">Viens avec nous au salon de coiffure!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">laver / brosser / couper</div>
                            <div class="english">to wash / to brush / to cut</div>
                            <div class="example">Elle lave les cheveux. Elle brosse les n≈ìuds.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">√™tre d√©sol√©(e)</div>
                            <div class="english">to be sorry</div>
                            <div class="example">Je suis d√©sol√©e! J'√©tais en col√®re.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">vivre heureux</div>
                            <div class="english">to live happily</div>
                            <div class="example">Et ils vivent tous heureux!</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: Les Adjectifs (accord)</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>Les adjectifs s'accordent avec le nom!</strong><br>
                                Masculin ‚Üí f√©minin: souvent +e<br>
                                Singulier ‚Üí pluriel: souvent +s
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                Les cheveux sont <span class="highlight">longs</span> et <span class="highlight">sales</span>. (m. pl.)<br>
                                La pizza est <span class="highlight">malheureuse</span>. (f. sing.)<br>
                                Une <span class="highlight">belle</span> coiffure. (f. sing.)<br>
                                Les cheveux <span class="highlight">magnifiques</span>. (m. pl.)
                            </div>
                            <div class="tip-box">
                                <strong>üí° Exceptions:</strong> heureux ‚Üí heureuse, beau ‚Üí belle, nouveau ‚Üí nouvelle
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üîó Exercice: Associez les mots</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="matching-container" id="rowan-matching">
                        <div class="matching-column">
                            <h4>Fran√ßais</h4>
                            <div class="matching-item" data-match="1" onclick="selectMatching(this, 'fr')">√™tre en col√®re</div>
                            <div class="matching-item" data-match="2" onclick="selectMatching(this, 'fr')">malheureux</div>
                            <div class="matching-item" data-match="3" onclick="selectMatching(this, 'fr')">un salon de coiffure</div>
                            <div class="matching-item" data-match="4" onclick="selectMatching(this, 'fr')">√™tre d√©sol√©</div>
                            <div class="matching-item" data-match="5" onclick="selectMatching(this, 'fr')">vivre heureux</div>
                        </div>
                        <div class="matching-column">
                            <h4>English</h4>
                            <div class="matching-item" data-match="3" onclick="selectMatching(this, 'en')">a hair salon</div>
                            <div class="matching-item" data-match="5" onclick="selectMatching(this, 'en')">to live happily</div>
                            <div class="matching-item" data-match="1" onclick="selectMatching(this, 'en')">to be angry</div>
                            <div class="matching-item" data-match="2" onclick="selectMatching(this, 'en')">unhappy</div>
                            <div class="matching-item" data-match="4" onclick="selectMatching(this, 'en')">to be sorry</div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="resetMatching('rowan-matching')">üîÑ Recommencer</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">Pourquoi est-ce que la pizza est en col√®re?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Elle n'aime pas la musique</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Ses cheveux sont affreux et personne ne veut √™tre son ami</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Elle a faim</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Comment est-ce que le probl√®me est r√©solu?</p>
                        <div class="mc-options" data-correct="1">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>La pizza va au salon de coiffure et a une belle coiffure</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Rowan combat la pizza</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>La pizza part dans l'espace</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STORY 8: Mateo -->
        <section id="story-mateo" class="story-section">
            <div class="story-header">
                <h2>‚öΩ Le Super D√©fi de Football</h2>
                <p class="summary">Mateo joue au football avec Cristiano Ronaldo et affronte des ballons magiques!</p>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìö Vocabulaire Cl√©</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="vocab-grid">
                        <div class="vocab-card">
                            <div class="french">r√™ver de</div>
                            <div class="english">to dream of</div>
                            <div class="example">Il r√™ve de rencontrer Ronaldo.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">recevoir une invitation</div>
                            <div class="english">to receive an invitation</div>
                            <div class="example">Mateo re√ßoit une invitation myst√©rieuse.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">√™tre pr√™t / pr√™te</div>
                            <div class="english">to be ready</div>
                            <div class="example">Es-tu pr√™t pour le d√©fi?</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">avoir peur / n'aie pas peur!</div>
                            <div class="english">to be afraid / don't be afraid!</div>
                            <div class="example">N'aie pas peur! Utilise la vitesse!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">tirer</div>
                            <div class="english">to shoot (a ball)</div>
                            <div class="example">Ronaldo tire... GOOOAL!</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">glisser / tomber</div>
                            <div class="english">to slide / to fall</div>
                            <div class="example">Mateo glisse sur la glace. Il tombe.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">aider</div>
                            <div class="english">to help</div>
                            <div class="example">Ronaldo l'aide.</div>
                        </div>
                        <div class="vocab-card">
                            <div class="french">le courage / courageux</div>
                            <div class="english">courage / courageous</div>
                            <div class="example">Tu as le courage. Tu as jou√© avec courage.</div>
                        </div>
                    </div>

                    <div class="grammar-box">
                        <div class="grammar-box-header" onclick="toggleGrammar(this)">
                            <span class="icon">üìê</span>
                            <span>Grammaire: AVOIR expressions</span>
                            <span style="margin-left: auto; font-size: 0.75rem; color: #059669;">Cliquez ‚ñº</span>
                        </div>
                        <div class="grammar-explanation">
                            <div class="grammar-rule">
                                <strong>En fran√ßais, on utilise AVOIR pour beaucoup d'expressions!</strong><br>
                                (En anglais, on dit souvent "to be")
                            </div>
                            <p><strong>Exemples de l'histoire:</strong></p>
                            <div class="grammar-example">
                                <span class="highlight">avoir peur</span> = to be afraid<br>
                                <span class="highlight">avoir chaud</span> = to be hot<br>
                                <span class="highlight">avoir froid</span> = to be cold<br>
                                <span class="highlight">avoir raison</span> = to be right<br>
                                <span class="highlight">avoir faim</span> = to be hungry<br>
                                <span class="highlight">avoir soif</span> = to be thirsty<br>
                                <span class="highlight">avoir ... ans</span> = to be ... years old
                            </div>
                            <div class="tip-box">
                                <strong>üí° De l'histoire:</strong> "Mateo <span class="highlight">a</span> peur." = Mateo IS afraid (pas "est peur"!)
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>‚úèÔ∏è Exercice: Les expressions avec AVOIR</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <p style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">Traduisez en fran√ßais. Utilisez AVOIR!</p>

                    <div class="fill-blank-item" data-answer="a peur">
                        <div class="sentence">1. Mateo is afraid. ‚Üí Mateo <input type="text" class="blank-input" placeholder="...">.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="a chaud">
                        <div class="sentence">2. He is hot (temperature). ‚Üí Il <input type="text" class="blank-input" placeholder="...">.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="a froid">
                        <div class="sentence">3. He is cold. ‚Üí Il <input type="text" class="blank-input" placeholder="...">.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="fill-blank-item" data-answer="a 14 ans">
                        <div class="sentence">4. Rowan is 14 years old. ‚Üí Rowan <input type="text" class="blank-input" placeholder="...">.</div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkFillBlanks('story-mateo')">‚úì V√©rifier</button>
                        <button class="btn btn-secondary" onclick="showAnswers('story-mateo')">üëÅ Voir les r√©ponses</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üéØ Compr√©hension</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="exercise-block">
                        <div class="exercise-title">Question 1</div>
                        <p style="margin-bottom: 0.75rem;">Quels sont les trois types de ballons magiques?</p>
                        <div class="mc-options" data-correct="3">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Rouge, bleu, vert</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Petit, moyen, grand</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Feu, glace, √©lectrique</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 2</div>
                        <p style="margin-bottom: 0.75rem;">Qu'est-ce que Mateo apprend √† la fin de l'histoire?</p>
                        <div class="mc-options" data-correct="2">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Le football est difficile</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Avec courage et travail d'√©quipe, tout est possible</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Ronaldo est le meilleur joueur</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="exercise-block">
                        <div class="exercise-title">Question 3</div>
                        <p style="margin-bottom: 0.75rem;">Qui marque le but final?</p>
                        <div class="mc-options" data-correct="1">
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">A</span>
                                <span>Mateo</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">B</span>
                                <span>Ronaldo</span>
                            </div>
                            <div class="mc-option" onclick="selectOption(this)">
                                <span class="letter">C</span>
                                <span>Les deux ensemble</span>
                            </div>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="checkMC(this.closest('.module-content'))">‚úì V√©rifier</button>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div class="module-header" onclick="toggleModule(this)">
                    <h3>üìù Expression √âcrite</h3>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="module-content">
                    <div class="comprehension-question">
                        <div class="question-text">D√©cris ton sport pr√©f√©r√© ou ton activit√© pr√©f√©r√©e. Utilise au moins 3 mots de vocabulaire de cette histoire!</div>
                        <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 0.75rem;">Mots sugg√©r√©s: r√™ver de, avoir peur, √™tre pr√™t, aider, gagner, le courage</p>
                        <textarea class="text-response" id="mateo-written" placeholder="J'adore... / Mon sport pr√©f√©r√© est... / Je r√™ve de..."></textarea>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">
                            Mots: <span id="mateo-word-count">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Export Section -->
        <div class="export-section">
            <h3>üìä Exporter Mes R√©sultats</h3>
            <p>T√©l√©charge tes r√©ponses et ton score!</p>
            <div class="btn-group" style="justify-content: center;">
                <button class="btn btn-primary" onclick="exportResults()">üì• Exporter en TXT</button>
                <button class="btn btn-secondary" onclick="resetAll()">üîÑ Recommencer</button>
            </div>
        </div>
    </main>

    <script>
        // Global state
        let stats = {
            totalAnswered: 0,
            correctAnswers: 0,
            storiesCompleted: new Set()
        };

        let matchingState = {
            selectedFr: null,
            selectedEn: null
        };

        let userResponses = {};

        // Navigation
        function showStory(storyId) {
            document.querySelectorAll('.story-section').forEach(s => s.classList.remove('active'));
            document.getElementById('story-' + storyId).classList.add('active');
            
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Module toggle
        function toggleModule(header) {
            header.classList.toggle('expanded');
            const content = header.nextElementSibling;
            content.classList.toggle('show');
        }

        // Grammar toggle
        function toggleGrammar(header) {
            const explanation = header.nextElementSibling;
            explanation.classList.toggle('show');
        }

        // Word bank functionality
        function useWord(chip, storyId) {
            if (chip.classList.contains('used')) return;
            
            const word = chip.textContent;
            const section = document.getElementById('story-' + storyId);
            const emptyInput = section.querySelector('.blank-input:not([data-filled="true"])');
            
            if (emptyInput && emptyInput.value === '') {
                emptyInput.value = word;
                emptyInput.dataset.filled = 'true';
                chip.classList.add('used');
            }
        }

        // Fill in the blank checking
        function checkFillBlanks(sectionId) {
            const section = document.getElementById(sectionId);
            const items = section.querySelectorAll('.fill-blank-item');
            
            items.forEach(item => {
                const input = item.querySelector('.blank-input');
                const feedback = item.querySelector('.feedback');
                const answer = item.dataset.answer.toLowerCase().trim();
                const userAnswer = input.value.toLowerCase().trim();
                
                if (userAnswer === answer) {
                    input.classList.remove('incorrect');
                    input.classList.add('correct');
                    feedback.textContent = '‚úì Bravo!';
                    feedback.className = 'feedback show success';
                    updateStats(true);
                } else if (userAnswer !== '') {
                    input.classList.remove('correct');
                    input.classList.add('incorrect');
                    feedback.textContent = '‚úó Essaie encore!';
                    feedback.className = 'feedback show error';
                    updateStats(false);
                }
                
                // Store response
                const storyKey = sectionId.replace('story-', '');
                if (!userResponses[storyKey]) userResponses[storyKey] = {};
                userResponses[storyKey]['fill-' + Array.from(items).indexOf(item)] = input.value;
            });
        }

        function showAnswers(sectionId) {
            const section = document.getElementById(sectionId);
            const items = section.querySelectorAll('.fill-blank-item');
            
            items.forEach(item => {
                const input = item.querySelector('.blank-input');
                const feedback = item.querySelector('.feedback');
                const answer = item.dataset.answer;
                
                input.value = answer;
                input.classList.remove('incorrect');
                input.classList.add('correct');
                feedback.textContent = '‚Üí ' + answer;
                feedback.className = 'feedback show success';
            });
        }

        // Multiple choice
        function selectOption(option) {
            const container = option.closest('.mc-options');
            container.querySelectorAll('.mc-option').forEach(o => {
                o.classList.remove('selected');
            });
            option.classList.add('selected');
        }

        function checkMC(moduleContent) {
            const blocks = moduleContent.querySelectorAll('.exercise-block');
            
            blocks.forEach((block, blockIdx) => {
                const options = block.querySelector('.mc-options');
                const correct = parseInt(options.dataset.correct);
                const selected = options.querySelector('.mc-option.selected');
                const feedback = block.querySelector('.feedback');
                
                if (selected) {
                    const selectedIdx = Array.from(options.children).indexOf(selected) + 1;
                    
                    options.querySelectorAll('.mc-option').forEach(o => {
                        o.classList.remove('correct', 'incorrect');
                    });
                    
                    if (selectedIdx === correct) {
                        selected.classList.add('correct');
                        feedback.textContent = '‚úì Super!';
                        feedback.className = 'feedback show success';
                        updateStats(true);
                    } else {
                        selected.classList.add('incorrect');
                        options.children[correct - 1].classList.add('correct');
                        feedback.textContent = '‚úó Regarde la bonne r√©ponse en vert.';
                        feedback.className = 'feedback show error';
                        updateStats(false);
                    }
                }
            });
        }

        // Matching exercise
        function selectMatching(item, lang) {
            if (item.classList.contains('matched')) return;
            
            const container = item.closest('.matching-container');
            
            if (lang === 'fr') {
                container.querySelectorAll('.matching-column:first-child .matching-item').forEach(i => {
                    if (!i.classList.contains('matched')) i.classList.remove('selected');
                });
                item.classList.add('selected');
                matchingState.selectedFr = item;
            } else {
                container.querySelectorAll('.matching-column:last-child .matching-item').forEach(i => {
                    if (!i.classList.contains('matched')) i.classList.remove('selected');
                });
                item.classList.add('selected');
                matchingState.selectedEn = item;
            }
            
            if (matchingState.selectedFr && matchingState.selectedEn) {
                if (matchingState.selectedFr.dataset.match === matchingState.selectedEn.dataset.match) {
                    matchingState.selectedFr.classList.add('matched');
                    matchingState.selectedEn.classList.add('matched');
                    matchingState.selectedFr.classList.remove('selected');
                    matchingState.selectedEn.classList.remove('selected');
                    updateStats(true);
                    showToast('‚úì Correct!', 'success');
                } else {
                    updateStats(false);
                    showToast('‚úó Essaie encore!', 'error');
                }
                matchingState.selectedFr = null;
                matchingState.selectedEn = null;
            }
        }

        function resetMatching(containerId) {
            const container = document.getElementById(containerId);
            container.querySelectorAll('.matching-item').forEach(item => {
                item.classList.remove('selected', 'matched');
            });
            matchingState = { selectedFr: null, selectedEn: null };
        }

        // Stats update
        function updateStats(correct) {
            stats.totalAnswered++;
            if (correct) stats.correctAnswers++;
            
            document.getElementById('totalAnswered').textContent = stats.totalAnswered;
            document.getElementById('correctAnswers').textContent = stats.correctAnswers;
            
            const accuracy = stats.totalAnswered > 0 
                ? Math.round((stats.correctAnswers / stats.totalAnswered) * 100) 
                : 0;
            document.getElementById('accuracyRate').textContent = accuracy + '%';
        }

        // Toast notification
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2500);
        }

        // Word count for text areas
        document.querySelectorAll('.text-response').forEach(textarea => {
            textarea.addEventListener('input', function() {
                const id = this.id;
                const countSpan = document.getElementById(id.replace('-written', '-word-count'));
                if (countSpan) {
                    const words = this.value.trim().split(/\s+/).filter(w => w.length > 0);
                    countSpan.textContent = words.length;
                }
                
                const storyKey = id.split('-')[0];
                if (!userResponses[storyKey]) userResponses[storyKey] = {};
                userResponses[storyKey]['written'] = this.value;
            });
        });

        // Save progress
        function saveProgress() {
            try {
                const inputData = {};
                document.querySelectorAll('.blank-input').forEach((input, idx) => {
                    if (input.value) {
                        inputData['input_' + idx] = input.value;
                    }
                });

                const textResponses = {};
                document.querySelectorAll('.text-response').forEach(textarea => {
                    if (textarea.value) {
                        textResponses[textarea.id] = textarea.value;
                    }
                });

                const mcSelections = {};
                document.querySelectorAll('.mc-options').forEach((options, idx) => {
                    const selected = options.querySelector('.mc-option.selected');
                    if (selected) {
                        mcSelections['mc_' + idx] = Array.from(options.children).indexOf(selected);
                    }
                });

                const matchedItems = [];
                document.querySelectorAll('.matching-item.matched').forEach(item => {
                    matchedItems.push(item.dataset.match);
                });

                const usedChips = [];
                document.querySelectorAll('.word-chip.used').forEach((chip, idx) => {
                    usedChips.push(idx);
                });

                const saveData = {
                    stats: {
                        totalAnswered: stats.totalAnswered,
                        correctAnswers: stats.correctAnswers
                    },
                    userResponses: userResponses,
                    inputData: inputData,
                    textResponses: textResponses,
                    mcSelections: mcSelections,
                    matchedItems: matchedItems,
                    usedChips: usedChips,
                    timestamp: new Date().toISOString()
                };

                localStorage.setItem('frenchVocabNoviceProgress', JSON.stringify(saveData));
                showToast('‚úì Progr√®s sauvegard√©!', 'success');
            } catch (e) {
                console.error('Save error:', e);
                showToast('‚úó Erreur', 'error');
            }
        }

        // Load progress
        function loadProgress() {
            try {
                const saved = localStorage.getItem('frenchVocabNoviceProgress');
                if (!saved) {
                    showToast('Pas de sauvegarde', 'info');
                    return;
                }

                const data = JSON.parse(saved);
                
                if (data.stats) {
                    stats.totalAnswered = data.stats.totalAnswered || 0;
                    stats.correctAnswers = data.stats.correctAnswers || 0;
                    
                    document.getElementById('totalAnswered').textContent = stats.totalAnswered;
                    document.getElementById('correctAnswers').textContent = stats.correctAnswers;
                    const accuracy = stats.totalAnswered > 0 
                        ? Math.round((stats.correctAnswers / stats.totalAnswered) * 100) 
                        : 0;
                    document.getElementById('accuracyRate').textContent = accuracy + '%';
                }

                if (data.userResponses) {
                    userResponses = data.userResponses;
                }

                if (data.inputData) {
                    document.querySelectorAll('.blank-input').forEach((input, idx) => {
                        if (data.inputData['input_' + idx]) {
                            input.value = data.inputData['input_' + idx];
                        }
                    });
                }

                if (data.textResponses) {
                    for (const [id, value] of Object.entries(data.textResponses)) {
                        const textarea = document.getElementById(id);
                        if (textarea) {
                            textarea.value = value;
                            const countSpan = document.getElementById(id.replace('-written', '-word-count'));
                            if (countSpan) {
                                const words = value.trim().split(/\s+/).filter(w => w.length > 0);
                                countSpan.textContent = words.length;
                            }
                        }
                    }
                }

                if (data.mcSelections) {
                    document.querySelectorAll('.mc-options').forEach((options, idx) => {
                        if (data.mcSelections['mc_' + idx] !== undefined) {
                            const optionIdx = data.mcSelections['mc_' + idx];
                            if (options.children[optionIdx]) {
                                options.children[optionIdx].classList.add('selected');
                            }
                        }
                    });
                }

                if (data.matchedItems && data.matchedItems.length > 0) {
                    document.querySelectorAll('.matching-item').forEach(item => {
                        if (data.matchedItems.includes(item.dataset.match)) {
                            item.classList.add('matched');
                        }
                    });
                }

                if (data.usedChips && data.usedChips.length > 0) {
                    document.querySelectorAll('.word-chip').forEach((chip, idx) => {
                        if (data.usedChips.includes(idx)) {
                            chip.classList.add('used');
                        }
                    });
                }

                showToast('‚úì Progr√®s charg√©!', 'success');
            } catch (e) {
                console.error('Load error:', e);
                showToast('‚úó Erreur', 'error');
            }
        }

        // Export results
        function exportResults() {
            let output = '=== MES R√âSULTATS - HISTOIRES EN FRAN√áAIS ===\n';
            output += 'Date: ' + new Date().toLocaleString('fr-FR') + '\n';
            output += 'Niveau: Novice-High / Intermediate-Low\n\n';
            
            output += '--- STATISTIQUES ---\n';
            output += 'Questions r√©pondues: ' + stats.totalAnswered + '\n';
            output += 'R√©ponses correctes: ' + stats.correctAnswers + '\n';
            const accuracy = stats.totalAnswered > 0 
                ? Math.round((stats.correctAnswers / stats.totalAnswered) * 100) 
                : 0;
            output += 'Taux de r√©ussite: ' + accuracy + '%\n\n';
            
            output += '--- MES R√âPONSES √âCRITES ---\n';
            
            for (const [story, responses] of Object.entries(userResponses)) {
                if (responses.written) {
                    output += '\n' + story + ':\n';
                    output += responses.written + '\n';
                }
            }
            
            const blob = new Blob([output], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'mes_resultats_francais.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Reset all
        function resetAll() {
            if (confirm('Recommencer? Tout sera effac√©!')) {
                localStorage.removeItem('frenchVocabNoviceProgress');
                location.reload();
            }
        }

        // Auto-save every 2 minutes
        setInterval(() => {
            if (stats.totalAnswered > 0) {
                saveProgress();
            }
        }, 120000);

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            const firstModule = document.querySelector('.story-section.active .module-header');
            if (firstModule) {
                firstModule.classList.add('expanded');
                firstModule.nextElementSibling.classList.add('show');
            }

            const saved = localStorage.getItem('frenchVocabNoviceProgress');
            if (saved) {
                showToast('üíæ Sauvegarde trouv√©e!', 'info');
            }
        });
    </script>
</body>
</html>
