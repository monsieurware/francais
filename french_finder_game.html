<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find the French</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --forest-canopy: #264E36;
            --mossy-grove: #3B6A4A;
            --leaf-vein: #4F8A5D;
            --sage-mist: #8BAF8D;
            --fern-light: #BFD8B8;
            --sprout-tint: #E3EED4;
            --soil-base: #5A4E3C;
            --clay-neutral: #DCCEB2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comfortaa', cursive;
            background: linear-gradient(135deg, var(--mossy-grove) 0%, var(--forest-canopy) 100%);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 80px;
            color: var(--soil-base);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 10px 30px rgba(38, 78, 54, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--mossy-grove) 0%, var(--forest-canopy) 100%);
            color: white;
            padding: 30px 30px 20px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://i.pinimg.com/originals/9f/32/b4/9f32b44b83c3e8f46fd7c501df3de621.gif');
            background-size: cover;
            background-position: center;
            opacity: 0.35;
            z-index: 0;
            pointer-events: none;
        }

        .header > * {
            position: relative;
            z-index: 1;
        }

        .music-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .music-btn {
            background: transparent;
            border: 2px solid white;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .music-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-slider {
            width: 80px;
            height: 4px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }

        .volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .volume-icon {
            font-size: 18px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            text-shadow: 
                -0.5px -0.5px 0 #000,
                0.5px -0.5px 0 #000,
                -0.5px 0.5px 0 #000,
                0.5px 0.5px 0 #000,
                -1px -1px 0 #000,
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000;
        }

        .header-icon {
            width: 50px;
            height: 50px;
            object-fit: contain;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2));
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            gap: 0;
            margin-top: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            position: relative;
            z-index: 1;
        }

        .tab {
            padding: 12px 25px;
            background: rgba(255,255,255,0.05);
            border: none;
            color: rgba(255,255,255,0.8);
            font-size: 1.05em;
            font-family: 'Comfortaa', cursive;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            border-right: 1px solid rgba(255,255,255,0.1);
        }

        .tab:last-child {
            border-right: none;
        }

        .tab:hover {
            color: white;
            background: rgba(255,255,255,0.15);
        }

        .tab.active {
            color: white;
            background: rgba(255,255,255,0.1);
            border-bottom-color: var(--fern-light);
            font-weight: 600;
            box-shadow: inset 0 -3px 0 var(--fern-light);
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 8px;
            margin-top: 20px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--fern-light);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .game-area {
            padding: 40px;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            gap: 15px;
        }

        .stat-box {
            flex: 1;
            background: var(--sprout-tint);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid var(--fern-light);
            box-shadow: 0 3px 10px rgba(38, 78, 54, 0.1);
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--mossy-grove);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--forest-canopy);
        }

        .target-box {
            background: var(--fern-light);
            border: 3px solid var(--leaf-vein);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 20px rgba(79, 138, 93, 0.2);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .target-label {
            font-size: 0.9em;
            color: var(--forest-canopy);
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .target-text {
            font-size: 1.3em;
            color: var(--soil-base);
            font-weight: 600;
        }

        .audio-target-box {
            background: var(--fern-light);
            border: 3px solid var(--leaf-vein);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(79, 138, 93, 0.2);
            text-align: center;
        }

        .play-audio-btn {
            background: linear-gradient(135deg, var(--leaf-vein) 0%, var(--mossy-grove) 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 138, 93, 0.3);
            font-family: 'Comfortaa', cursive;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .play-audio-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(79, 138, 93, 0.4);
        }

        .play-audio-btn:active {
            transform: scale(0.98);
        }

        .audio-hint {
            margin-top: 15px;
            font-size: 0.9em;
            color: var(--forest-canopy);
            font-style: italic;
        }

        .french-text, .english-text {
            background: var(--sprout-tint);
            padding: 30px;
            border-radius: 15px;
            font-size: 1.1em;
            line-height: 1.8;
            border: 2px solid var(--fern-light);
            box-shadow: 0 4px 15px rgba(38, 78, 54, 0.08);
        }

        .chunk {
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .chunk:hover {
            background: var(--fern-light);
        }

        .chunk.correct {
            background: var(--leaf-vein);
            color: white;
            font-weight: 600;
            cursor: default;
            animation: correctPulse 0.5s ease;
        }

        .chunk.wrong {
            background: #ef9a9a;
            animation: shake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .next-btn {
            display: none;
            width: 100%;
            padding: 20px;
            margin-top: 30px;
            background: linear-gradient(135deg, var(--leaf-vein) 0%, var(--mossy-grove) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 6px 20px rgba(79, 138, 93, 0.3);
            font-family: 'Comfortaa', cursive;
        }

        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(79, 138, 93, 0.4);
        }

        .next-btn.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .completion {
            display: none;
            text-align: center;
            padding: 60px 40px;
        }

        .completion.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .completion h2 {
            font-size: 3em;
            color: var(--forest-canopy);
            margin-bottom: 20px;
        }

        .completion p {
            font-size: 1.3em;
            color: var(--mossy-grove);
            margin-bottom: 30px;
        }

        .restart-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--leaf-vein) 0%, var(--mossy-grove) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 6px 20px rgba(79, 138, 93, 0.3);
            font-family: 'Comfortaa', cursive;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(79, 138, 93, 0.4);
        }

        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            font-size: 2em;
            font-weight: bold;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .feedback.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .feedback.correct {
            color: var(--forest-canopy);
            border: 4px solid var(--leaf-vein);
        }

        .feedback.wrong {
            color: #c62828;
            border: 4px solid #ef9a9a;
        }

        .tips-section {
            padding: 40px;
        }

        .tips-section h2 {
            color: var(--forest-canopy);
            font-size: 2em;
            margin-bottom: 20px;
        }

        .tips-section h3 {
            color: var(--mossy-grove);
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .tip-card {
            background: var(--sprout-tint);
            border-left: 4px solid var(--leaf-vein);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 12px rgba(38, 78, 54, 0.1);
        }

        .tip-card h4 {
            color: var(--forest-canopy);
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .tip-card p, .tip-card ul {
            color: var(--soil-base);
            line-height: 1.8;
        }

        .tip-card ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .tip-card li {
            margin-bottom: 8px;
        }

        .highlight {
            background: var(--fern-light);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .chunk-logger {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 3px solid var(--leaf-vein);
            box-shadow: 0 -5px 20px rgba(38, 78, 54, 0.2);
            transition: transform 0.3s ease;
            z-index: 100;
            max-height: 400px;
            display: flex;
            flex-direction: column;
        }

        .chunk-logger.collapsed {
            transform: translateY(calc(100% - 50px));
        }

        .logger-header {
            background: linear-gradient(135deg, var(--leaf-vein) 0%, var(--mossy-grove) 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .logger-header:hover {
            background: linear-gradient(135deg, var(--mossy-grove) 0%, var(--forest-canopy) 100%);
        }

        .logger-title {
            font-weight: 600;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }

        .logger-badge {
            background: #fbbf24;
            color: var(--forest-canopy);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            animation: pulse 2s infinite;
            transition: opacity 0.3s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .logger-toggle {
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .chunk-logger.collapsed .logger-toggle {
            transform: rotate(180deg);
        }

        .logger-content {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }

        .logger-stats {
            background: var(--sprout-tint);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            gap: 20px;
            font-size: 0.9em;
            color: var(--forest-canopy);
            font-weight: 500;
        }

        .logger-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .logger-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--leaf-vein) 0%, var(--mossy-grove) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Comfortaa', cursive;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(79, 138, 93, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logger-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 138, 93, 0.4);
        }

        .logger-btn.clear {
            background: linear-gradient(135deg, #ef9a9a 0%, #c62828 100%);
        }

        .logger-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid var(--fern-light);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            resize: vertical;
            background: var(--sprout-tint);
            color: var(--soil-base);
        }

        .logger-textarea:focus {
            outline: none;
            border-color: var(--leaf-vein);
        }
    </style>
</head>
<body>
    <audio id="backgroundMusic" loop preload="metadata">
        <source src="https://audio.jukehost.co.uk/SjzEFG54jRgdLIxGGH5pAYnoHPH5Dsc4" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="container">
        <div class="header">
            <div class="music-controls">
                <button class="music-btn" id="musicToggle" onclick="toggleMusic()">üéµ</button>
                <div class="volume-control">
                    <span class="volume-icon">üîä</span>
                    <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider" oninput="changeVolume(this.value)">
                </div>
            </div>

            <h1>
                <img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExaWwwbjR2NmRtbzVwcG9nM3htcWx4YXJkYnRiaWNmeTN4YTVhbWNxbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/kpHjppnhpk1cRyF6qg/giphy.gif" alt="Search" class="header-icon">
                Find the French
            </h1>
            <p>Master IB French B Paper 1 Writing Prompts</p>
            
            <div class="tabs">
                <button class="tab active" onclick="switchTab('frenchGame')">Find the French</button>
                <button class="tab" onclick="switchTab('englishGame')">Find the English</button>
                <button class="tab" onclick="switchTab('tips')">IB Paper 1 Tips</button>
            </div>

            <div class="progress-bar" id="progressBarContainer">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Find the French Game -->
        <div id="frenchGameTab" class="tab-content active">
            <div class="game-area" id="frenchGameArea">
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-label">Prompt</div>
                        <div class="stat-value" id="frenchPromptNum">1</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Found</div>
                        <div class="stat-value" id="frenchFoundCount">0/6</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Score</div>
                        <div class="stat-value" id="frenchScore">0</div>
                    </div>
                </div>

                <div class="target-box">
                    <div class="target-label">Find this in French:</div>
                    <div class="target-text" id="frenchTargetText"></div>
                </div>

                <div class="french-text" id="frenchText"></div>

                <button class="next-btn" id="frenchNextBtn">Next Prompt ‚Üí</button>
            </div>

            <div class="completion" id="frenchCompletion">
                <h2>üéâ Bravo!</h2>
                <p>You've completed all the French prompts!</p>
                <div style="font-size: 2em; margin: 20px 0; color: var(--forest-canopy);">Final Score: <span id="frenchFinalScore">0</span></div>
                <button class="restart-btn" onclick="restartFrenchGame()">Play Again</button>
            </div>
        </div>

        <!-- Find the English Game -->
        <div id="englishGameTab" class="tab-content">
            <div class="game-area" id="englishGameArea">
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-label">Prompt</div>
                        <div class="stat-value" id="englishPromptNum">1</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Found</div>
                        <div class="stat-value" id="englishFoundCount">0/6</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Score</div>
                        <div class="stat-value" id="englishScore">0</div>
                    </div>
                </div>

                <div class="audio-target-box">
                    <div class="target-label">Listen and find this in English:</div>
                    <button class="play-audio-btn" id="playAudioBtn" onclick="playFrenchAudio()">
                        <span>üîä</span>
                        <span>Play French Audio</span>
                    </button>
                    <div class="audio-hint">Click to hear the French phrase</div>
                </div>

                <div class="english-text" id="englishText"></div>

                <button class="next-btn" id="englishNextBtn">Next Prompt ‚Üí</button>
            </div>

            <div class="completion" id="englishCompletion">
                <h2>üéâ Excellent!</h2>
                <p>You've completed all the English prompts!</p>
                <div style="font-size: 2em; margin: 20px 0; color: var(--forest-canopy);">Final Score: <span id="englishFinalScore">0</span></div>
                <button class="restart-btn" onclick="restartEnglishGame()">Play Again</button>
            </div>
        </div>

        <!-- Tips Tab -->
        <div id="tipsTab" class="tab-content">
            <div class="tips-section">
                <h2>üìö IB French B Paper 1 Writing Tips</h2>
                
                <div class="tip-card">
                    <h4>Understanding Paper 1 Format</h4>
                    <p>Paper 1 consists of <span class="highlight">productive writing tasks</span> based on one of the five prescribed themes. You will choose ONE task from a selection and write 250-400 words (SL) or 450-600 words (HL).</p>
                </div>

                <div class="tip-card">
                    <h4>Text Types You Must Know</h4>
                    <ul>
                        <li><strong>Article (Article)</strong> - Informative, objective tone for newspapers/magazines</li>
                        <li><strong>Blog (Blog)</strong> - Personal, informal, first-person perspective</li>
                        <li><strong>Brochure (D√©pliant/Brochure)</strong> - Persuasive, promotional, clear sections</li>
                        <li><strong>Diary Entry (Journal intime)</strong> - Very personal, emotional, reflective</li>
                        <li><strong>Email (Courriel)</strong> - Appropriate greeting/closing, clear purpose</li>
                        <li><strong>Essay (Essai)</strong> - Formal, structured arguments with introduction and conclusion</li>
                        <li><strong>Interview (Interview)</strong> - Question-answer format, natural conversation flow</li>
                        <li><strong>Letter (Lettre)</strong> - Formal or informal, proper letter conventions</li>
                        <li><strong>Report (Rapport)</strong> - Objective, structured, factual information</li>
                        <li><strong>Review (Critique)</strong> - Evaluative, balanced positive and negative points</li>
                        <li><strong>Speech (Discours)</strong> - Persuasive, direct address to audience, rhetorical devices</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>Essential Writing Strategies</h4>
                    <ul>
                        <li><strong>Understand the prompt thoroughly</strong> - Identify the purpose, audience, and text type</li>
                        <li><strong>Plan before writing</strong> - Spend 5-10 minutes organizing your ideas</li>
                        <li><strong>Match the register</strong> - Formal (vous) vs informal (tu) based on context</li>
                        <li><strong>Use appropriate conventions</strong> - Each text type has specific formatting requirements</li>
                        <li><strong>Vary your vocabulary</strong> - Demonstrate range and avoid repetition</li>
                        <li><strong>Include complex structures</strong> - Use subjunctive, conditionals, relative clauses</li>
                        <li><strong>Stay on topic</strong> - Address all parts of the prompt</li>
                        <li><strong>Watch your word count</strong> - Too short or too long will affect your grade</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>Assessment Criteria</h4>
                    <p>Your writing is assessed on:</p>
                    <ul>
                        <li><strong>Criterion A - Language</strong> (12 points): Range and accuracy of vocabulary and grammar</li>
                        <li><strong>Criterion B - Message</strong> (8 points): How well you fulfill the task and develop ideas</li>
                        <li><strong>Criterion C - Conceptual Understanding</strong> (5 points): Appropriate text type, register, and audience awareness</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>Time Management</h4>
                    <ul>
                        <li><strong>5 minutes:</strong> Read all options and choose your task</li>
                        <li><strong>10 minutes:</strong> Plan your response with key ideas</li>
                        <li><strong>50 minutes:</strong> Write your response</li>
                        <li><strong>10 minutes:</strong> Proofread and correct errors</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>Common Mistakes to Avoid</h4>
                    <ul>
                        <li>‚ùå Using English words or "franglais"</li>
                        <li>‚ùå Mixing formal and informal registers</li>
                        <li>‚ùå Forgetting text type conventions</li>
                        <li>‚ùå Writing too much or too little</li>
                        <li>‚ùå Not addressing all aspects of the prompt</li>
                        <li>‚ùå Poor handwriting that's difficult to read</li>
                        <li>‚ùå Overly simple sentence structures</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>Pro Tips for Success</h4>
                    <ul>
                        <li>‚úÖ Practice writing different text types regularly</li>
                        <li>‚úÖ Read authentic French texts to learn natural expressions</li>
                        <li>‚úÖ Create a personal "phrase bank" for each text type</li>
                        <li>‚úÖ Get feedback from teachers on practice tasks</li>
                        <li>‚úÖ Learn connecting words and transitions by heart</li>
                        <li>‚úÖ Study past paper prompts to familiarize yourself with patterns</li>
                        <li>‚úÖ Time yourself during practice to build exam stamina</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="feedback" id="feedback"></div>

    <!-- Chunk Logger Panel -->
    <div class="chunk-logger collapsed" id="chunkLogger">
        <div class="logger-header" onclick="toggleLogger()">
            <div class="logger-title">
                <span>üìã</span>
                <span>Session Chunk Log</span>
                <span class="logger-badge" id="loggerBadge" style="display: none;">0</span>
            </div>
            <div class="logger-toggle">‚ñº</div>
        </div>
        <div class="logger-content">
            <div class="logger-stats">
                <span>Total Chunks Learned: <strong id="totalChunks">0</strong></span>
                <span>From Find the French: <strong id="frenchModeChunks">0</strong></span>
                <span>From Find the English: <strong id="englishModeChunks">0</strong></span>
            </div>
            <div class="logger-actions">
                <button class="logger-btn" onclick="copyToClipboard()">
                    <span>üìã</span>
                    <span>Copy to Clipboard</span>
                </button>
                <button class="logger-btn" onclick="exportTSV()">
                    <span>üíæ</span>
                    <span>Export as TSV</span>
                </button>
                <button class="logger-btn clear" onclick="clearLog()">
                    <span>üóëÔ∏è</span>
                    <span>Clear Log</span>
                </button>
            </div>
            <textarea class="logger-textarea" id="chunkLogArea" readonly placeholder="Correctly answered chunks will appear here in TSV format...&#10;&#10;English ‚Üí [TAB] ‚Üí French&#10;&#10;Perfect for importing into Anki, Quizlet, or Excel!"></textarea>
        </div>
    </div>

    <script>
        const prompts = [
            {
                french: "Vous √™tes moniteur (monitrice) dans un camp de vacances sportives et vous accueillez votre groupe. Dans un petit discours √† leur arriv√©e, vous attirez l'attention des participants sur les dangers possibles et vous leur faites des recommandations pour cr√©er une bonne entente g√©n√©rale.",
                chunks: [
                    { fr: "Vous √™tes moniteur (monitrice)", en: "You are a counselor" },
                    { fr: "dans un camp de vacances sportives", en: "in a sports vacation camp" },
                    { fr: "vous accueillez votre groupe", en: "you welcome your group" },
                    { fr: "Dans un petit discours", en: "In a short speech" },
                    { fr: "vous attirez l'attention des participants", en: "you draw the participants' attention" },
                    { fr: "sur les dangers possibles", en: "to the possible dangers" },
                    { fr: "vous leur faites des recommandations", en: "you make recommendations to them" },
                    { fr: "pour cr√©er une bonne entente g√©n√©rale", en: "to create good general understanding" }
                ]
            },
            {
                french: "Apr√®s avoir vu un film d'horreur, vous faites un cauchemar affreux qui vous r√©veille. Vous √©crivez vos impressions dans votre journal intime.",
                chunks: [
                    { fr: "Apr√®s avoir vu", en: "After watching" },
                    { fr: "un film d'horreur", en: "a horror film" },
                    { fr: "vous faites un cauchemar affreux", en: "you have a terrible nightmare" },
                    { fr: "qui vous r√©veille", en: "that wakes you up" },
                    { fr: "Vous √©crivez vos impressions", en: "You write your impressions" },
                    { fr: "dans votre journal intime", en: "in your diary" }
                ]
            },
            {
                french: "Dans le cadre d'une exposition dont le titre serait ¬´ Les objets de notre enfance ¬ª, vous pr√©sentez un objet qui a jou√© un r√¥le tr√®s important dans votre vie. R√©digez le texte qui pr√©sentera l'objet et son histoire aux visiteurs.",
                chunks: [
                    { fr: "Dans le cadre d'une exposition", en: "As part of an exhibition" },
                    { fr: "dont le titre serait", en: "whose title would be" },
                    { fr: "Les objets de notre enfance", en: "The objects of our childhood" },
                    { fr: "vous pr√©sentez un objet", en: "you present an object" },
                    { fr: "qui a jou√© un r√¥le tr√®s important", en: "that played a very important role" },
                    { fr: "dans votre vie", en: "in your life" },
                    { fr: "R√©digez le texte", en: "Write the text" },
                    { fr: "qui pr√©sentera l'objet et son histoire", en: "that will present the object and its story" }
                ]
            },
            {
                french: "Vous avez √©t√© s√©lectionn√©(e) pour faire partie du premier groupe de touristes √† s√©journer √† bord de la station spatiale internationale. Avant votre d√©part, vous √©crivez vos sentiments (attentes, espoirs, inqui√©tudes‚Ä¶) dans une page de votre journal intime.",
                chunks: [
                    { fr: "Vous avez √©t√© s√©lectionn√©(e)", en: "You have been selected" },
                    { fr: "pour faire partie du premier groupe", en: "to be part of the first group" },
                    { fr: "de touristes √† s√©journer", en: "of tourists to stay" },
                    { fr: "√† bord de la station spatiale internationale", en: "aboard the international space station" },
                    { fr: "Avant votre d√©part", en: "Before your departure" },
                    { fr: "vous √©crivez vos sentiments", en: "you write your feelings" },
                    { fr: "attentes, espoirs, inqui√©tudes", en: "expectations, hopes, worries" }
                ]
            },
            {
                french: "Un commentateur sportif a d√©clar√© : ¬´ Le sport est corrompu pour toujours par l'argent ¬ª. Dans un article pour le journal de votre √©cole, donnez vos opinions sur cette remarque.",
                chunks: [
                    { fr: "Un commentateur sportif a d√©clar√©", en: "A sports commentator stated" },
                    { fr: "Le sport est corrompu pour toujours", en: "Sport is corrupted forever" },
                    { fr: "par l'argent", en: "by money" },
                    { fr: "Dans un article", en: "In an article" },
                    { fr: "pour le journal de votre √©cole", en: "for your school newspaper" },
                    { fr: "donnez vos opinions", en: "give your opinions" },
                    { fr: "sur cette remarque", en: "on this remark" }
                ]
            },
            {
                french: "Le manque d'eau sera bient√¥t un grand probl√®me sur notre plan√®te. Pour le journal de votre √©cole, vous √©crivez un article exposant la situation et donnant une s√©rie de conseils pour aider vos camarades √† limiter leur consommation d'eau.",
                chunks: [
                    { fr: "Le manque d'eau", en: "The lack of water" },
                    { fr: "sera bient√¥t un grand probl√®me", en: "will soon be a major problem" },
                    { fr: "sur notre plan√®te", en: "on our planet" },
                    { fr: "vous √©crivez un article", en: "you write an article" },
                    { fr: "exposant la situation", en: "explaining the situation" },
                    { fr: "donnant une s√©rie de conseils", en: "giving a series of tips" },
                    { fr: "pour aider vos camarades", en: "to help your classmates" },
                    { fr: "√† limiter leur consommation d'eau", en: "to limit their water consumption" }
                ]
            },
            {
                french: "L'universit√© francophone √† laquelle un(e) ami(e) a demand√© l'inscription veut avoir une recommandation de ses futurs √©tudiants √©crite par un jeune. Vous r√©digez un portrait physique et moral de votre ami(e) afin qu'il ou elle soit accept√©(e).",
                chunks: [
                    { fr: "L'universit√© francophone", en: "The French-speaking university" },
                    { fr: "√† laquelle un(e) ami(e) a demand√© l'inscription", en: "to which a friend has applied" },
                    { fr: "veut avoir une recommandation", en: "wants to have a recommendation" },
                    { fr: "de ses futurs √©tudiants", en: "of its future students" },
                    { fr: "√©crite par un jeune", en: "written by a young person" },
                    { fr: "Vous r√©digez un portrait", en: "You write a portrait" },
                    { fr: "physique et moral", en: "physical and moral" }
                ]
            },
            {
                french: "Vous avez l'intention de cr√©er un nouveau magazine pour votre √©cole mais ce projet a √©t√© rejet√© par le Comit√© des √©l√®ves. R√©digez la lettre de protestation que vous leur adresseriez pour d√©fendre votre projet.",
                chunks: [
                    { fr: "Vous avez l'intention de cr√©er", en: "You intend to create" },
                    { fr: "un nouveau magazine", en: "a new magazine" },
                    { fr: "pour votre √©cole", en: "for your school" },
                    { fr: "ce projet a √©t√© rejet√©", en: "this project has been rejected" },
                    { fr: "par le Comit√© des √©l√®ves", en: "by the Student Committee" },
                    { fr: "R√©digez la lettre de protestation", en: "Write the letter of protest" },
                    { fr: "pour d√©fendre votre projet", en: "to defend your project" }
                ]
            },
            {
                french: "Avec un groupe d'√©l√®ves, vous voulez r√©aliser un projet collectif de peinture sur un mur de votre √©cole. Vous devez obtenir la permission du directeur de votre √©cole pour pouvoir r√©aliser ce projet. Vous lui √©crivez une lettre pour tenter de le convaincre.",
                chunks: [
                    { fr: "Avec un groupe d'√©l√®ves", en: "With a group of students" },
                    { fr: "vous voulez r√©aliser un projet collectif", en: "you want to carry out a collective project" },
                    { fr: "de peinture sur un mur", en: "of painting on a wall" },
                    { fr: "Vous devez obtenir la permission", en: "You must obtain permission" },
                    { fr: "du directeur de votre √©cole", en: "from the director of your school" },
                    { fr: "Vous lui √©crivez une lettre", en: "You write him/her a letter" },
                    { fr: "pour tenter de le convaincre", en: "to try to convince him/her" }
                ]
            },
            {
                french: "Votre √©cole re√ßoit un groupe d'√©tudiants √©trangers. Pendant leur s√©jour, vous organisez la projection d'un film repr√©sentatif du pays o√π vous vivez. Vous allez faire un petit discours pour pr√©senter ce film et pour expliquer pourquoi vous l'avez choisi.",
                chunks: [
                    { fr: "Votre √©cole re√ßoit un groupe", en: "Your school receives a group" },
                    { fr: "d'√©tudiants √©trangers", en: "of foreign students" },
                    { fr: "Pendant leur s√©jour", en: "During their stay" },
                    { fr: "vous organisez la projection d'un film", en: "you organize the screening of a film" },
                    { fr: "repr√©sentatif du pays", en: "representative of the country" },
                    { fr: "o√π vous vivez", en: "where you live" },
                    { fr: "pour expliquer pourquoi", en: "to explain why" }
                ]
            },
            {
                french: "Avec un groupe d'amis, vous d√©cidez d'encourager les jeunes de votre quartier √† participer √† une activit√© offerte par la Maison des Jeunes. Cette activit√© permettra √† tous de faire connaissance et d'√©changer leurs propres exp√©riences.",
                chunks: [
                    { fr: "Avec un groupe d'amis", en: "With a group of friends" },
                    { fr: "vous d√©cidez d'encourager les jeunes", en: "you decide to encourage young people" },
                    { fr: "de votre quartier", en: "from your neighborhood" },
                    { fr: "√† participer √† une activit√©", en: "to participate in an activity" },
                    { fr: "offerte par la Maison des Jeunes", en: "offered by the Youth Center" },
                    { fr: "permettra √† tous", en: "will allow everyone" },
                    { fr: "de faire connaissance", en: "to get to know each other" }
                ]
            },
            {
                french: "Votre oncle (ou votre tante), que vous aimez bien, habite loin de chez vous. Dans sa derni√®re lettre, il (ou elle) a √©crit : ¬´ Moi, √† mon √¢ge, je n'ai pas besoin d'ordinateur ¬ª. Vous lui √©crivez une lettre pour lui expliquer comment l'ordinateur pourrait lui faciliter la vie.",
                chunks: [
                    { fr: "Votre oncle (ou votre tante)", en: "Your uncle (or your aunt)" },
                    { fr: "que vous aimez bien", en: "whom you like" },
                    { fr: "habite loin de chez vous", en: "lives far from your home" },
                    { fr: "Dans sa derni√®re lettre", en: "In his/her last letter" },
                    { fr: "je n'ai pas besoin d'ordinateur", en: "I don't need a computer" },
                    { fr: "Vous lui √©crivez une lettre", en: "You write him/her a letter" },
                    { fr: "l'ordinateur pourrait lui faciliter la vie", en: "the computer could make life easier" }
                ]
            },
            {
                french: "Pour l'inauguration de nouveaux b√¢timents scolaires, la direction a d√©cid√© de mettre dans un mur une capsule qui sera ouverte dans 100 ans. Elle contient des objets repr√©sentatifs du d√©but du 21√®me si√®cle.",
                chunks: [
                    { fr: "Pour l'inauguration", en: "For the inauguration" },
                    { fr: "de nouveaux b√¢timents scolaires", en: "of new school buildings" },
                    { fr: "la direction a d√©cid√©", en: "the administration decided" },
                    { fr: "de mettre dans un mur une capsule", en: "to put a capsule in a wall" },
                    { fr: "qui sera ouverte dans 100 ans", en: "that will be opened in 100 years" },
                    { fr: "Elle contient des objets repr√©sentatifs", en: "It contains representative objects" },
                    { fr: "du d√©but du 21√®me si√®cle", en: "from the beginning of the 21st century" }
                ]
            },
            {
                french: "Un journaliste √©tranger √† votre r√©gion a r√©dig√© un article qui fait des commentaires n√©gatifs sur la qualit√© de vie et l'√©conomie de votre r√©gion. Vous √©crivez une lettre au journal pour donner votre opinion sur son article.",
                chunks: [
                    { fr: "Un journaliste √©tranger", en: "A foreign journalist" },
                    { fr: "√† votre r√©gion", en: "to your region" },
                    { fr: "a r√©dig√© un article", en: "wrote an article" },
                    { fr: "qui fait des commentaires n√©gatifs", en: "that makes negative comments" },
                    { fr: "sur la qualit√© de vie", en: "about the quality of life" },
                    { fr: "et l'√©conomie de votre r√©gion", en: "and the economy of your region" },
                    { fr: "pour donner votre opinion", en: "to give your opinion" }
                ]
            },
            {
                french: "Vos camarades de 1√®re ann√©e du BI sont inquiets √† l'id√©e de r√©diger leur m√©moire de 4000 mots. On vous a demand√© de participer √† une assembl√©e pendant laquelle vous essayerez de les rassurer en partageant votre exp√©rience avec eux.",
                chunks: [
                    { fr: "Vos camarades de 1√®re ann√©e", en: "Your first-year classmates" },
                    { fr: "du BI", en: "of IB" },
                    { fr: "sont inquiets √† l'id√©e", en: "are worried about the idea" },
                    { fr: "de r√©diger leur m√©moire", en: "of writing their essay" },
                    { fr: "de 4000 mots", en: "of 4000 words" },
                    { fr: "vous essayerez de les rassurer", en: "you will try to reassure them" },
                    { fr: "en partageant votre exp√©rience", en: "by sharing your experience" }
                ]
            },
            {
                french: "Vous et quelques-uns de vos amis avez organis√© un voyage en groupe pour f√™ter la fin du BI. Les parents de votre meilleur(e) ami(e) refusent de donner leur permission. Pour les convaincre de changer leur d√©cision, vous leur √©crivez une lettre.",
                chunks: [
                    { fr: "Vous et quelques-uns de vos amis", en: "You and some of your friends" },
                    { fr: "avez organis√© un voyage", en: "have organized a trip" },
                    { fr: "en groupe", en: "in a group" },
                    { fr: "pour f√™ter la fin du BI", en: "to celebrate the end of IB" },
                    { fr: "refusent de donner leur permission", en: "refuse to give their permission" },
                    { fr: "Pour les convaincre", en: "To convince them" },
                    { fr: "de changer leur d√©cision", en: "to change their decision" }
                ]
            },
            {
                french: "√Ä votre √©cole, les sports de comp√©tition dominent et de nombreux √©l√®ves voudraient seulement s'amuser en faisant du sport. Vous d√©cidez d'√™tre leur porte-parole et vous r√©digez une proposition que vous adressez au professeur de sport.",
                chunks: [
                    { fr: "√Ä votre √©cole", en: "At your school" },
                    { fr: "les sports de comp√©tition dominent", en: "competitive sports dominate" },
                    { fr: "de nombreux √©l√®ves voudraient", en: "many students would like" },
                    { fr: "seulement s'amuser", en: "only to have fun" },
                    { fr: "en faisant du sport", en: "playing sports" },
                    { fr: "Vous d√©cidez d'√™tre leur porte-parole", en: "You decide to be their spokesperson" },
                    { fr: "vous r√©digez une proposition", en: "you write a proposal" }
                ]
            },
            {
                french: "Les jeunes protestent souvent contre les r√®gles familiales. Vous √©crivez un article pour le journal de votre √©cole dans lequel vous examinez la n√©cessit√© de ces r√®gles dans les familles d'aujourd'hui.",
                chunks: [
                    { fr: "Les jeunes protestent souvent", en: "Young people often protest" },
                    { fr: "contre les r√®gles familiales", en: "against family rules" },
                    { fr: "Vous √©crivez un article", en: "You write an article" },
                    { fr: "pour le journal de votre √©cole", en: "for your school newspaper" },
                    { fr: "dans lequel vous examinez", en: "in which you examine" },
                    { fr: "la n√©cessit√© de ces r√®gles", en: "the necessity of these rules" },
                    { fr: "dans les familles d'aujourd'hui", en: "in today's families" }
                ]
            },
            {
                french: "C'√©tait la fin de la journ√©e, j'avais l'intention de me reposer et de r√™ver, quand tout √† coup‚Ä¶ Continuez cette histoire qui para√Ætra dans un mensuel pour adolescents sous la rubrique ¬´ Myst√®res et aventures ¬ª.",
                chunks: [
                    { fr: "C'√©tait la fin de la journ√©e", en: "It was the end of the day" },
                    { fr: "j'avais l'intention", en: "I intended" },
                    { fr: "de me reposer", en: "to rest" },
                    { fr: "et de r√™ver", en: "and to dream" },
                    { fr: "quand tout √† coup", en: "when suddenly" },
                    { fr: "Continuez cette histoire", en: "Continue this story" },
                    { fr: "dans un mensuel pour adolescents", en: "in a monthly magazine for teenagers" }
                ]
            },
            {
                french: "Un film vient de sortir et tous les journaux encouragent les jeunes √† le voir. Vous l'avez vu et vous pensez qu'il pourrait avoir une mauvaise influence sur un jeune public. Exprimez vos opinions dans une lettre que vous adressez au courrier des lecteurs.",
                chunks: [
                    { fr: "Un film vient de sortir", en: "A film has just come out" },
                    { fr: "tous les journaux encouragent", en: "all the newspapers encourage" },
                    { fr: "les jeunes √† le voir", en: "young people to see it" },
                    { fr: "Vous l'avez vu", en: "You have seen it" },
                    { fr: "une mauvaise influence", en: "a bad influence" },
                    { fr: "sur un jeune public", en: "on a young audience" },
                    { fr: "Exprimez vos opinions", en: "Express your opinions" }
                ]
            },
            {
                french: "Votre ville a r√©cemment organis√© une activit√© pour les jeunes qui vous a beaucoup plu. √âcrivez un compte rendu pour le journal local dans lequel vous encouragez d'autres jeunes √† participer au m√™me genre d'activit√©.",
                chunks: [
                    { fr: "Votre ville a r√©cemment organis√©", en: "Your city recently organized" },
                    { fr: "une activit√© pour les jeunes", en: "an activity for young people" },
                    { fr: "qui vous a beaucoup plu", en: "that you really enjoyed" },
                    { fr: "√âcrivez un compte rendu", en: "Write a report" },
                    { fr: "pour le journal local", en: "for the local newspaper" },
                    { fr: "vous encouragez d'autres jeunes", en: "you encourage other young people" },
                    { fr: "au m√™me genre d'activit√©", en: "in the same type of activity" }
                ]
            },
            {
                french: "La communication entre parents et enfants est parfois difficile. Composez un guide de recommandations √† l'intention des adolescents afin d'encourager une meilleure communication entre les g√©n√©rations.",
                chunks: [
                    { fr: "La communication", en: "Communication" },
                    { fr: "entre parents et enfants", en: "between parents and children" },
                    { fr: "est parfois difficile", en: "is sometimes difficult" },
                    { fr: "Composez un guide", en: "Compose a guide" },
                    { fr: "de recommandations", en: "of recommendations" },
                    { fr: "√† l'intention des adolescents", en: "for teenagers" },
                    { fr: "une meilleure communication", en: "better communication" }
                ]
            },
            {
                french: "Votre professeur de fran√ßais vous a annonc√© qu'il y aurait des examens suppl√©mentaires au trimestre suivant. La nouvelle vous a contrari√©(e) et vous a amen√©(e) √† √©crire une lettre de protestation au professeur.",
                chunks: [
                    { fr: "Votre professeur de fran√ßais", en: "Your French teacher" },
                    { fr: "vous a annonc√©", en: "announced to you" },
                    { fr: "qu'il y aurait", en: "that there would be" },
                    { fr: "des examens suppl√©mentaires", en: "additional exams" },
                    { fr: "au trimestre suivant", en: "the following term" },
                    { fr: "La nouvelle vous a contrari√©(e)", en: "The news upset you" },
                    { fr: "une lettre de protestation", en: "a letter of protest" }
                ]
            },
            {
                french: "Vous avez jou√© dans une pi√®ce de th√©√¢tre, un op√©ra ou une com√©die musicale pr√©sent√©(e) par votre √©cole. La repr√©sentation a eu beaucoup de succ√®s. √âcrivez une page de votre journal intime dans laquelle vous faites part de vos r√©flexions.",
                chunks: [
                    { fr: "Vous avez jou√©", en: "You played" },
                    { fr: "dans une pi√®ce de th√©√¢tre", en: "in a play" },
                    { fr: "un op√©ra ou une com√©die musicale", en: "an opera or a musical" },
                    { fr: "pr√©sent√©(e) par votre √©cole", en: "presented by your school" },
                    { fr: "La repr√©sentation a eu", en: "The performance had" },
                    { fr: "beaucoup de succ√®s", en: "great success" },
                    { fr: "vous faites part de vos r√©flexions", en: "you share your reflections" }
                ]
            },
            {
                french: "Dans le cadre de la semaine de la francophonie, vous devrez faire un discours devant vos camarades sur le sujet suivant : ¬´ En quoi la culture francophone que vous avez d√©couverte au cours de votre scolarit√© est-elle diff√©rente de la culture du pays dans lequel vous vivez ? ¬ª",
                chunks: [
                    { fr: "Dans le cadre de", en: "As part of" },
                    { fr: "la semaine de la francophonie", en: "francophone week" },
                    { fr: "vous devrez faire un discours", en: "you will have to give a speech" },
                    { fr: "devant vos camarades", en: "in front of your classmates" },
                    { fr: "la culture francophone", en: "francophone culture" },
                    { fr: "que vous avez d√©couverte", en: "that you discovered" },
                    { fr: "au cours de votre scolarit√©", en: "during your schooling" }
                ]
            },
            {
                french: "L'animal domestique que vous avez depuis votre enfance est tr√®s malade et vous √™tes inquiet. √âcrivez une page de votre journal intime dans laquelle vous expliquez la place que tient cet animal dans votre vie.",
                chunks: [
                    { fr: "L'animal domestique", en: "The pet" },
                    { fr: "que vous avez depuis votre enfance", en: "that you've had since childhood" },
                    { fr: "est tr√®s malade", en: "is very sick" },
                    { fr: "vous √™tes inquiet", en: "you are worried" },
                    { fr: "√âcrivez une page", en: "Write a page" },
                    { fr: "de votre journal intime", en: "of your diary" },
                    { fr: "la place que tient cet animal", en: "the place this animal holds" }
                ]
            },
            {
                french: "Un(e) de vos ami(e)s a un gros probl√®me. Vous √©crivez une lettre √† un(e) psychologue que vous connaissez bien et qui s'occupe beaucoup des jeunes. Vous lui donnez des d√©tails sur le probl√®me de votre ami(e) et lui demandez comment vous pouvez l'aider.",
                chunks: [
                    { fr: "Un(e) de vos ami(e)s", en: "One of your friends" },
                    { fr: "a un gros probl√®me", en: "has a big problem" },
                    { fr: "Vous √©crivez une lettre", en: "You write a letter" },
                    { fr: "√† un(e) psychologue", en: "to a psychologist" },
                    { fr: "que vous connaissez bien", en: "whom you know well" },
                    { fr: "qui s'occupe beaucoup des jeunes", en: "who works a lot with young people" },
                    { fr: "comment vous pouvez l'aider", en: "how you can help him/her" }
                ]
            },
            {
                french: "Vous avez fait partie du premier groupe de colons qui est all√© vivre sur Mars. Pour l'Agence spatiale internationale, vous r√©digez un compte rendu sur la premi√®re ann√©e de votre nouvelle vie.",
                chunks: [
                    { fr: "Vous avez fait partie", en: "You were part" },
                    { fr: "du premier groupe de colons", en: "of the first group of colonists" },
                    { fr: "qui est all√© vivre", en: "who went to live" },
                    { fr: "sur Mars", en: "on Mars" },
                    { fr: "Pour l'Agence spatiale internationale", en: "For the International Space Agency" },
                    { fr: "vous r√©digez un compte rendu", en: "you write a report" },
                    { fr: "la premi√®re ann√©e", en: "the first year" }
                ]
            },
            {
                french: "√Ä cause du grand nombre d'accidents de la route dans lesquels sont impliqu√©s les jeunes, votre √©cole organise un d√©bat sur le th√®me : ¬´ Le permis de conduire : pas avant 21 ans ? ¬ª Choisissez le point de vue pour ou le point de vue contre.",
                chunks: [
                    { fr: "√Ä cause du grand nombre", en: "Because of the large number" },
                    { fr: "d'accidents de la route", en: "of road accidents" },
                    { fr: "dans lesquels sont impliqu√©s les jeunes", en: "in which young people are involved" },
                    { fr: "votre √©cole organise un d√©bat", en: "your school organizes a debate" },
                    { fr: "sur le th√®me", en: "on the theme" },
                    { fr: "Le permis de conduire", en: "The driver's license" },
                    { fr: "pas avant 21 ans", en: "not before 21 years old" }
                ]
            },
            {
                french: "Un chanteur ou une chanteuse tr√®s populaire vient de donner un concert dans votre ville. Vous y avez assist√©, mais vous n'avez pas du tout appr√©ci√©. R√©digez une critique n√©gative de ce concert pour le magazine de votre √©cole.",
                chunks: [
                    { fr: "Un chanteur ou une chanteuse", en: "A male or female singer" },
                    { fr: "tr√®s populaire", en: "very popular" },
                    { fr: "vient de donner un concert", en: "has just given a concert" },
                    { fr: "dans votre ville", en: "in your city" },
                    { fr: "Vous y avez assist√©", en: "You attended it" },
                    { fr: "vous n'avez pas du tout appr√©ci√©", en: "you didn't appreciate it at all" },
                    { fr: "R√©digez une critique n√©gative", en: "Write a negative review" }
                ]
            },
            {
                french: "Vos parents n'aiment pas la mani√®re dont vous vous habillez et vous font constamment des reproches √† ce sujet. R√©digez une page de votre journal intime dans laquelle vous exprimez vos sentiments face √† cette situation.",
                chunks: [
                    { fr: "Vos parents n'aiment pas", en: "Your parents don't like" },
                    { fr: "la mani√®re dont vous vous habillez", en: "the way you dress" },
                    { fr: "vous font constamment des reproches", en: "constantly criticize you" },
                    { fr: "√† ce sujet", en: "about this" },
                    { fr: "R√©digez une page", en: "Write a page" },
                    { fr: "de votre journal intime", en: "of your diary" },
                    { fr: "vous exprimez vos sentiments", en: "you express your feelings" }
                ]
            },
            {
                french: "Pour des raisons budg√©taires, la Maison des Jeunes de votre ville va fermer ses portes. √âcrivez une lettre au maire de votre ville pour protester contre cette d√©cision.",
                chunks: [
                    { fr: "Pour des raisons budg√©taires", en: "For budgetary reasons" },
                    { fr: "la Maison des Jeunes", en: "the Youth Center" },
                    { fr: "de votre ville", en: "of your city" },
                    { fr: "va fermer ses portes", en: "is going to close its doors" },
                    { fr: "√âcrivez une lettre au maire", en: "Write a letter to the mayor" },
                    { fr: "pour protester", en: "to protest" },
                    { fr: "contre cette d√©cision", en: "against this decision" }
                ]
            },
            {
                french: "Dans le cadre des services communautaires, votre √©cole est venue en aide √† un village durement touch√© par une catastrophe naturelle. Pour le journal de votre √©cole, r√©digez un compte rendu dans lequel vous d√©crivez les diff√©rentes √©tapes de votre projet.",
                chunks: [
                    { fr: "Dans le cadre des services communautaires", en: "As part of community service" },
                    { fr: "votre √©cole est venue en aide", en: "your school came to help" },
                    { fr: "√† un village", en: "a village" },
                    { fr: "durement touch√©", en: "severely affected" },
                    { fr: "par une catastrophe naturelle", en: "by a natural disaster" },
                    { fr: "r√©digez un compte rendu", en: "write a report" },
                    { fr: "les diff√©rentes √©tapes", en: "the different stages" }
                ]
            },
            {
                french: "Dans le cadre de la ¬´ Semaine sans t√©l√© ¬ª, les √©l√®ves de votre √©cole ont √©t√© encourag√©s √† ne pas regarder la t√©l√©vision pendant une semaine afin de r√©fl√©chir √† l'importance de la t√©l√©vision dans leur vie quotidienne. R√©digez un article pour le journal de votre √©cole.",
                chunks: [
                    { fr: "Dans le cadre de", en: "As part of" },
                    { fr: "la Semaine sans t√©l√©", en: "TV-free week" },
                    { fr: "les √©l√®ves de votre √©cole", en: "the students of your school" },
                    { fr: "ont √©t√© encourag√©s", en: "have been encouraged" },
                    { fr: "√† ne pas regarder la t√©l√©vision", en: "not to watch television" },
                    { fr: "pendant une semaine", en: "for a week" },
                    { fr: "dans leur vie quotidienne", en: "in their daily life" }
                ]
            },
            {
                french: "Votre √©cole organise un d√©bat sur le th√®me : ¬´ Les jeunes d'aujourd'hui ont la vie plus facile que leurs parents au m√™me √¢ge ¬ª. Choisissez le point de vue pour ou contre cette affirmation et r√©digez le texte de votre discours.",
                chunks: [
                    { fr: "Votre √©cole organise un d√©bat", en: "Your school organizes a debate" },
                    { fr: "sur le th√®me", en: "on the theme" },
                    { fr: "Les jeunes d'aujourd'hui", en: "Young people today" },
                    { fr: "ont la vie plus facile", en: "have an easier life" },
                    { fr: "que leurs parents", en: "than their parents" },
                    { fr: "au m√™me √¢ge", en: "at the same age" },
                    { fr: "r√©digez le texte de votre discours", en: "write the text of your speech" }
                ]
            },
            {
                french: "Vous avez particip√© √† un programme d'√©change dans un pays francophone. Quelques jours apr√®s votre retour, vous envoyez un courriel pour remercier votre famille d'accueil.",
                chunks: [
                    { fr: "Vous avez particip√©", en: "You participated" },
                    { fr: "√† un programme d'√©change", en: "in an exchange program" },
                    { fr: "dans un pays francophone", en: "in a French-speaking country" },
                    { fr: "Quelques jours apr√®s votre retour", en: "A few days after your return" },
                    { fr: "vous envoyez un courriel", en: "you send an email" },
                    { fr: "pour remercier", en: "to thank" },
                    { fr: "votre famille d'accueil", en: "your host family" }
                ]
            },
            {
                french: "Au cours de votre dernier voyage en avion, vous avez eu la surprise de vous retrouver assis(e) √† c√¥t√© de votre acteur pr√©f√©r√©. Racontez cette rencontre dans une page de votre journal intime.",
                chunks: [
                    { fr: "Au cours de votre dernier voyage", en: "During your last trip" },
                    { fr: "en avion", en: "by plane" },
                    { fr: "vous avez eu la surprise", en: "you had the surprise" },
                    { fr: "de vous retrouver assis(e)", en: "to find yourself sitting" },
                    { fr: "√† c√¥t√© de", en: "next to" },
                    { fr: "votre acteur pr√©f√©r√©", en: "your favorite actor" },
                    { fr: "Racontez cette rencontre", en: "Tell about this encounter" }
                ]
            },
            {
                french: "Vous venez de quitter la maison familiale et de prendre un appartement que vous partagez avec trois de vos ami(e)s. La cohabitation est tr√®s difficile. √âcrivez une page de votre journal intime dans laquelle vous vous plaignez des difficult√©s rencontr√©es.",
                chunks: [
                    { fr: "Vous venez de quitter", en: "You have just left" },
                    { fr: "la maison familiale", en: "the family home" },
                    { fr: "et de prendre un appartement", en: "and taken an apartment" },
                    { fr: "que vous partagez", en: "that you share" },
                    { fr: "avec trois de vos ami(e)s", en: "with three of your friends" },
                    { fr: "La cohabitation est tr√®s difficile", en: "Living together is very difficult" },
                    { fr: "vous vous plaignez", en: "you complain" }
                ]
            },
            {
                french: "Vous avez lu dans un journal un article affirmant que le Baccalaur√©at International est un programme √©litiste r√©serv√© aux √©l√®ves obs√©d√©s par leurs r√©sultats scolaires. Vous n'√™tes pas d'accord avec l'opinion du journaliste.",
                chunks: [
                    { fr: "Vous avez lu dans un journal", en: "You read in a newspaper" },
                    { fr: "un article affirmant que", en: "an article claiming that" },
                    { fr: "le Baccalaur√©at International", en: "the International Baccalaureate" },
                    { fr: "est un programme √©litiste", en: "is an elitist program" },
                    { fr: "r√©serv√© aux √©l√®ves", en: "reserved for students" },
                    { fr: "obs√©d√©s par leurs r√©sultats scolaires", en: "obsessed with their academic results" },
                    { fr: "Vous n'√™tes pas d'accord", en: "You don't agree" }
                ]
            },
            {
                french: "Pas facile de changer d'√©cole : tout est nouveau, tout est inconnu ! En tant que pr√©sident(e) du comit√© des √©l√®ves, vous r√©digez √† l'intention des nouveaux √©l√®ves de votre √©cole un guide de recommandations pour faciliter leur int√©gration.",
                chunks: [
                    { fr: "Pas facile de changer d'√©cole", en: "Not easy to change schools" },
                    { fr: "tout est nouveau", en: "everything is new" },
                    { fr: "tout est inconnu", en: "everything is unknown" },
                    { fr: "En tant que pr√©sident(e)", en: "As president" },
                    { fr: "du comit√© des √©l√®ves", en: "of the student committee" },
                    { fr: "vous r√©digez un guide", en: "you write a guide" },
                    { fr: "pour faciliter leur int√©gration", en: "to facilitate their integration" }
                ]
            },
            {
                french: "Dans le cadre de la Semaine de la citoyennet√©, votre √©cole organise un d√©bat sur le th√®me : ¬´ Les jeunes devraient-ils avoir le droit de vote d√®s l'√¢ge de 16 ans ? ¬ª Choisissez le point de vue pour ou contre.",
                chunks: [
                    { fr: "Dans le cadre de", en: "As part of" },
                    { fr: "la Semaine de la citoyennet√©", en: "Citizenship Week" },
                    { fr: "votre √©cole organise un d√©bat", en: "your school organizes a debate" },
                    { fr: "Les jeunes devraient-ils avoir", en: "Should young people have" },
                    { fr: "le droit de vote", en: "the right to vote" },
                    { fr: "d√®s l'√¢ge de 16 ans", en: "from the age of 16" },
                    { fr: "Choisissez le point de vue", en: "Choose the viewpoint" }
                ]
            },
            {
                french: "Depuis quelques mois, vous travaillez √† temps partiel apr√®s l'√©cole. Afin de faire profiter vos camarades de votre exp√©rience, r√©digez un guide de recommandations intitul√© ¬´ Comment concilier travail et √©tudes ¬ª.",
                chunks: [
                    { fr: "Depuis quelques mois", en: "For a few months" },
                    { fr: "vous travaillez √† temps partiel", en: "you work part-time" },
                    { fr: "apr√®s l'√©cole", en: "after school" },
                    { fr: "Afin de faire profiter", en: "In order to benefit" },
                    { fr: "vos camarades", en: "your classmates" },
                    { fr: "de votre exp√©rience", en: "from your experience" },
                    { fr: "Comment concilier travail et √©tudes", en: "How to balance work and studies" }
                ]
            },
            {
                french: "La biblioth√®que de votre √©cole vient de recevoir un nouveau magazine francophone. Vous r√©digez la critique de ce magazine pour le journal de votre √©cole.",
                chunks: [
                    { fr: "La biblioth√®que de votre √©cole", en: "Your school library" },
                    { fr: "vient de recevoir", en: "has just received" },
                    { fr: "un nouveau magazine", en: "a new magazine" },
                    { fr: "francophone", en: "French-speaking" },
                    { fr: "Vous r√©digez la critique", en: "You write the review" },
                    { fr: "de ce magazine", en: "of this magazine" },
                    { fr: "pour le journal de votre √©cole", en: "for your school newspaper" }
                ]
            },
            {
                french: "Dans le cadre d'un concours pour jeunes √©crivains, racontez une anecdote se terminant ainsi : ¬´ C'est comme √ßa que, par hasard, je suis devenu(e) c√©l√®bre. ¬ª Cette anecdote sera publi√©e dans un magazine pour jeunes.",
                chunks: [
                    { fr: "Dans le cadre d'un concours", en: "As part of a contest" },
                    { fr: "pour jeunes √©crivains", en: "for young writers" },
                    { fr: "racontez une anecdote", en: "tell an anecdote" },
                    { fr: "se terminant ainsi", en: "ending like this" },
                    { fr: "C'est comme √ßa que", en: "That's how" },
                    { fr: "par hasard", en: "by chance" },
                    { fr: "je suis devenu(e) c√©l√®bre", en: "I became famous" }
                ]
            },
            {
                french: "Vous avez vu, √† la t√©l√©vision ou dans un magazine, une publicit√© qui vous a choqu√©(e). Vous d√©cidez d'√©crire une lettre au courrier des lecteurs de votre journal pr√©f√©r√© afin de protester contre cette publicit√©.",
                chunks: [
                    { fr: "Vous avez vu", en: "You saw" },
                    { fr: "√† la t√©l√©vision ou dans un magazine", en: "on television or in a magazine" },
                    { fr: "une publicit√©", en: "an advertisement" },
                    { fr: "qui vous a choqu√©(e)", en: "that shocked you" },
                    { fr: "Vous d√©cidez d'√©crire", en: "You decide to write" },
                    { fr: "au courrier des lecteurs", en: "to the letters section" },
                    { fr: "afin de protester", en: "in order to protest" }
                ]
            },
            {
                french: "Dans un discours, le directeur de votre √©tablissement scolaire a critiqu√© les √©l√®ves qui choisissent une profession manuelle au lieu d'aller √† l'universit√©. Vous lui √©crivez une lettre, dans laquelle vous exprimez votre d√©saccord.",
                chunks: [
                    { fr: "Dans un discours", en: "In a speech" },
                    { fr: "le directeur de votre √©tablissement", en: "the director of your institution" },
                    { fr: "a critiqu√© les √©l√®ves", en: "criticized the students" },
                    { fr: "qui choisissent une profession manuelle", en: "who choose a manual profession" },
                    { fr: "au lieu d'aller √† l'universit√©", en: "instead of going to university" },
                    { fr: "Vous lui √©crivez une lettre", en: "You write him/her a letter" },
                    { fr: "vous exprimez votre d√©saccord", en: "you express your disagreement" }
                ]
            },
            {
                french: "Vous aimez lire des bandes dessin√©es. Pour le journal du lyc√©e, le biblioth√©caire de votre lyc√©e vous a demand√© d'√©crire la critique d'une bande dessin√©e.",
                chunks: [
                    { fr: "Vous aimez lire", en: "You like to read" },
                    { fr: "des bandes dessin√©es", en: "comic books" },
                    { fr: "Pour le journal du lyc√©e", en: "For the high school newspaper" },
                    { fr: "le biblioth√©caire", en: "the librarian" },
                    { fr: "de votre lyc√©e", en: "of your high school" },
                    { fr: "vous a demand√© d'√©crire", en: "asked you to write" },
                    { fr: "la critique d'une bande dessin√©e", en: "the review of a comic book" }
                ]
            },
            {
                french: "Une soci√©t√© de cin√©ma francophone organise un concours qui a pour but d'encourager une meilleure compr√©hension entre jeunes de cultures diff√©rentes. Vous r√©digez le r√©sum√© du film que vous soumettrez √† ce concours.",
                chunks: [
                    { fr: "Une soci√©t√© de cin√©ma", en: "A film company" },
                    { fr: "francophone", en: "French-speaking" },
                    { fr: "organise un concours", en: "organizes a contest" },
                    { fr: "qui a pour but", en: "which aims" },
                    { fr: "d'encourager une meilleure compr√©hension", en: "to encourage better understanding" },
                    { fr: "entre jeunes de cultures diff√©rentes", en: "between young people of different cultures" },
                    { fr: "Vous r√©digez le r√©sum√©", en: "You write the summary" }
                ]
            },
            {
                french: "Vous travaillez pour une association qui propose des s√©jours de plusieurs mois √† l'√©tranger. Vous savez que beaucoup de jeunes h√©sitent √† aller vivre aussi longtemps dans un pays qu'ils ne connaissent pas. R√©digez un guide de recommandations.",
                chunks: [
                    { fr: "Vous travaillez pour une association", en: "You work for an organization" },
                    { fr: "qui propose des s√©jours", en: "that offers stays" },
                    { fr: "de plusieurs mois", en: "of several months" },
                    { fr: "√† l'√©tranger", en: "abroad" },
                    { fr: "beaucoup de jeunes h√©sitent", en: "many young people hesitate" },
                    { fr: "aussi longtemps", en: "for so long" },
                    { fr: "dans un pays qu'ils ne connaissent pas", en: "in a country they don't know" }
                ]
            },
            {
                french: "√Ä cause de tous les probl√®mes li√©s √† la pr√©sence de t√©l√©phones portables √† l'√©cole, le directeur a l'intention de les interdire. En tant que repr√©sentant des √©l√®ves aupr√®s des professeurs vous d√©cidez de leur faire part des opinions des √©l√®ves.",
                chunks: [
                    { fr: "√Ä cause de tous les probl√®mes", en: "Because of all the problems" },
                    { fr: "li√©s √† la pr√©sence", en: "linked to the presence" },
                    { fr: "de t√©l√©phones portables", en: "of mobile phones" },
                    { fr: "√† l'√©cole", en: "at school" },
                    { fr: "le directeur a l'intention", en: "the director intends" },
                    { fr: "de les interdire", en: "to ban them" },
                    { fr: "En tant que repr√©sentant des √©l√®ves", en: "As student representative" }
                ]
            },
            {
                french: "Le mois dernier, une nouvelle loi anti-tabac interdisant de fumer dans tous les lieux publics a √©t√© adopt√©e. Pour le journal ¬´ La Voix des Jeunes ¬ª, vous r√©digez un article dans lequel vous exposez les effets positifs de cette loi.",
                chunks: [
                    { fr: "Le mois dernier", en: "Last month" },
                    { fr: "une nouvelle loi anti-tabac", en: "a new anti-smoking law" },
                    { fr: "interdisant de fumer", en: "prohibiting smoking" },
                    { fr: "dans tous les lieux publics", en: "in all public places" },
                    { fr: "a √©t√© adopt√©e", en: "was adopted" },
                    { fr: "vous r√©digez un article", en: "you write an article" },
                    { fr: "les effets positifs", en: "the positive effects" }
                ]
            },
            {
                french: "Suite √† une catastrophe naturelle, le comit√© des √©l√®ves de votre √©cole a d√©cid√© d'organiser un concert afin de collecter de l'argent pour venir en aide aux sinistr√©s. √âcrivez une lettre √† un artiste c√©l√®bre afin de le convaincre de venir chanter gratuitement.",
                chunks: [
                    { fr: "Suite √† une catastrophe naturelle", en: "Following a natural disaster" },
                    { fr: "le comit√© des √©l√®ves", en: "the student committee" },
                    { fr: "a d√©cid√© d'organiser un concert", en: "decided to organize a concert" },
                    { fr: "afin de collecter de l'argent", en: "in order to collect money" },
                    { fr: "pour venir en aide", en: "to help" },
                    { fr: "aux sinistr√©s", en: "the disaster victims" },
                    { fr: "de venir chanter gratuitement", en: "to come sing for free" }
                ]
            },
            {
                french: "Vous √™tes le pr√©sident du ¬´ Club des Inventeurs ¬ª de votre √©cole. Vous avez imagin√© un objet r√©volutionnaire. Pour le journal de votre √©cole, vous r√©digez un article dans lequel vous d√©crivez cet objet et ses avantages.",
                chunks: [
                    { fr: "Vous √™tes le pr√©sident", en: "You are the president" },
                    { fr: "du Club des Inventeurs", en: "of the Inventors' Club" },
                    { fr: "de votre √©cole", en: "of your school" },
                    { fr: "Vous avez imagin√©", en: "You imagined" },
                    { fr: "un objet r√©volutionnaire", en: "a revolutionary object" },
                    { fr: "vous d√©crivez cet objet", en: "you describe this object" },
                    { fr: "et ses avantages", en: "and its advantages" }
                ]
            },
            {
                french: "Lors d'un examen de fin d'ann√©e, vous voyez l'un de vos camarades tricher ; il obtient ensuite la meilleure note de la classe. R√©digez une page de votre journal intime dans laquelle vous exprimez vos sentiments sur ce comportement.",
                chunks: [
                    { fr: "Lors d'un examen de fin d'ann√©e", en: "During an end-of-year exam" },
                    { fr: "vous voyez l'un de vos camarades", en: "you see one of your classmates" },
                    { fr: "tricher", en: "cheat" },
                    { fr: "il obtient ensuite", en: "he then gets" },
                    { fr: "la meilleure note de la classe", en: "the best grade in the class" },
                    { fr: "R√©digez une page", en: "Write a page" },
                    { fr: "vous exprimez vos sentiments", en: "you express your feelings" }
                ]
            },
            {
                french: "Chaque √©t√©, de nombreux animaux domestiques sont abandonn√©s par leur propri√©taire au moment des vacances. En tant que responsable de la Soci√©t√© Protectrice des Animaux de votre ville, vous r√©digez un guide de recommandations.",
                chunks: [
                    { fr: "Chaque √©t√©", en: "Every summer" },
                    { fr: "de nombreux animaux domestiques", en: "many pets" },
                    { fr: "sont abandonn√©s", en: "are abandoned" },
                    { fr: "par leur propri√©taire", en: "by their owner" },
                    { fr: "au moment des vacances", en: "at vacation time" },
                    { fr: "En tant que responsable", en: "As the person in charge" },
                    { fr: "de la Soci√©t√© Protectrice des Animaux", en: "of the Animal Protection Society" }
                ]
            },
            {
                french: "Vous avez remarqu√© que l'utilisation du t√©l√©phone mobile pose des probl√®mes de politesse dans la vie de tous les jours. Dans un guide, vous proposez des recommandations pour utiliser le t√©l√©phone mobile de mani√®re polie.",
                chunks: [
                    { fr: "Vous avez remarqu√© que", en: "You have noticed that" },
                    { fr: "l'utilisation du t√©l√©phone mobile", en: "the use of mobile phones" },
                    { fr: "pose des probl√®mes de politesse", en: "causes politeness problems" },
                    { fr: "dans la vie de tous les jours", en: "in everyday life" },
                    { fr: "Dans un guide", en: "In a guide" },
                    { fr: "vous proposez des recommandations", en: "you propose recommendations" },
                    { fr: "de mani√®re polie", en: "in a polite manner" }
                ]
            },
            {
                french: "Vous avez observ√© un vol de v√©lo devant votre √©cole. Vous r√©digez une d√©claration pour la police.",
                chunks: [
                    { fr: "Vous avez observ√©", en: "You observed" },
                    { fr: "un vol de v√©lo", en: "a bicycle theft" },
                    { fr: "devant votre √©cole", en: "in front of your school" },
                    { fr: "Vous r√©digez", en: "You write" },
                    { fr: "une d√©claration", en: "a statement" },
                    { fr: "pour la police", en: "for the police" }
                ]
            },
            {
                french: "Avec quelques amis, vous voulez cr√©er une √©mission de radio. Dans une lettre, vous devez convaincre le directeur de la radio de la qualit√© de votre projet d'√©mission.",
                chunks: [
                    { fr: "Avec quelques amis", en: "With some friends" },
                    { fr: "vous voulez cr√©er", en: "you want to create" },
                    { fr: "une √©mission de radio", en: "a radio show" },
                    { fr: "Dans une lettre", en: "In a letter" },
                    { fr: "vous devez convaincre", en: "you must convince" },
                    { fr: "le directeur de la radio", en: "the radio director" },
                    { fr: "de la qualit√© de votre projet", en: "of the quality of your project" }
                ]
            },
            {
                french: "Au cours d'une discussion, un √©l√®ve de votre classe a r√©pondu √† la question ¬´ Que veux-tu faire plus tard ? ¬ª par ¬´ Je veux seulement gagner beaucoup d'argent. ¬ª √âcrivez-lui un courriel dans lequel vous r√©agissez √† cette r√©ponse.",
                chunks: [
                    { fr: "Au cours d'une discussion", en: "During a discussion" },
                    { fr: "un √©l√®ve de votre classe", en: "a student in your class" },
                    { fr: "a r√©pondu √† la question", en: "answered the question" },
                    { fr: "Que veux-tu faire plus tard", en: "What do you want to do later" },
                    { fr: "Je veux seulement gagner", en: "I only want to earn" },
                    { fr: "beaucoup d'argent", en: "a lot of money" },
                    { fr: "vous r√©agissez √† cette r√©ponse", en: "you react to this answer" }
                ]
            },
            {
                french: "Vous √™tes en vacances dans la famille de votre correspondant √©tranger. Vous constatez d'importantes diff√©rences culturelles entre vous-m√™me et votre famille d'accueil. Dans un courriel destin√© √† votre meilleur ami, racontez cette exp√©rience en insistant sur vos sentiments.",
                chunks: [
                    { fr: "Vous √™tes en vacances", en: "You are on vacation" },
                    { fr: "dans la famille de votre correspondant", en: "with your pen pal's family" },
                    { fr: "√©tranger", en: "foreign" },
                    { fr: "Vous constatez", en: "You notice" },
                    { fr: "d'importantes diff√©rences culturelles", en: "significant cultural differences" },
                    { fr: "votre famille d'accueil", en: "your host family" },
                    { fr: "en insistant sur vos sentiments", en: "emphasizing your feelings" }
                ]
            },
            {
                french: "Pour mieux pr√©parer les √©l√®ves de derni√®re ann√©e aux examens, la direction de votre √©cole veut organiser des cours du soir suppl√©mentaires et obligatoires. Comme vos camarades, vous n'√™tes pas d'accord. En tant que pr√©sident du comit√© des √©l√®ves, vous √©crivez une lettre √† la direction.",
                chunks: [
                    { fr: "Pour mieux pr√©parer", en: "To better prepare" },
                    { fr: "les √©l√®ves de derni√®re ann√©e", en: "final year students" },
                    { fr: "aux examens", en: "for exams" },
                    { fr: "la direction de votre √©cole", en: "your school administration" },
                    { fr: "veut organiser", en: "wants to organize" },
                    { fr: "des cours du soir", en: "evening classes" },
                    { fr: "suppl√©mentaires et obligatoires", en: "additional and mandatory" }
                ]
            },
            {
                french: "Par hasard, vous rencontrez une personne qui porte les m√™mes nom et pr√©nom que vous. R√©digez une page de votre journal intime dans laquelle vous racontez cette exp√©rience et pr√©sentez les r√©flexions qu'elle vous inspire.",
                chunks: [
                    { fr: "Par hasard", en: "By chance" },
                    { fr: "vous rencontrez une personne", en: "you meet a person" },
                    { fr: "qui porte les m√™mes nom et pr√©nom", en: "who has the same first and last name" },
                    { fr: "que vous", en: "as you" },
                    { fr: "R√©digez une page", en: "Write a page" },
                    { fr: "vous racontez cette exp√©rience", en: "you tell about this experience" },
                    { fr: "les r√©flexions qu'elle vous inspire", en: "the thoughts it inspires in you" }
                ]
            },
            {
                french: "Vous participez √† un concours vous invitant √† concevoir un projet innovatif pour pr√©server les espaces verts dans votre ville. Vous communiquez vos id√©es aux organisateurs du concours. R√©digez un texte o√π vous d√©crivez votre projet et expliquez pourquoi il devrait √™tre choisi.",
                chunks: [
                    { fr: "Vous participez √† un concours", en: "You participate in a contest" },
                    { fr: "vous invitant √† concevoir", en: "inviting you to design" },
                    { fr: "un projet innovatif", en: "an innovative project" },
                    { fr: "pour pr√©server les espaces verts", en: "to preserve green spaces" },
                    { fr: "dans votre ville", en: "in your city" },
                    { fr: "Vous communiquez vos id√©es", en: "You communicate your ideas" },
                    { fr: "aux organisateurs du concours", en: "to the contest organizers" },
                    { fr: "pourquoi il devrait √™tre choisi", en: "why it should be chosen" }
                ]
            },
            {
                french: "Comme chaque √©l√®ve de votre classe, vous venez de faire un stage d'une semaine dans une entreprise. Vous devez raconter votre exp√©rience √† votre professeur principal. √âcrivez un texte dans lequel vous d√©crivez cette exp√©rience et expliquez pourquoi elle vous a √©t√© b√©n√©fique.",
                chunks: [
                    { fr: "Comme chaque √©l√®ve", en: "Like every student" },
                    { fr: "de votre classe", en: "in your class" },
                    { fr: "vous venez de faire un stage", en: "you just did an internship" },
                    { fr: "d'une semaine", en: "of one week" },
                    { fr: "dans une entreprise", en: "in a company" },
                    { fr: "Vous devez raconter votre exp√©rience", en: "You must tell about your experience" },
                    { fr: "√† votre professeur principal", en: "to your main teacher" },
                    { fr: "pourquoi elle vous a √©t√© b√©n√©fique", en: "why it was beneficial to you" }
                ]
            },
            {
                french: "Vous venez de lire un rapport qui d√©montre que le redoublement scolaire n'est pas une bonne solution. Vous voulez partager votre avis avec vos camarades de classe. R√©digez un texte o√π vous donnez votre opinion sur le redoublement et sugg√©rez au moins une solution pour encourager la r√©ussite des √©l√®ves √† l'√©cole.",
                chunks: [
                    { fr: "Vous venez de lire un rapport", en: "You just read a report" },
                    { fr: "qui d√©montre que", en: "that demonstrates that" },
                    { fr: "le redoublement scolaire", en: "grade repetition" },
                    { fr: "n'est pas une bonne solution", en: "is not a good solution" },
                    { fr: "Vous voulez partager votre avis", en: "You want to share your opinion" },
                    { fr: "avec vos camarades de classe", en: "with your classmates" },
                    { fr: "sugg√©rez au moins une solution", en: "suggest at least one solution" },
                    { fr: "pour encourager la r√©ussite des √©l√®ves", en: "to encourage student success" }
                ]
            },
            {
                french: "√Ä cause du tr√®s faible nombre d'√©tudiants int√©ress√©s, la direction de votre √©cole a annonc√© son intention de supprimer les cours de fran√ßais l'ann√©e prochaine. Vous n'√™tes pas d'accord. Afin d'encourager plus d'√©tudiants √† suivre les cours de fran√ßais, vous √©crivez un d√©pliant dans lequel vous mettez en valeur les avantages de la connaissance du fran√ßais.",
                chunks: [
                    { fr: "√Ä cause du tr√®s faible nombre", en: "Because of the very low number" },
                    { fr: "d'√©tudiants int√©ress√©s", en: "of interested students" },
                    { fr: "la direction de votre √©cole", en: "your school administration" },
                    { fr: "a annonc√© son intention", en: "announced its intention" },
                    { fr: "de supprimer les cours de fran√ßais", en: "to eliminate French classes" },
                    { fr: "l'ann√©e prochaine", en: "next year" },
                    { fr: "Vous n'√™tes pas d'accord", en: "You don't agree" },
                    { fr: "vous mettez en valeur les avantages", en: "you highlight the advantages" }
                ]
            },
            {
                french: "Vos parents disent constamment que vous passez trop de temps √† jouer √† des jeux vid√©o. Vous reconnaissez qu'ils ont raison sur certains points, mais leur attitude n√©gative vous d√©pla√Æt. Dans une page de votre blog, vous √©crivez vos r√©flexions sur le c√¥t√© positif des jeux vid√©o, √† la fois sur le plan personnel, social et scolaire.",
                chunks: [
                    { fr: "Vos parents disent constamment", en: "Your parents constantly say" },
                    { fr: "que vous passez trop de temps", en: "that you spend too much time" },
                    { fr: "√† jouer √† des jeux vid√©o", en: "playing video games" },
                    { fr: "Vous reconnaissez qu'ils ont raison", en: "You acknowledge they are right" },
                    { fr: "sur certains points", en: "on certain points" },
                    { fr: "leur attitude n√©gative vous d√©pla√Æt", en: "their negative attitude displeases you" },
                    { fr: "le c√¥t√© positif des jeux vid√©o", en: "the positive side of video games" },
                    { fr: "sur le plan personnel, social et scolaire", en: "on a personal, social and academic level" }
                ]
            },
            {
                french: "Un restaurant fast-food de votre ville offre maintenant des tarifs r√©duits aux √©tudiants de votre √©cole. Vous vous inqui√©tez des effets n√©gatifs de cette nourriture sur leur sant√©. En tant que repr√©sentant du conseil des √©tudiants, vous √©crivez une brochure pour souligner √† vos camarades les dangers que repr√©sente la nourriture fast-food, et pour sugg√©rer comment consommer ce type de nourriture de fa√ßon responsable.",
                chunks: [
                    { fr: "Un restaurant fast-food", en: "A fast-food restaurant" },
                    { fr: "de votre ville", en: "in your city" },
                    { fr: "offre maintenant des tarifs r√©duits", en: "now offers reduced rates" },
                    { fr: "aux √©tudiants de votre √©cole", en: "to students of your school" },
                    { fr: "Vous vous inqui√©tez", en: "You worry" },
                    { fr: "des effets n√©gatifs", en: "about the negative effects" },
                    { fr: "les dangers que repr√©sente", en: "the dangers that represents" },
                    { fr: "de fa√ßon responsable", en: "in a responsible way" }
                ]
            },
            {
                french: "Pendant vos vacances dans un pays francophone, vous avez travaill√© pour une organisation qui imposait un code vestimentaire. Dans votre blog, expliquez les r√®gles de ce code vestimentaire et exprimez ce que vous avez ressenti en les respectant.",
                chunks: [
                    { fr: "Pendant vos vacances", en: "During your vacation" },
                    { fr: "dans un pays francophone", en: "in a French-speaking country" },
                    { fr: "vous avez travaill√©", en: "you worked" },
                    { fr: "pour une organisation", en: "for an organization" },
                    { fr: "qui imposait un code vestimentaire", en: "that imposed a dress code" },
                    { fr: "Dans votre blog", en: "In your blog" },
                    { fr: "expliquez les r√®gles", en: "explain the rules" },
                    { fr: "ce que vous avez ressenti", en: "what you felt" }
                ]
            },
            {
                french: "Vous souhaitez que votre √©cole offre des cours de secourisme √† tous les √©tudiants, parce que savoir porter assistance √† des personnes en danger peut √™tre utile aux √©tudiants et √† l'√©cole. Vous √©crivez √† la direction pour demander la mise en place de cours de secourisme et pr√©senter vos arguments. R√©digez la lettre.",
                chunks: [
                    { fr: "Vous souhaitez que votre √©cole offre", en: "You wish that your school would offer" },
                    { fr: "des cours de secourisme", en: "first aid courses" },
                    { fr: "√† tous les √©tudiants", en: "to all students" },
                    { fr: "savoir porter assistance", en: "knowing how to provide assistance" },
                    { fr: "√† des personnes en danger", en: "to people in danger" },
                    { fr: "peut √™tre utile", en: "can be useful" },
                    { fr: "Vous √©crivez √† la direction", en: "You write to the administration" },
                    { fr: "la mise en place de cours", en: "the implementation of courses" }
                ]
            },
            {
                french: "La direction de votre √©cole s'inqui√®te du comportement inappropri√© de nombreux √©tudiants lors d'un √©v√©nement organis√© r√©cemment dans l'√©tablissement. Dans un rapport, en tant que membre du Conseil des √âtudiants, vous exposez √† la direction les probl√®mes rencontr√©s, pourquoi ils se sont produits, et comment ils pourraient √™tre √©vit√©s √† l'avenir. R√©digez ce rapport.",
                chunks: [
                    { fr: "La direction de votre √©cole", en: "Your school administration" },
                    { fr: "s'inqui√®te du comportement inappropri√©", en: "is worried about inappropriate behavior" },
                    { fr: "de nombreux √©tudiants", en: "of many students" },
                    { fr: "lors d'un √©v√©nement", en: "during an event" },
                    { fr: "organis√© r√©cemment", en: "recently organized" },
                    { fr: "en tant que membre du Conseil", en: "as a Council member" },
                    { fr: "les probl√®mes rencontr√©s", en: "the problems encountered" },
                    { fr: "comment ils pourraient √™tre √©vit√©s", en: "how they could be avoided" }
                ]
            }
        ];

        // Game state for Find the French
        let frenchCurrentPromptIndex = 0;
        let frenchCurrentChunkIndex = 0;
        let frenchFoundChunks = [];
        let frenchScore = 0;
        let frenchShuffledPrompts = [];
        let frenchShuffledChunks = [];

        // Game state for Find the English
        let englishCurrentPromptIndex = 0;
        let englishCurrentChunkIndex = 0;
        let englishFoundChunks = [];
        let englishScore = 0;
        let englishShuffledPrompts = [];
        let englishShuffledChunks = [];
        let currentFrenchAudio = null;

        // Chunk logging
        let sessionChunks = [];
        let frenchModeCount = 0;
        let englishModeCount = 0;

        let isPlaying = false;
        const music = document.getElementById('backgroundMusic');
        music.volume = 0.5;

        // Speech Synthesis for French audio
        let frenchVoice = null;
        window.speechSynthesis.onvoiceschanged = () => {
            const voices = window.speechSynthesis.getVoices();
            frenchVoice = voices.find(voice => voice.lang.startsWith('fr')) || voices[0];
        };

        // Audio Context for feedback sounds
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playCorrectSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
            oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
            oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
            
            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.4);
        }

        function playIncorrectSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(392.00, audioContext.currentTime); // G4
            oscillator.frequency.setValueAtTime(329.63, audioContext.currentTime + 0.15); // E4
            
            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        function toggleMusic() {
            const btn = document.getElementById('musicToggle');
            
            if (isPlaying) {
                music.pause();
                btn.textContent = 'üéµ';
                isPlaying = false;
            } else {
                const playPromise = music.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        btn.textContent = '‚è∏Ô∏è';
                        isPlaying = true;
                    }).catch(error => {
                        console.error('Playback error:', error);
                        btn.textContent = 'üéµ';
                        isPlaying = false;
                        
                        if (error.name === 'NotAllowedError') {
                            alert('üéµ Music playback blocked by browser. Click again to play!');
                        } else {
                            alert('‚ö†Ô∏è Unable to play music: ' + error.message);
                        }
                    });
                }
            }
        }

        function changeVolume(value) {
            music.volume = value / 100;
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            if (tabName === 'frenchGame') {
                document.querySelector('.tab:nth-child(1)').classList.add('active');
                document.getElementById('frenchGameTab').classList.add('active');
                document.getElementById('progressBarContainer').style.display = 'block';
                updateFrenchProgress();
            } else if (tabName === 'englishGame') {
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                document.getElementById('englishGameTab').classList.add('active');
                document.getElementById('progressBarContainer').style.display = 'block';
                updateEnglishProgress();
            } else {
                document.querySelector('.tab:nth-child(3)').classList.add('active');
                document.getElementById('tipsTab').classList.add('active');
                document.getElementById('progressBarContainer').style.display = 'none';
            }
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // === FIND THE FRENCH GAME ===

        function initFrenchGame() {
            frenchShuffledPrompts = shuffleArray(prompts);
            frenchCurrentPromptIndex = 0;
            frenchScore = 0;
            document.getElementById('frenchScore').textContent = frenchScore;
            document.getElementById('frenchCompletion').classList.remove('show');
            document.getElementById('frenchGameArea').style.display = 'block';
            loadFrenchPrompt();
        }

        function loadFrenchPrompt() {
            if (frenchCurrentPromptIndex >= frenchShuffledPrompts.length) {
                showFrenchCompletion();
                return;
            }

            const prompt = frenchShuffledPrompts[frenchCurrentPromptIndex];
            frenchShuffledChunks = shuffleArray([...prompt.chunks]).slice(0, 6);
            frenchFoundChunks = [];
            frenchCurrentChunkIndex = 0;

            document.getElementById('frenchPromptNum').textContent = frenchCurrentPromptIndex + 1;
            document.getElementById('frenchFoundCount').textContent = '0/6';
            document.getElementById('frenchNextBtn').classList.remove('show');

            displayFrenchText();
            showNextFrenchTarget();
            updateFrenchProgress();
        }

        function displayFrenchText() {
            const prompt = frenchShuffledPrompts[frenchCurrentPromptIndex];
            
            let chunkPositions = [];
            prompt.chunks.forEach((chunk, index) => {
                let pos = 0;
                let searchPos = 0;
                while ((pos = prompt.french.indexOf(chunk.fr, searchPos)) !== -1) {
                    chunkPositions.push({
                        start: pos,
                        end: pos + chunk.fr.length,
                        text: chunk.fr,
                        index: index
                    });
                    searchPos = pos + 1;
                }
            });

            chunkPositions.sort((a, b) => a.start - b.start);

            let filteredChunks = [];
            chunkPositions.forEach(chunk => {
                let overlaps = filteredChunks.some(existing => 
                    (chunk.start >= existing.start && chunk.start < existing.end) ||
                    (chunk.end > existing.start && chunk.end <= existing.end) ||
                    (chunk.start <= existing.start && chunk.end >= existing.end)
                );
                if (!overlaps) {
                    filteredChunks.push(chunk);
                }
            });

            filteredChunks.sort((a, b) => a.start - b.start);

            let html = '';
            let lastPos = 0;
            filteredChunks.forEach(chunk => {
                html += prompt.french.substring(lastPos, chunk.start);
                html += `<span class="chunk" data-chunk="${chunk.index}">${chunk.text}</span>`;
                lastPos = chunk.end;
            });
            html += prompt.french.substring(lastPos);

            document.getElementById('frenchText').innerHTML = html;

            document.querySelectorAll('#frenchText .chunk').forEach(chunk => {
                chunk.addEventListener('click', handleFrenchChunkClick);
            });
        }

        function showNextFrenchTarget() {
            if (frenchCurrentChunkIndex < frenchShuffledChunks.length) {
                document.getElementById('frenchTargetText').textContent = frenchShuffledChunks[frenchCurrentChunkIndex].en;
            }
        }

        function handleFrenchChunkClick(e) {
            const clickedChunk = e.target;
            const chunkIndex = parseInt(clickedChunk.dataset.chunk);
            const prompt = frenchShuffledPrompts[frenchCurrentPromptIndex];
            const targetChunk = frenchShuffledChunks[frenchCurrentChunkIndex];

            if (prompt.chunks[chunkIndex].en === targetChunk.en) {
                clickedChunk.classList.add('correct');
                clickedChunk.removeEventListener('click', handleFrenchChunkClick);
                frenchFoundChunks.push(chunkIndex);
                frenchScore += 10;
                playCorrectSound();
                showFeedback('‚úì Correct!', 'correct');
                
                // Log the chunk
                logChunk(targetChunk.en, targetChunk.fr, 'french');
                
                frenchCurrentChunkIndex++;
                document.getElementById('frenchFoundCount').textContent = `${frenchCurrentChunkIndex}/6`;
                document.getElementById('frenchScore').textContent = frenchScore;
                updateFrenchProgress();

                setTimeout(() => {
                    if (frenchCurrentChunkIndex < 6) {
                        showNextFrenchTarget();
                    } else {
                        document.getElementById('frenchNextBtn').classList.add('show');
                    }
                }, 500);
            } else {
                clickedChunk.classList.add('wrong');
                playIncorrectSound();
                showFeedback('‚úó Try again', 'wrong');
                setTimeout(() => {
                    clickedChunk.classList.remove('wrong');
                }, 500);
            }
        }

        function updateFrenchProgress() {
            const totalChunks = frenchShuffledPrompts.length * 6;
            const completedChunks = (frenchCurrentPromptIndex * 6) + frenchCurrentChunkIndex;
            const percentage = (completedChunks / totalChunks) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function showFrenchCompletion() {
            document.getElementById('frenchGameArea').style.display = 'none';
            document.getElementById('frenchCompletion').classList.add('show');
            document.getElementById('frenchFinalScore').textContent = frenchScore;
        }

        function restartFrenchGame() {
            initFrenchGame();
        }

        document.getElementById('frenchNextBtn').addEventListener('click', () => {
            frenchCurrentPromptIndex++;
            loadFrenchPrompt();
        });

        // === FIND THE ENGLISH GAME ===

        function initEnglishGame() {
            englishShuffledPrompts = shuffleArray(prompts);
            englishCurrentPromptIndex = 0;
            englishScore = 0;
            document.getElementById('englishScore').textContent = englishScore;
            document.getElementById('englishCompletion').classList.remove('show');
            document.getElementById('englishGameArea').style.display = 'block';
            loadEnglishPrompt();
        }

        function loadEnglishPrompt() {
            if (englishCurrentPromptIndex >= englishShuffledPrompts.length) {
                showEnglishCompletion();
                return;
            }

            const prompt = englishShuffledPrompts[englishCurrentPromptIndex];
            englishShuffledChunks = shuffleArray([...prompt.chunks]).slice(0, 6);
            englishFoundChunks = [];
            englishCurrentChunkIndex = 0;

            document.getElementById('englishPromptNum').textContent = englishCurrentPromptIndex + 1;
            document.getElementById('englishFoundCount').textContent = '0/6';
            document.getElementById('englishNextBtn').classList.remove('show');

            displayEnglishText();
            updateEnglishProgress();
        }

        function displayEnglishText() {
            const prompt = englishShuffledPrompts[englishCurrentPromptIndex];
            
            // Create full English text from all chunks
            let englishFullText = prompt.chunks.map(c => c.en).join(' ¬∑ ');
            
            let chunkPositions = [];
            prompt.chunks.forEach((chunk, index) => {
                let pos = 0;
                let searchPos = 0;
                while ((pos = englishFullText.indexOf(chunk.en, searchPos)) !== -1) {
                    chunkPositions.push({
                        start: pos,
                        end: pos + chunk.en.length,
                        text: chunk.en,
                        index: index
                    });
                    searchPos = pos + 1;
                }
            });

            chunkPositions.sort((a, b) => a.start - b.start);

            let filteredChunks = [];
            chunkPositions.forEach(chunk => {
                let overlaps = filteredChunks.some(existing => 
                    (chunk.start >= existing.start && chunk.start < existing.end) ||
                    (chunk.end > existing.start && chunk.end <= existing.end) ||
                    (chunk.start <= existing.start && chunk.end >= existing.end)
                );
                if (!overlaps) {
                    filteredChunks.push(chunk);
                }
            });

            filteredChunks.sort((a, b) => a.start - b.start);

            let html = '';
            let lastPos = 0;
            filteredChunks.forEach(chunk => {
                html += englishFullText.substring(lastPos, chunk.start);
                html += `<span class="chunk" data-chunk="${chunk.index}">${chunk.text}</span>`;
                lastPos = chunk.end;
            });
            html += englishFullText.substring(lastPos);

            document.getElementById('englishText').innerHTML = html;

            document.querySelectorAll('#englishText .chunk').forEach(chunk => {
                chunk.addEventListener('click', handleEnglishChunkClick);
            });
        }

        function playFrenchAudio() {
            if (englishCurrentChunkIndex >= englishShuffledChunks.length) return;

            const targetChunk = englishShuffledChunks[englishCurrentChunkIndex];
            let frenchText = targetChunk.fr;

            // Remove parenthetical content (like (e), (ne), (rice), etc.) for pronunciation
            frenchText = frenchText.replace(/\([^)]*\)/g, '');

            // Cancel any ongoing speech
            window.speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(frenchText);
            utterance.lang = 'fr-FR';
            utterance.rate = 0.8;
            utterance.pitch = 1;
            
            if (frenchVoice) {
                utterance.voice = frenchVoice;
            }

            // Visual feedback
            const btn = document.getElementById('playAudioBtn');
            btn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                btn.style.transform = 'scale(1)';
            }, 200);

            window.speechSynthesis.speak(utterance);
        }

        function handleEnglishChunkClick(e) {
            const clickedChunk = e.target;
            const chunkIndex = parseInt(clickedChunk.dataset.chunk);
            const prompt = englishShuffledPrompts[englishCurrentPromptIndex];
            const targetChunk = englishShuffledChunks[englishCurrentChunkIndex];

            if (prompt.chunks[chunkIndex].fr === targetChunk.fr) {
                clickedChunk.classList.add('correct');
                clickedChunk.removeEventListener('click', handleEnglishChunkClick);
                englishFoundChunks.push(chunkIndex);
                englishScore += 10;
                playCorrectSound();
                showFeedback('‚úì Correct!', 'correct');
                
                // Log the chunk
                logChunk(targetChunk.en, targetChunk.fr, 'english');
                
                englishCurrentChunkIndex++;
                document.getElementById('englishFoundCount').textContent = `${englishCurrentChunkIndex}/6`;
                document.getElementById('englishScore').textContent = englishScore;
                updateEnglishProgress();

                setTimeout(() => {
                    if (englishCurrentChunkIndex < 6) {
                        // Auto-play next audio
                        playFrenchAudio();
                    } else {
                        document.getElementById('englishNextBtn').classList.add('show');
                    }
                }, 500);
            } else {
                clickedChunk.classList.add('wrong');
                playIncorrectSound();
                showFeedback('‚úó Try again', 'wrong');
                setTimeout(() => {
                    clickedChunk.classList.remove('wrong');
                }, 500);
            }
        }

        function updateEnglishProgress() {
            const totalChunks = englishShuffledPrompts.length * 6;
            const completedChunks = (englishCurrentPromptIndex * 6) + englishCurrentChunkIndex;
            const percentage = (completedChunks / totalChunks) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function showEnglishCompletion() {
            document.getElementById('englishGameArea').style.display = 'none';
            document.getElementById('englishCompletion').classList.add('show');
            document.getElementById('englishFinalScore').textContent = englishScore;
        }

        function restartEnglishGame() {
            initEnglishGame();
        }

        document.getElementById('englishNextBtn').addEventListener('click', () => {
            englishCurrentPromptIndex++;
            loadEnglishPrompt();
        });

        // === SHARED FUNCTIONS ===

        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type} show`;
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 800);
        }

        // === CHUNK LOGGER FUNCTIONS ===

        function toggleLogger() {
            const logger = document.getElementById('chunkLogger');
            const badge = document.getElementById('loggerBadge');
            const isCollapsed = logger.classList.toggle('collapsed');
            
            // Hide badge when expanded (user can see the content)
            if (!isCollapsed && sessionChunks.length > 0) {
                badge.style.opacity = '0.3';
            } else if (sessionChunks.length > 0) {
                badge.style.opacity = '1';
            }
        }

        function logChunk(english, french, mode) {
            // Avoid duplicates
            const exists = sessionChunks.some(c => c.english === english && c.french === french);
            if (exists) return;

            sessionChunks.push({ english, french, mode });
            
            if (mode === 'french') {
                frenchModeCount++;
            } else {
                englishModeCount++;
            }

            updateLogDisplay();
        }

        function updateLogDisplay() {
            const logArea = document.getElementById('chunkLogArea');
            const tsvContent = sessionChunks.map(chunk => `${chunk.english}\t${chunk.french}`).join('\n');
            logArea.value = tsvContent;

            document.getElementById('totalChunks').textContent = sessionChunks.length;
            document.getElementById('frenchModeChunks').textContent = frenchModeCount;
            document.getElementById('englishModeChunks').textContent = englishModeCount;

            // Update badge
            const badge = document.getElementById('loggerBadge');
            if (sessionChunks.length > 0) {
                badge.textContent = sessionChunks.length;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        function copyToClipboard() {
            const logArea = document.getElementById('chunkLogArea');
            const content = logArea.value;
            
            if (!content) {
                showFeedback('‚ùå No chunks to copy', 'wrong');
                return;
            }

            // Try modern clipboard API first
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(content).then(() => {
                    showFeedback('üìã Copied!', 'correct');
                }).catch(() => {
                    // Fallback to old method
                    fallbackCopy(logArea);
                });
            } else {
                fallbackCopy(logArea);
            }
        }

        function fallbackCopy(logArea) {
            logArea.select();
            try {
                document.execCommand('copy');
                showFeedback('üìã Copied!', 'correct');
            } catch (err) {
                showFeedback('‚ùå Copy failed', 'wrong');
            }
        }

        function exportTSV() {
            const logArea = document.getElementById('chunkLogArea');
            const content = logArea.value;
            
            if (!content) {
                showFeedback('‚ùå No chunks to export', 'wrong');
                return;
            }

            const blob = new Blob([content], { type: 'text/tab-separated-values' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `french-chunks-${new Date().toISOString().split('T')[0]}.tsv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            showFeedback('üíæ Exported!', 'correct');
        }

        function clearLog() {
            if (sessionChunks.length === 0) {
                showFeedback('‚ö†Ô∏è Log is already empty', 'wrong');
                return;
            }

            if (confirm('Are you sure you want to clear the chunk log?')) {
                sessionChunks = [];
                frenchModeCount = 0;
                englishModeCount = 0;
                updateLogDisplay();
                showFeedback('üóëÔ∏è Log cleared', 'correct');
            }
        }

        // Initialize both games on load
        initFrenchGame();
        initEnglishGame();
    </script>
</body>
</html>