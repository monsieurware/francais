<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2083 - Grand Corps Malade | Module Interactif</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .hero-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #3a6fb3 100%);
            color: white;
            padding: 50px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
        }
        
        .hero-header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .hero-header .subtitle {
            font-size: 1.5em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        .emoji-divider {
            font-size: 2em;
            margin: 10px 0;
        }
        
        .video-wrapper {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: visible;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        
        .card-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }
        
        .card-title {
            font-size: 2em;
            color: #1e3c72;
            font-weight: bold;
        }
        
        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .info-box h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
        }
        
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .vocab-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .vocab-card:hover {
            transform: scale(1.05) rotate(1deg);
        }
        
        .vocab-word {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .vocab-definition {
            font-size: 1em;
            opacity: 0.95;
        }
        
        .mcq-question {
            background: #f8f9fa;
            border-left: 6px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .mcq-question h4 {
            color: #1e3c72;
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        
        .mcq-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .mcq-option {
            background: white;
            border: 3px solid #ddd;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
        }
        
        .mcq-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(5px);
        }
        
        .mcq-option.selected {
            border-color: #667eea;
            background: #e3f2fd;
            font-weight: bold;
        }
        
        .mcq-option.correct {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .mcq-option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }
        
        .mcq-option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 15px;
            font-size: 1em;
        }
        
        .mcq-option.correct .mcq-option-letter {
            background: #28a745;
        }
        
        .mcq-option.incorrect .mcq-option-letter {
            background: #dc3545;
        }
        
        .ordering-container {
            background: #fff3cd;
            padding: 25px;
            border-radius: 15px;
            border: 3px solid #ffc107;
            margin: 20px 0;
        }
        
        .ordering-title {
            color: #856404;
            font-size: 1.4em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .ordering-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }
        
        .ordering-item {
            background: white;
            border: 3px solid #ffc107;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: move;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .ordering-item:hover {
            background: #fffbf0;
            transform: scale(1.02);
            box-shadow: 0 5px 12px rgba(0,0,0,0.15);
        }
        
        .ordering-item.dragging {
            opacity: 0.5;
            transform: rotate(3deg);
        }
        
        .drag-handle {
            font-size: 1.8em;
            margin-right: 15px;
            color: #ffc107;
        }
        
        .ordering-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: #ffc107;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 15px;
            font-size: 1em;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
            color: white;
        }
        
        .feedback-box {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feedback-box.success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
            border: 3px solid #4e9f27;
        }
        
        .feedback-box.partial {
            background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
            color: #333;
            border: 3px solid #e68a00;
        }
        
        .feedback-box.error {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
            border: 3px solid #d10068;
        }
        
        .drag-drop-activity {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .available-items {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 20px 0;
            min-height: 80px;
            padding: 15px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            border: 2px dashed #667eea;
        }
        
        .drop-zones {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .drop-zone {
            background: rgba(255,255,255,0.5);
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 20px;
            min-height: 300px;
        }
        
        .drop-zone.drag-over {
            background: rgba(255,255,255,0.8);
            border-color: #1e3c72;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }
        
        .drop-zone-title {
            text-align: center;
            font-size: 1.4em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .draggable {
            background: white;
            border: 3px solid #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: move;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
            font-size: 1em;
            display: inline-block;
        }
        
        .draggable:hover {
            background: #f0f4ff;
            transform: scale(1.05);
            box-shadow: 0 5px 12px rgba(0,0,0,0.2);
        }
        
        .draggable.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        
        .dropped {
            margin-bottom: 10px;
        }
        
        .dropped .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .dropped .remove-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }
        
        .score-display {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .progress-bar {
            background: #e0e0e0;
            border-radius: 25px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 25px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .theme-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        
        .lyrics-container {
            background: #f8f9fa;
            padding: 30px;
            padding-top: 50px;
            padding-bottom: 30px;
            border-radius: 15px;
            margin: 20px 0;
            line-height: 2;
            font-size: 1.1em;
            border: 3px solid #667eea;
        }
        
        .lyrics-container p {
            margin: 10px 0;
            position: relative;
        }
        
        .lyrics-container .stanza {
            margin-bottom: 20px;
            position: relative;
        }
        
        .vocab-hover {
            color: #667eea;
            font-weight: bold;
            border-bottom: 2px dotted #667eea;
            cursor: help;
            position: relative;
            display: inline-block;
        }
        
        .vocab-hover:hover {
            color: #1e3c72;
        }
        
        .vocab-tooltip {
            visibility: hidden;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            text-align: center;
            padding: 12px 16px;
            border-radius: 10px;
            position: absolute;
            z-index: 9999;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            min-width: 200px;
            max-width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            font-size: 0.9em;
            font-weight: normal;
            line-height: 1.4;
            white-space: normal;
        }
        
        .vocab-tooltip::after {
            content: "";
            position: absolute;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            top: 100%;
            border-color: #2a5298 transparent transparent transparent;
        }
        
        /* When tooltip is below word (dynamically applied by JS) */
        .vocab-tooltip[style*="top: 125%"]::after {
            bottom: 100%;
            top: auto;
            border-color: transparent transparent #2a5298 transparent;
        }
        
        .vocab-hover:hover .vocab-tooltip {
            visibility: visible;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-5px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .lyrics-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .speaker-label {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .speaker-grandson {
            background: #f093fb;
        }
        
        .speaker-grandfather {
            background: #56ab2f;
        }
        
        .simple-explanation {
            background: #e3f2fd;
            border-left: 5px solid #2196F3;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 3px solid #fdcb6e;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        
        @media (max-width: 768px) {
            .hero-header h1 {
                font-size: 2em;
            }
            
            .drop-zones {
                grid-template-columns: 1fr;
            }
            
            .vocab-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero-header">
            <div class="emoji-divider">üåç üéµ üìù</div>
            <h1>"2083"</h1>
            <p class="subtitle">Grand Corps Malade</p>
            <div class="emoji-divider">üåä üî• üå™Ô∏è</div>
        </div>

        <div class="card" style="margin-top: 40px;">
            <div class="card-header">
                <div class="card-icon">üéµ</div>
                <div class="card-title">Paroles de la Chanson</div>
            </div>
            
            <div class="lyrics-header">
                <h3>üí° Passez votre souris sur les mots soulign√©s pour voir leur d√©finition !</h3>
            </div>
            
            <div class="lyrics-container" id="lyrics-container">
                <div class="stanza">
                    <span class="speaker-label speaker-grandson">üë¶ Le petit-fils (2083)</span>
                    <p>Cher Fabien, tu ne me connais pas encore, je suis ton petit-fils</p>
                    <p>Je t'√©cris depuis l'ann√©e 2083</p>
                    <p>Je te passe ce message afin que ton <span class="vocab-hover">√©poque<span class="vocab-tooltip">p√©riode de temps, g√©n√©ration</span></span> r√©agisse</p>
                    <p>Ici la plan√®te va mal, il faut absolument que tu me croies</p>
                </div>
                
                <div class="stanza">
                    <p>Jakarta, Lagos, New-York ont disparu <span class="vocab-hover">sous la mer<span class="vocab-tooltip">submerg√©es par l'eau de l'oc√©an</span></span></p>
                    <p>Mais aussi Venise, Londres, et un tiers des Pays-Bas</p>
                    <p>Tombouctou et le nord Mali <span class="vocab-hover">ensevelis<span class="vocab-tooltip">recouverts, enterr√©s</span></span> sous le d√©sert</p>
                    <p>Et le <span class="vocab-hover">fleuve<span class="vocab-tooltip">grande rivi√®re</span></span> Niger n'a plus une seule goutte d'eau dans ses bras</p>
                </div>
                
                <div class="stanza">
                    <p>Les villes c√¥ti√®res qui luttent contre <span class="vocab-hover">la mont√©e des eaux<span class="vocab-tooltip">quand le niveau de la mer augmente</span></span></p>
                    <p>Ont beau construire des <span class="vocab-hover">digues<span class="vocab-tooltip">barri√®res contre l'eau</span></span>, des barrages et des murailles</p>
                    <p>Elles <span class="vocab-hover">ne p√®sent pas bien lourd<span class="vocab-tooltip">expression : ne sont pas efficaces</span></span> et √©clatent vite en morceaux</p>
                    <p>Quand les <span class="vocab-hover">cyclones<span class="vocab-tooltip">temp√™tes violentes tropicales</span></span> et ouragans viennent finir le travail</p>
                </div>
                
                <div class="stanza">
                    <p>Dans plusieurs pays d'Afrique et d'Asie du Sud-Est</p>
                    <p>Mais aussi √† Ath√®nes, au Caire, et quelques autres √©lues</p>
                    <p>Il fait souvent 60 degr√©s, chaque √©t√© est un test</p>
                    <p>O√π les riches vivent <span class="vocab-hover">sous la clim<span class="vocab-tooltip">avec la climatisation (air conditionn√©)</span></span> et les pauvres ne vivent plus</p>
                </div>
                
                <div class="stanza">
                    <p>Et les changements climatiques ont √©t√© tellement violents</p>
                    <p>Que les <span class="vocab-hover">√©cosyst√®mes<span class="vocab-tooltip">environnements naturels avec animaux et plantes</span></span> n'ont pas eu le temps de s'adapter</p>
                    <p>Un million d'<span class="vocab-hover">esp√®ces<span class="vocab-tooltip">types d'animaux ou de plantes</span></span> en plus des fameux ours blancs</p>
                    <p>Ont disparu pour toujours, elles n'ont pas pu r√©sister</p>
                </div>
                
                <div class="stanza">
                    <p>L'ann√©e derni√®re, New-Delhi a √©t√© enti√®rement <span class="vocab-hover">√©vacu√©e<span class="vocab-tooltip">abandonn√©e, tout le monde est parti</span></span></p>
                    <p><span class="vocab-hover">Asphyxi√©e<span class="vocab-tooltip">√©touff√©e, sans air pur</span></span> qu'elle √©tait sous un nuage de pollution</p>
                    <p>√Ä P√©kin et Shanghai, une nouvelle loi vient de passer</p>
                    <p>Sans <span class="vocab-hover">masque √† oxyg√®ne<span class="vocab-tooltip">√©quipement pour respirer de l'air pur</span></span>, il est interdit de sortir de sa maison</p>
                </div>
                
                <div class="stanza">
                    <p>Les sols sont tellement secs qu'il n'y a plus de <span class="vocab-hover">vigne<span class="vocab-tooltip">plante pour faire du vin</span></span> en France</p>
                    <p>Et dans plusieurs pays du Sud, <span class="vocab-hover">l'agriculture<span class="vocab-tooltip">cultiver des plantes pour manger</span></span> est impossible</p>
                    <p>Quand les <span class="vocab-hover">fermiers<span class="vocab-tooltip">agriculteurs, paysans</span></span> n'ont plus d'eau, on est au-del√† de l'urgence</p>
                    <p><span class="vocab-hover">La famine<span class="vocab-tooltip">manque extr√™me de nourriture</span></span> et la mis√®re sont devenues <span class="vocab-hover">irr√©versibles<span class="vocab-tooltip">impossibles √† changer</span></span></p>
                </div>
                
                <div class="stanza">
                    <p>La s√©cheresse et la chaleur ont provoqu√© des millions de morts</p>
                    <p>Et des millions de <span class="vocab-hover">r√©fugi√©s<span class="vocab-tooltip">personnes qui quittent leur pays</span></span> qui <span class="vocab-hover">fuient<span class="vocab-tooltip">s'√©chappent, partent rapidement</span></span> leur pays</p>
                    <p>Les fronti√®res sont des zones de combat dans les √âtats du nord</p>
                    <p>C'est la guerre en Europe, en Am√©rique et en Asie</p>
                </div>
                
                <div class="stanza">
                    <span class="speaker-label speaker-grandfather">üë¥ Le grand-p√®re (2023)</span>
                    <p>Cher petit-fils, j'ai lu ton courrier avec <span class="vocab-hover">effroi<span class="vocab-tooltip">grande peur, horreur</span></span></p>
                    <p>Je crois bien avoir <span class="vocab-hover">saisi<span class="vocab-tooltip">compris</span></span> l'ampleur de la crise</p>
                    <p>Mais pour te dire la v√©rit√©, pour nous en 2023</p>
                    <p>Tout ce que tu me racontes l√† n'est pas vraiment une surprise</p>
                </div>
                
                <div class="stanza">
                    <p>√áa fait plusieurs ann√©es, voire plusieurs d√©cennies</p>
                    <p>Que les scientifiques essaient <span class="vocab-hover">vainement<span class="vocab-tooltip">sans succ√®s, inutilement</span></span> de nous <span class="vocab-hover">alerter<span class="vocab-tooltip">avertir d'un danger</span></span></p>
                    <p>Qu'il n'est pas encore trop tard, que le combat n'est pas fini</p>
                    <p>Mais qu'on joue tous en ce moment l'avenir de l'humanit√©</p>
                </div>
                
                <div class="stanza">
                    <p>J'ai toujours pas compris ce que font les grands de ce monde</p>
                    <p>Chaque conf√©rence sur le climat est un terrible √©chec</p>
                    <p>Aucun G20 n'<span class="vocab-hover">aboutit<span class="vocab-tooltip">arrive √† un r√©sultat</span></span> √† des mesures profondes</p>
                    <p>Ils y vont en <span class="vocab-hover">jet priv√©<span class="vocab-tooltip">avion personnel luxueux (qui pollue beaucoup)</span></span> et <span class="vocab-hover">se torchent avec<span class="vocab-tooltip">expression vulgaire : ignorent compl√®tement</span></span> les rapports du <span class="vocab-hover">GIEC<span class="vocab-tooltip">groupe de scientifiques sur le climat</span></span></p>
                </div>
                
                <div class="stanza">
                    <p>Quand vont-ils d√©clarer l'<span class="vocab-hover">√©tat d'urgence<span class="vocab-tooltip">situation de crise nationale</span></span> climatique mondial</p>
                    <p>Et <span class="vocab-hover">contraindre<span class="vocab-tooltip">forcer, obliger</span></span> les pays sur leurs √©missions de CO2?</p>
                    <p>Quand vont-ils rendre toute <span class="vocab-hover">d√©forestation<span class="vocab-tooltip">destruction des for√™ts</span></span> ill√©gale</p>
                    <p>Investir massivement pour consommer moins, consommer mieux?</p>
                </div>
                
                <div class="stanza">
                    <p>Les changements de comportement passeront forc√©ment par des lois</p>
                    <p>Les Politiques devront sortir de leur <span class="vocab-hover">inaction<span class="vocab-tooltip">absence d'action</span></span></p>
                    <p>Il ne faudra pas attendre d'√™tre en 2083</p>
                    <p>D√®s aujourd'hui, les <span class="vocab-hover">demi-mesures<span class="vocab-tooltip">actions insuffisantes, pas assez fortes</span></span> ne sont plus une option</p>
                </div>
                
                <div class="stanza">
                    <p>Mon cher petit-fils, peux-tu demander √† tous tes <span class="vocab-hover">potes<span class="vocab-tooltip">amis (familier)</span></span></p>
                    <p>D'√©crire √† leurs <span class="vocab-hover">a√Øeux<span class="vocab-tooltip">anc√™tres, grands-parents</span></span>, de suivre ton initiative</p>
                    <p>Le combat n'est pas perdu, la terre n'est pas encore morte</p>
                    <p>Mais la victoire pour le climat ne pourra √™tre que <span class="vocab-hover">collective<span class="vocab-tooltip">ensemble, en groupe</span></span></p>
                </div>
            </div>
        </div>

        <div class="video-wrapper">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/G8oWYFQ1fE0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">üìñ</div>
                <div class="card-title">De quoi parle cette chanson ?</div>
            </div>
            
            <div class="simple-explanation">
                <p><strong>L'histoire :</strong> Cette chanson est une lettre du futur ! Un petit-fils qui vit en 2083 √©crit √† son grand-p√®re qui vit en 2023 (maintenant). Il lui d√©crit comment la plan√®te est en tr√®s mauvais √©tat √† cause du changement climatique.</p>
                <br>
                <p><strong>Le message :</strong> Le grand-p√®re r√©pond qu'il le savait d√©j√†, mais que personne n'agit vraiment. Il dit qu'il faut agir MAINTENANT avant qu'il soit trop tard !</p>
            </div>

            <div class="info-box">
                <h3>üé§ L'artiste : Grand Corps Malade</h3>
                <p><strong>Vrai nom :</strong> Fabien Marsaud</p>
                <p><strong>Style :</strong> Slam (po√©sie parl√©e en musique)</p>
                <p><strong>Pourquoi ce nom ?</strong> √Ä 20 ans, il a eu un accident et est devenu partiellement paralys√©. "Grand Corps Malade" = grand corps malade.</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">üìö</div>
                <div class="card-title">Vocabulaire Important</div>
            </div>
            
            <div class="vocab-grid">
                <div class="vocab-card">
                    <div class="vocab-word">üåä la mont√©e des eaux</div>
                    <div class="vocab-definition">quand le niveau de la mer monte</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üåÄ les cyclones</div>
                    <div class="vocab-definition">grandes temp√™tes violentes</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üèúÔ∏è la s√©cheresse</div>
                    <div class="vocab-definition">quand il n'y a pas de pluie</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üî• la chaleur</div>
                    <div class="vocab-definition">temp√©ratures tr√®s hautes</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üêª les esp√®ces</div>
                    <div class="vocab-definition">les types d'animaux</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üò∑ la pollution</div>
                    <div class="vocab-definition">l'air sale et toxique</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üåæ l'agriculture</div>
                    <div class="vocab-definition">cultiver des plantes</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üçû la famine</div>
                    <div class="vocab-definition">quand il n'y a pas assez √† manger</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üèÉ les r√©fugi√©s</div>
                    <div class="vocab-definition">personnes qui quittent leur pays</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">‚ö†Ô∏è l'urgence</div>
                    <div class="vocab-definition">quelque chose de tr√®s press√©</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">ü§ù collective</div>
                    <div class="vocab-definition">ensemble, tous unis</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">üí™ contraindre</div>
                    <div class="vocab-definition">forcer, obliger</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">‚ùì</div>
                <div class="card-title">Questions √† Choix Multiples</div>
            </div>

            <div class="mcq-question" data-correct="b">
                <h4>1. Qui √©crit la premi√®re lettre ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Le grand-p√®re en 2023</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Le petit-fils en 2083</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Un scientifique</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Un politicien</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="c">
                <h4>2. Combien d'ann√©es s√©parent le grand-p√®re et le petit-fils ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>50 ans</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>100 ans</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>60 ans</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>75 ans</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="d">
                <h4>3. Quelle ville est mentionn√©e comme compl√®tement √©vacu√©e √† cause de la pollution ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Paris</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>New York</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Londres</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>New-Delhi</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="b">
                <h4>4. Quelle temp√©rature fait-il souvent en √©t√© dans certaines villes en 2083 ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>40 degr√©s</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>60 degr√©s</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>50 degr√©s</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>70 degr√©s</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="a">
                <h4>5. Qu'est-ce qui a disparu en France √† cause de la s√©cheresse ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>La vigne (pour faire du vin)</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Les for√™ts</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Les montagnes</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Les villes</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="c">
                <h4>6. Qu'est-ce que le GIEC ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Un groupe de musiciens</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Une ville fran√ßaise</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Un groupe de scientifiques sur le climat</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Un parti politique</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="b">
                <h4>7. Selon la chanson, comment peut-on gagner contre le changement climatique ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Individuellement, chacun pour soi</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Collectivement, tous ensemble</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>En attendant que les politiciens agissent</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>C'est impossible, c'est trop tard</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="a">
                <h4>8. Quelle est l'attitude du grand-p√®re face au message du petit-fils ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Il n'est pas surpris, il savait d√©j√†</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Il est totalement choqu√©</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Il ne croit pas le petit-fils</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Il pense que c'est de la science-fiction</span>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkMCQ()">‚úÖ V√©rifier mes r√©ponses</button>
                <button class="btn btn-secondary" onclick="resetMCQ()">üîÑ Recommencer</button>
            </div>

            <div class="feedback-box" id="mcq-feedback"></div>
            <div class="score-display" id="mcq-score" style="display: none;"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">üî¢</div>
                <div class="card-title">Remettez les √âv√©nements dans l'Ordre</div>
            </div>

            <div class="highlight-box">
                <strong>üìù Instructions :</strong> Glissez et d√©posez les phrases pour les mettre dans l'ordre chronologique de la chanson !
            </div>

            <div class="ordering-container">
                <h3 class="ordering-title">‚è∞ Ordre des √âv√©nements</h3>
                <div class="ordering-items" id="ordering-items">
                    <div class="ordering-item" draggable="true" data-order="1">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>Le petit-fils √©crit √† son grand-p√®re depuis 2083</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="5">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-p√®re critique les politiciens qui ignorent les rapports du GIEC</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="3">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>New-Delhi est √©vacu√©e √† cause de la pollution</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="6">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-p√®re demande de d√©clarer l'√©tat d'urgence climatique</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="2">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>Des villes comme Jakarta et Venise disparaissent sous la mer</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="7">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-p√®re appelle les jeunes √† √©crire √† leurs anc√™tres</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="4">
                        <span class="drag-handle">‚ò∞</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-p√®re r√©pond qu'il n'est pas surpris par le message</span>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkOrdering()">‚úÖ V√©rifier l'ordre</button>
                <button class="btn btn-secondary" onclick="resetOrdering()">üîÑ Recommencer</button>
            </div>

            <div class="feedback-box" id="ordering-feedback"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">üéØ</div>
                <div class="card-title">Probl√®mes ou Solutions ?</div>
            </div>

            <div class="drag-drop-activity">
                <div class="highlight-box">
                    <strong>üéÆ Votre mission :</strong> Classez les √©l√©ments ci-dessous. Sont-ils des PROBL√àMES mentionn√©s dans la chanson ou des SOLUTIONS propos√©es ?
                </div>

                <div class="available-items" id="available-items">
                    <div class="draggable" draggable="true" data-type="problem">üåä Mont√©e des eaux</div>
                    <div class="draggable" draggable="true" data-type="solution">üö´ Rendre la d√©forestation ill√©gale</div>
                    <div class="draggable" draggable="true" data-type="problem">üî• 60 degr√©s en √©t√©</div>
                    <div class="draggable" draggable="true" data-type="solution">‚ö†Ô∏è D√©clarer l'urgence climatique</div>
                    <div class="draggable" draggable="true" data-type="problem">üêª Un million d'esp√®ces disparues</div>
                    <div class="draggable" draggable="true" data-type="solution">üí∞ Investir massivement</div>
                    <div class="draggable" draggable="true" data-type="problem">üò∑ Obligation de porter un masque</div>
                    <div class="draggable" draggable="true" data-type="solution">üìú Faire des lois contraignantes</div>
                    <div class="draggable" draggable="true" data-type="problem">üèÉ Millions de r√©fugi√©s</div>
                    <div class="draggable" draggable="true" data-type="solution">ü§ù Action collective</div>
                    <div class="draggable" draggable="true" data-type="problem">üçû Famine et mis√®re</div>
                    <div class="draggable" draggable="true" data-type="solution">üå± Consommer moins et mieux</div>
                </div>

                <div class="drop-zones">
                    <div class="drop-zone" id="problems-zone" data-type="problem">
                        <div class="drop-zone-title">‚ö†Ô∏è PROBL√àMES</div>
                    </div>
                    <div class="drop-zone" id="solutions-zone" data-type="solution">
                        <div class="drop-zone-title">‚úÖ SOLUTIONS</div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkDragDrop()">‚úÖ V√©rifier</button>
                <button class="btn btn-secondary" onclick="resetDragDrop()">üîÑ Recommencer</button>
            </div>

            <div class="feedback-box" id="dragdrop-feedback"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">üí≠</div>
                <div class="card-title">Questions de R√©flexion</div>
            </div>

            <div class="simple-explanation">
                <h3>ü§î Discutez avec votre classe :</h3>
                <br>
                <p><strong>1.</strong> Pourquoi le grand-p√®re dit-il qu'il n'est ¬´ pas vraiment surpris ¬ª par le message du futur ?</p>
                <br>
                <p><strong>2.</strong> Dans votre vie, quelles actions pouvez-vous faire pour aider la plan√®te ?</p>
                <br>
                <p><strong>3.</strong> Pensez-vous que les politiciens font assez pour le climat ? Pourquoi ou pourquoi pas ?</p>
                <br>
                <p><strong>4.</strong> Si vous pouviez √©crire une lettre √† vos propres petits-enfants en 2085, que leur diriez-vous ?</p>
                <br>
                <p><strong>5.</strong> Que signifie ¬´ la victoire ne pourra √™tre que collective ¬ª ?</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">‚úçÔ∏è</div>
                <div class="card-title">Activit√©s d'√âcriture</div>
            </div>

            <div class="info-box">
                <h3>üìù Activit√© 1 : Votre Lettre au Futur</h3>
                <p>Imaginez que vous √™tes en 2025. √âcrivez une courte lettre (100-150 mots) √† une personne qui vivra en 2085. Que voulez-vous lui dire sur votre √©poque ?</p>
            </div>

            <div class="info-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <h3>üí¨ Activit√© 2 : Dialogue</h3>
                <p>Avec un partenaire, cr√©ez un dialogue entre deux personnes qui discutent de la chanson ¬´ 2083 ¬ª. L'une est optimiste (¬´ on peut changer ! ¬ª), l'autre est pessimiste (¬´ c'est trop tard ¬ª).</p>
            </div>

            <div class="info-box" style="background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);">
                <h3>üì∞ Activit√© 3 : Article de Journal</h3>
                <p>√âcrivez un court article de journal (150-200 mots) pour l'ann√©e 2083 qui d√©crit un des probl√®mes mentionn√©s dans la chanson.</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">üåü</div>
                <div class="card-title">Th√®mes Principaux</div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <span class="theme-badge">üåç L'environnement</span>
                <span class="theme-badge">üë¥üë∂ Les g√©n√©rations</span>
                <span class="theme-badge">‚è∞ Le temps</span>
                <span class="theme-badge">üèõÔ∏è La politique</span>
                <span class="theme-badge">ü§ù La responsabilit√© collective</span>
                <span class="theme-badge">üìß La correspondance</span>
                <span class="theme-badge">‚ö†Ô∏è L'urgence</span>
                <span class="theme-badge">üí™ L'action</span>
            </div>

            <div class="simple-explanation">
                <h3>üéØ Le Message Principal :</h3>
                <p style="font-size: 1.2em; text-align: center; margin-top: 15px;">
                    <strong>¬´ Il n'est pas encore trop tard, mais il faut agir MAINTENANT et ENSEMBLE ! ¬ª</strong>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Tooltip positioning fix
        document.addEventListener('DOMContentLoaded', function() {
            const vocabHovers = document.querySelectorAll('.vocab-hover');
            
            vocabHovers.forEach(hover => {
                hover.addEventListener('mouseenter', function(e) {
                    const tooltip = this.querySelector('.vocab-tooltip');
                    if (!tooltip) return;
                    
                    const rect = this.getBoundingClientRect();
                    const lyricsContainer = this.closest('.lyrics-container');
                    
                    if (lyricsContainer) {
                        const containerRect = lyricsContainer.getBoundingClientRect();
                        const tooltipHeight = 120; // approximate tooltip height with padding
                        const spaceAbove = rect.top - containerRect.top;
                        
                        // Check if there's not enough space above for the tooltip
                        if (spaceAbove < tooltipHeight) {
                            // Show tooltip below instead of above
                            tooltip.style.bottom = 'auto';
                            tooltip.style.top = '125%';
                        } else {
                            // Show tooltip above (default)
                            tooltip.style.bottom = '125%';
                            tooltip.style.top = 'auto';
                        }
                    }
                });
            });
        });
        
        // MCQ Functions
        let mcqQuestions = document.querySelectorAll('.mcq-question');
        
        mcqQuestions.forEach(question => {
            let options = question.querySelectorAll('.mcq-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from siblings
                    options.forEach(opt => opt.classList.remove('selected'));
                    // Add selected to clicked option
                    this.classList.add('selected');
                });
            });
        });

        function checkMCQ() {
            let total = mcqQuestions.length;
            let correct = 0;
            
            mcqQuestions.forEach(question => {
                let correctAnswer = question.dataset.correct;
                let selectedOption = question.querySelector('.mcq-option.selected');
                
                if (selectedOption) {
                    let selectedAnswer = selectedOption.dataset.answer;
                    if (selectedAnswer === correctAnswer) {
                        selectedOption.classList.add('correct');
                        correct++;
                    } else {
                        selectedOption.classList.add('incorrect');
                        // Show correct answer
                        let correctOption = question.querySelector(`[data-answer="${correctAnswer}"]`);
                        correctOption.classList.add('correct');
                    }
                }
            });
            
            let percentage = (correct / total) * 100;
            let feedback = document.getElementById('mcq-feedback');
            let scoreDisplay = document.getElementById('mcq-score');
            
            feedback.style.display = 'block';
            scoreDisplay.style.display = 'block';
            scoreDisplay.innerHTML = `üìä Score : ${correct} / ${total} (${Math.round(percentage)}%)`;
            
            if (percentage === 100) {
                feedback.className = 'feedback-box success';
                feedback.innerHTML = 'üéâ PARFAIT ! Vous avez tout compris ! Bravo !';
            } else if (percentage >= 70) {
                feedback.className = 'feedback-box partial';
                feedback.innerHTML = `üëç BIEN ! Vous avez ${correct} bonnes r√©ponses. Les r√©ponses correctes sont en vert.`;
            } else {
                feedback.className = 'feedback-box error';
                feedback.innerHTML = `üìö Continuez √† pratiquer ! Vous avez ${correct} bonnes r√©ponses. Regardez les r√©ponses en vert.`;
            }
        }

        function resetMCQ() {
            mcqQuestions.forEach(question => {
                let options = question.querySelectorAll('.mcq-option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
            });
            
            document.getElementById('mcq-feedback').style.display = 'none';
            document.getElementById('mcq-score').style.display = 'none';
        }

        // Ordering Functions
        let orderingItems = document.getElementById('ordering-items');
        let draggedItem = null;

        function initOrdering() {
            let items = orderingItems.querySelectorAll('.ordering-item');
            
            items.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    draggedItem = this;
                    this.classList.add('dragging');
                });
                
                item.addEventListener('dragend', function(e) {
                    this.classList.remove('dragging');
                });
                
                item.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    const afterElement = getDragAfterElement(orderingItems, e.clientY);
                    if (afterElement == null) {
                        orderingItems.appendChild(draggedItem);
                    } else {
                        orderingItems.insertBefore(draggedItem, afterElement);
                    }
                });
            });
            
            updateOrderingNumbers();
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.ordering-item:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function updateOrderingNumbers() {
            let items = orderingItems.querySelectorAll('.ordering-item');
            items.forEach((item, index) => {
                item.querySelector('.ordering-number').textContent = index + 1;
            });
        }

        function checkOrdering() {
            let items = orderingItems.querySelectorAll('.ordering-item');
            let correct = 0;
            
            items.forEach((item, index) => {
                let correctOrder = parseInt(item.dataset.order);
                let currentPosition = index + 1;
                
                if (correctOrder === currentPosition) {
                    item.style.background = '#d4edda';
                    item.style.borderColor = '#28a745';
                    correct++;
                } else {
                    item.style.background = '#f8d7da';
                    item.style.borderColor = '#dc3545';
                }
            });
            
            let total = items.length;
            let percentage = (correct / total) * 100;
            let feedback = document.getElementById('ordering-feedback');
            
            feedback.style.display = 'block';
            
            if (percentage === 100) {
                feedback.className = 'feedback-box success';
                feedback.innerHTML = 'üéâ PARFAIT ! Vous avez mis tous les √©v√©nements dans le bon ordre !';
            } else if (percentage >= 60) {
                feedback.className = 'feedback-box partial';
                feedback.innerHTML = `üëç PAS MAL ! ${correct}/${total} sont corrects. Les √©l√©ments en vert sont bien plac√©s.`;
            } else {
                feedback.className = 'feedback-box error';
                feedback.innerHTML = `üìö Essayez encore ! ${correct}/${total} corrects. R√©√©coutez la chanson et r√©essayez.`;
            }
        }

        function resetOrdering() {
            let items = Array.from(orderingItems.querySelectorAll('.ordering-item'));
            
            // Shuffle items
            items.sort(() => Math.random() - 0.5);
            
            // Clear container
            orderingItems.innerHTML = '';
            
            // Re-add shuffled items
            items.forEach(item => {
                item.style.background = 'white';
                item.style.borderColor = '#ffc107';
                orderingItems.appendChild(item);
            });
            
            updateOrderingNumbers();
            document.getElementById('ordering-feedback').style.display = 'none';
        }

        // Drag and Drop Functions
        let draggables = document.querySelectorAll('.draggable');
        let dropZones = document.querySelectorAll('.drop-zone');
        let currentDraggable = null;

        function initDragDrop() {
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    currentDraggable = this;
                    this.classList.add('dragging');
                });
                
                draggable.addEventListener('dragend', function(e) {
                    this.classList.remove('dragging');
                });
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (currentDraggable && this.id !== 'available-items') {
                        // Create dropped version
                        let dropped = document.createElement('div');
                        dropped.className = 'draggable dropped';
                        dropped.innerHTML = currentDraggable.innerHTML + ' <button class="remove-btn" onclick="removeFromZone(this)">‚úï</button>';
                        dropped.dataset.type = currentDraggable.dataset.type;
                        
                        this.appendChild(dropped);
                        currentDraggable.remove();
                    }
                });
            });
            
            // Make available-items a drop zone for returning items
            let availableItems = document.getElementById('available-items');
            availableItems.addEventListener('dragover', function(e) {
                e.preventDefault();
            });
            
            availableItems.addEventListener('drop', function(e) {
                e.preventDefault();
                if (currentDraggable && currentDraggable.classList.contains('dropped')) {
                    returnToAvailable(currentDraggable);
                }
            });
        }

        function removeFromZone(button) {
            let item = button.parentElement;
            returnToAvailable(item);
        }

        function returnToAvailable(item) {
            let newItem = document.createElement('div');
            newItem.className = 'draggable';
            newItem.draggable = true;
            newItem.innerHTML = item.innerHTML.replace(/<button.*<\/button>/, '').trim();
            newItem.dataset.type = item.dataset.type;
            
            newItem.addEventListener('dragstart', function(e) {
                currentDraggable = this;
                this.classList.add('dragging');
            });
            
            newItem.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
            });
            
            document.getElementById('available-items').appendChild(newItem);
            item.remove();
        }

        function checkDragDrop() {
            let problemsZone = document.getElementById('problems-zone');
            let solutionsZone = document.getElementById('solutions-zone');
            
            let problemItems = problemsZone.querySelectorAll('.dropped');
            let solutionItems = solutionsZone.querySelectorAll('.dropped');
            
            let correct = 0;
            let total = 0;
            
            problemItems.forEach(item => {
                total++;
                if (item.dataset.type === 'problem') {
                    item.style.background = '#d4edda';
                    item.style.borderColor = '#28a745';
                    correct++;
                } else {
                    item.style.background = '#f8d7da';
                    item.style.borderColor = '#dc3545';
                }
            });
            
            solutionItems.forEach(item => {
                total++;
                if (item.dataset.type === 'solution') {
                    item.style.background = '#d4edda';
                    item.style.borderColor = '#28a745';
                    correct++;
                } else {
                    item.style.background = '#f8d7da';
                    item.style.borderColor = '#dc3545';
                }
            });
            
            let percentage = total > 0 ? (correct / total) * 100 : 0;
            let feedback = document.getElementById('dragdrop-feedback');
            
            feedback.style.display = 'block';
            
            if (percentage === 100) {
                feedback.className = 'feedback-box success';
                feedback.innerHTML = 'üéâ EXCELLENT ! Tout est bien class√© !';
            } else if (percentage >= 70) {
                feedback.className = 'feedback-box partial';
                feedback.innerHTML = `üëç BIEN ! ${correct}/${total} corrects. Les √©l√©ments en vert sont bien plac√©s, ceux en rouge non.`;
            } else {
                feedback.className = 'feedback-box error';
                feedback.innerHTML = `üìö ${correct}/${total} corrects. Relisez attentivement ! Vert = correct, Rouge = incorrect.`;
            }
        }

        function resetDragDrop() {
            // Return all dropped items to available
            let droppedItems = document.querySelectorAll('.dropped');
            droppedItems.forEach(item => {
                returnToAvailable(item);
            });
            
            document.getElementById('dragdrop-feedback').style.display = 'none';
        }

        // Initialize all activities on page load
        document.addEventListener('DOMContentLoaded', function() {
            initOrdering();
            initDragDrop();
        });
    </script>
</body>
</html>