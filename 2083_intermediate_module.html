<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2083 - Grand Corps Malade | Module Interactif</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .hero-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #3a6fb3 100%);
            color: white;
            padding: 50px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
        }
        
        .hero-header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .hero-header .subtitle {
            font-size: 1.5em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }
        
        .emoji-divider {
            font-size: 2em;
            margin: 10px 0;
        }
        
        .video-wrapper {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: visible;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        
        .card-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }
        
        .card-title {
            font-size: 2em;
            color: #1e3c72;
            font-weight: bold;
        }
        
        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .info-box h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
        }
        
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .vocab-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .vocab-card:hover {
            transform: scale(1.05) rotate(1deg);
        }
        
        .vocab-word {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .vocab-definition {
            font-size: 1em;
            opacity: 0.95;
        }
        
        .mcq-question {
            background: #f8f9fa;
            border-left: 6px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .mcq-question h4 {
            color: #1e3c72;
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        
        .mcq-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .mcq-option {
            background: white;
            border: 3px solid #ddd;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
        }
        
        .mcq-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(5px);
        }
        
        .mcq-option.selected {
            border-color: #667eea;
            background: #e3f2fd;
            font-weight: bold;
        }
        
        .mcq-option.correct {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .mcq-option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }
        
        .mcq-option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 15px;
            font-size: 1em;
        }
        
        .mcq-option.correct .mcq-option-letter {
            background: #28a745;
        }
        
        .mcq-option.incorrect .mcq-option-letter {
            background: #dc3545;
        }
        
        .ordering-container {
            background: #fff3cd;
            padding: 25px;
            border-radius: 15px;
            border: 3px solid #ffc107;
            margin: 20px 0;
        }
        
        .ordering-title {
            color: #856404;
            font-size: 1.4em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .ordering-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }
        
        .ordering-item {
            background: white;
            border: 3px solid #ffc107;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: move;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .ordering-item:hover {
            background: #fffbf0;
            transform: scale(1.02);
            box-shadow: 0 5px 12px rgba(0,0,0,0.15);
        }
        
        .ordering-item.dragging {
            opacity: 0.5;
            transform: rotate(3deg);
        }
        
        .drag-handle {
            font-size: 1.8em;
            margin-right: 15px;
            color: #ffc107;
        }
        
        .ordering-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: #ffc107;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 15px;
            font-size: 1em;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
            color: white;
        }
        
        .feedback-box {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feedback-box.success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
            border: 3px solid #4e9f27;
        }
        
        .feedback-box.partial {
            background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
            color: #333;
            border: 3px solid #e68a00;
        }
        
        .feedback-box.error {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
            border: 3px solid #d10068;
        }
        
        .drag-drop-activity {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .available-items {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 20px 0;
            min-height: 80px;
            padding: 15px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            border: 2px dashed #667eea;
        }
        
        .drop-zones {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .drop-zone {
            background: rgba(255,255,255,0.5);
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 20px;
            min-height: 300px;
        }
        
        .drop-zone.drag-over {
            background: rgba(255,255,255,0.8);
            border-color: #1e3c72;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }
        
        .drop-zone-title {
            text-align: center;
            font-size: 1.4em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .draggable {
            background: white;
            border: 3px solid #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: move;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
            font-size: 1em;
            display: inline-block;
        }
        
        .draggable:hover {
            background: #f0f4ff;
            transform: scale(1.05);
            box-shadow: 0 5px 12px rgba(0,0,0,0.2);
        }
        
        .draggable.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        
        .dropped {
            margin-bottom: 10px;
        }
        
        .dropped .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .dropped .remove-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }
        
        .score-display {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .progress-bar {
            background: #e0e0e0;
            border-radius: 25px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 25px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .theme-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        
        .lyrics-container {
            background: #f8f9fa;
            padding: 30px;
            padding-top: 50px;
            padding-bottom: 30px;
            border-radius: 15px;
            margin: 20px 0;
            line-height: 2;
            font-size: 1.1em;
            border: 3px solid #667eea;
        }
        
        .lyrics-container p {
            margin: 10px 0;
            position: relative;
        }
        
        .lyrics-container .stanza {
            margin-bottom: 20px;
            position: relative;
        }
        
        .vocab-hover {
            color: #667eea;
            font-weight: bold;
            border-bottom: 2px dotted #667eea;
            cursor: help;
            position: relative;
            display: inline-block;
        }
        
        .vocab-hover:hover {
            color: #1e3c72;
        }
        
        .vocab-tooltip {
            visibility: hidden;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            text-align: center;
            padding: 12px 16px;
            border-radius: 10px;
            position: absolute;
            z-index: 9999;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            min-width: 200px;
            max-width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            font-size: 0.9em;
            font-weight: normal;
            line-height: 1.4;
            white-space: normal;
        }
        
        .vocab-tooltip::after {
            content: "";
            position: absolute;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            top: 100%;
            border-color: #2a5298 transparent transparent transparent;
        }
        
        /* When tooltip is below word (dynamically applied by JS) */
        .vocab-tooltip[style*="top: 125%"]::after {
            bottom: 100%;
            top: auto;
            border-color: transparent transparent #2a5298 transparent;
        }
        
        .vocab-hover:hover .vocab-tooltip {
            visibility: visible;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-5px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .lyrics-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .speaker-label {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .speaker-grandson {
            background: #f093fb;
        }
        
        .speaker-grandfather {
            background: #56ab2f;
        }
        
        .simple-explanation {
            background: #e3f2fd;
            border-left: 5px solid #2196F3;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 3px solid #fdcb6e;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        
        @media (max-width: 768px) {
            .hero-header h1 {
                font-size: 2em;
            }
            
            .drop-zones {
                grid-template-columns: 1fr;
            }
            
            .vocab-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero-header">
            <div class="emoji-divider">🌍 🎵 📝</div>
            <h1>"2083"</h1>
            <p class="subtitle">Grand Corps Malade</p>
            <div class="emoji-divider">🌊 🔥 🌪️</div>
        </div>

        <div class="card" style="margin-top: 40px;">
            <div class="card-header">
                <div class="card-icon">🎵</div>
                <div class="card-title">Paroles de la Chanson</div>
            </div>
            
            <div class="lyrics-header">
                <h3>💡 Passez votre souris sur les mots soulignés pour voir leur définition !</h3>
            </div>
            
            <div class="lyrics-container" id="lyrics-container">
                <div class="stanza">
                    <span class="speaker-label speaker-grandson">👦 Le petit-fils (2083)</span>
                    <p>Cher Fabien, tu ne me connais pas encore, je suis ton petit-fils</p>
                    <p>Je t'écris depuis l'année 2083</p>
                    <p>Je te passe ce message afin que ton <span class="vocab-hover">époque<span class="vocab-tooltip">période de temps, génération</span></span> réagisse</p>
                    <p>Ici la planète va mal, il faut absolument que tu me croies</p>
                </div>
                
                <div class="stanza">
                    <p>Jakarta, Lagos, New-York ont disparu <span class="vocab-hover">sous la mer<span class="vocab-tooltip">submergées par l'eau de l'océan</span></span></p>
                    <p>Mais aussi Venise, Londres, et un tiers des Pays-Bas</p>
                    <p>Tombouctou et le nord Mali <span class="vocab-hover">ensevelis<span class="vocab-tooltip">recouverts, enterrés</span></span> sous le désert</p>
                    <p>Et le <span class="vocab-hover">fleuve<span class="vocab-tooltip">grande rivière</span></span> Niger n'a plus une seule goutte d'eau dans ses bras</p>
                </div>
                
                <div class="stanza">
                    <p>Les villes côtières qui luttent contre <span class="vocab-hover">la montée des eaux<span class="vocab-tooltip">quand le niveau de la mer augmente</span></span></p>
                    <p>Ont beau construire des <span class="vocab-hover">digues<span class="vocab-tooltip">barrières contre l'eau</span></span>, des barrages et des murailles</p>
                    <p>Elles <span class="vocab-hover">ne pèsent pas bien lourd<span class="vocab-tooltip">expression : ne sont pas efficaces</span></span> et éclatent vite en morceaux</p>
                    <p>Quand les <span class="vocab-hover">cyclones<span class="vocab-tooltip">tempêtes violentes tropicales</span></span> et ouragans viennent finir le travail</p>
                </div>
                
                <div class="stanza">
                    <p>Dans plusieurs pays d'Afrique et d'Asie du Sud-Est</p>
                    <p>Mais aussi à Athènes, au Caire, et quelques autres élues</p>
                    <p>Il fait souvent 60 degrés, chaque été est un test</p>
                    <p>Où les riches vivent <span class="vocab-hover">sous la clim<span class="vocab-tooltip">avec la climatisation (air conditionné)</span></span> et les pauvres ne vivent plus</p>
                </div>
                
                <div class="stanza">
                    <p>Et les changements climatiques ont été tellement violents</p>
                    <p>Que les <span class="vocab-hover">écosystèmes<span class="vocab-tooltip">environnements naturels avec animaux et plantes</span></span> n'ont pas eu le temps de s'adapter</p>
                    <p>Un million d'<span class="vocab-hover">espèces<span class="vocab-tooltip">types d'animaux ou de plantes</span></span> en plus des fameux ours blancs</p>
                    <p>Ont disparu pour toujours, elles n'ont pas pu résister</p>
                </div>
                
                <div class="stanza">
                    <p>L'année dernière, New-Delhi a été entièrement <span class="vocab-hover">évacuée<span class="vocab-tooltip">abandonnée, tout le monde est parti</span></span></p>
                    <p><span class="vocab-hover">Asphyxiée<span class="vocab-tooltip">étouffée, sans air pur</span></span> qu'elle était sous un nuage de pollution</p>
                    <p>À Pékin et Shanghai, une nouvelle loi vient de passer</p>
                    <p>Sans <span class="vocab-hover">masque à oxygène<span class="vocab-tooltip">équipement pour respirer de l'air pur</span></span>, il est interdit de sortir de sa maison</p>
                </div>
                
                <div class="stanza">
                    <p>Les sols sont tellement secs qu'il n'y a plus de <span class="vocab-hover">vigne<span class="vocab-tooltip">plante pour faire du vin</span></span> en France</p>
                    <p>Et dans plusieurs pays du Sud, <span class="vocab-hover">l'agriculture<span class="vocab-tooltip">cultiver des plantes pour manger</span></span> est impossible</p>
                    <p>Quand les <span class="vocab-hover">fermiers<span class="vocab-tooltip">agriculteurs, paysans</span></span> n'ont plus d'eau, on est au-delà de l'urgence</p>
                    <p><span class="vocab-hover">La famine<span class="vocab-tooltip">manque extrême de nourriture</span></span> et la misère sont devenues <span class="vocab-hover">irréversibles<span class="vocab-tooltip">impossibles à changer</span></span></p>
                </div>
                
                <div class="stanza">
                    <p>La sécheresse et la chaleur ont provoqué des millions de morts</p>
                    <p>Et des millions de <span class="vocab-hover">réfugiés<span class="vocab-tooltip">personnes qui quittent leur pays</span></span> qui <span class="vocab-hover">fuient<span class="vocab-tooltip">s'échappent, partent rapidement</span></span> leur pays</p>
                    <p>Les frontières sont des zones de combat dans les États du nord</p>
                    <p>C'est la guerre en Europe, en Amérique et en Asie</p>
                </div>
                
                <div class="stanza">
                    <span class="speaker-label speaker-grandfather">👴 Le grand-père (2023)</span>
                    <p>Cher petit-fils, j'ai lu ton courrier avec <span class="vocab-hover">effroi<span class="vocab-tooltip">grande peur, horreur</span></span></p>
                    <p>Je crois bien avoir <span class="vocab-hover">saisi<span class="vocab-tooltip">compris</span></span> l'ampleur de la crise</p>
                    <p>Mais pour te dire la vérité, pour nous en 2023</p>
                    <p>Tout ce que tu me racontes là n'est pas vraiment une surprise</p>
                </div>
                
                <div class="stanza">
                    <p>Ça fait plusieurs années, voire plusieurs décennies</p>
                    <p>Que les scientifiques essaient <span class="vocab-hover">vainement<span class="vocab-tooltip">sans succès, inutilement</span></span> de nous <span class="vocab-hover">alerter<span class="vocab-tooltip">avertir d'un danger</span></span></p>
                    <p>Qu'il n'est pas encore trop tard, que le combat n'est pas fini</p>
                    <p>Mais qu'on joue tous en ce moment l'avenir de l'humanité</p>
                </div>
                
                <div class="stanza">
                    <p>J'ai toujours pas compris ce que font les grands de ce monde</p>
                    <p>Chaque conférence sur le climat est un terrible échec</p>
                    <p>Aucun G20 n'<span class="vocab-hover">aboutit<span class="vocab-tooltip">arrive à un résultat</span></span> à des mesures profondes</p>
                    <p>Ils y vont en <span class="vocab-hover">jet privé<span class="vocab-tooltip">avion personnel luxueux (qui pollue beaucoup)</span></span> et <span class="vocab-hover">se torchent avec<span class="vocab-tooltip">expression vulgaire : ignorent complètement</span></span> les rapports du <span class="vocab-hover">GIEC<span class="vocab-tooltip">groupe de scientifiques sur le climat</span></span></p>
                </div>
                
                <div class="stanza">
                    <p>Quand vont-ils déclarer l'<span class="vocab-hover">état d'urgence<span class="vocab-tooltip">situation de crise nationale</span></span> climatique mondial</p>
                    <p>Et <span class="vocab-hover">contraindre<span class="vocab-tooltip">forcer, obliger</span></span> les pays sur leurs émissions de CO2?</p>
                    <p>Quand vont-ils rendre toute <span class="vocab-hover">déforestation<span class="vocab-tooltip">destruction des forêts</span></span> illégale</p>
                    <p>Investir massivement pour consommer moins, consommer mieux?</p>
                </div>
                
                <div class="stanza">
                    <p>Les changements de comportement passeront forcément par des lois</p>
                    <p>Les Politiques devront sortir de leur <span class="vocab-hover">inaction<span class="vocab-tooltip">absence d'action</span></span></p>
                    <p>Il ne faudra pas attendre d'être en 2083</p>
                    <p>Dès aujourd'hui, les <span class="vocab-hover">demi-mesures<span class="vocab-tooltip">actions insuffisantes, pas assez fortes</span></span> ne sont plus une option</p>
                </div>
                
                <div class="stanza">
                    <p>Mon cher petit-fils, peux-tu demander à tous tes <span class="vocab-hover">potes<span class="vocab-tooltip">amis (familier)</span></span></p>
                    <p>D'écrire à leurs <span class="vocab-hover">aïeux<span class="vocab-tooltip">ancêtres, grands-parents</span></span>, de suivre ton initiative</p>
                    <p>Le combat n'est pas perdu, la terre n'est pas encore morte</p>
                    <p>Mais la victoire pour le climat ne pourra être que <span class="vocab-hover">collective<span class="vocab-tooltip">ensemble, en groupe</span></span></p>
                </div>
            </div>
        </div>

        <div class="video-wrapper">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/G8oWYFQ1fE0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">📖</div>
                <div class="card-title">De quoi parle cette chanson ?</div>
            </div>
            
            <div class="simple-explanation">
                <p><strong>L'histoire :</strong> Cette chanson est une lettre du futur ! Un petit-fils qui vit en 2083 écrit à son grand-père qui vit en 2023 (maintenant). Il lui décrit comment la planète est en très mauvais état à cause du changement climatique.</p>
                <br>
                <p><strong>Le message :</strong> Le grand-père répond qu'il le savait déjà, mais que personne n'agit vraiment. Il dit qu'il faut agir MAINTENANT avant qu'il soit trop tard !</p>
            </div>

            <div class="info-box">
                <h3>🎤 L'artiste : Grand Corps Malade</h3>
                <p><strong>Vrai nom :</strong> Fabien Marsaud</p>
                <p><strong>Style :</strong> Slam (poésie parlée en musique)</p>
                <p><strong>Pourquoi ce nom ?</strong> À 20 ans, il a eu un accident et est devenu partiellement paralysé. "Grand Corps Malade" = grand corps malade.</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">📚</div>
                <div class="card-title">Vocabulaire Important</div>
            </div>
            
            <div class="vocab-grid">
                <div class="vocab-card">
                    <div class="vocab-word">🌊 la montée des eaux</div>
                    <div class="vocab-definition">quand le niveau de la mer monte</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🌀 les cyclones</div>
                    <div class="vocab-definition">grandes tempêtes violentes</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🏜️ la sécheresse</div>
                    <div class="vocab-definition">quand il n'y a pas de pluie</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🔥 la chaleur</div>
                    <div class="vocab-definition">températures très hautes</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🐻 les espèces</div>
                    <div class="vocab-definition">les types d'animaux</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">😷 la pollution</div>
                    <div class="vocab-definition">l'air sale et toxique</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🌾 l'agriculture</div>
                    <div class="vocab-definition">cultiver des plantes</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🍞 la famine</div>
                    <div class="vocab-definition">quand il n'y a pas assez à manger</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🏃 les réfugiés</div>
                    <div class="vocab-definition">personnes qui quittent leur pays</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">⚠️ l'urgence</div>
                    <div class="vocab-definition">quelque chose de très pressé</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">🤝 collective</div>
                    <div class="vocab-definition">ensemble, tous unis</div>
                </div>
                <div class="vocab-card">
                    <div class="vocab-word">💪 contraindre</div>
                    <div class="vocab-definition">forcer, obliger</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">❓</div>
                <div class="card-title">Questions à Choix Multiples</div>
            </div>

            <div class="mcq-question" data-correct="b">
                <h4>1. Qui écrit la première lettre ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Le grand-père en 2023</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Le petit-fils en 2083</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Un scientifique</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Un politicien</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="c">
                <h4>2. Combien d'années séparent le grand-père et le petit-fils ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>50 ans</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>100 ans</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>60 ans</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>75 ans</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="d">
                <h4>3. Quelle ville est mentionnée comme complètement évacuée à cause de la pollution ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Paris</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>New York</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Londres</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>New-Delhi</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="b">
                <h4>4. Quelle température fait-il souvent en été dans certaines villes en 2083 ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>40 degrés</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>60 degrés</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>50 degrés</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>70 degrés</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="a">
                <h4>5. Qu'est-ce qui a disparu en France à cause de la sécheresse ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>La vigne (pour faire du vin)</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Les forêts</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Les montagnes</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Les villes</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="c">
                <h4>6. Qu'est-ce que le GIEC ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Un groupe de musiciens</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Une ville française</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Un groupe de scientifiques sur le climat</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Un parti politique</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="b">
                <h4>7. Selon la chanson, comment peut-on gagner contre le changement climatique ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Individuellement, chacun pour soi</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Collectivement, tous ensemble</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>En attendant que les politiciens agissent</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>C'est impossible, c'est trop tard</span>
                    </div>
                </div>
            </div>

            <div class="mcq-question" data-correct="a">
                <h4>8. Quelle est l'attitude du grand-père face au message du petit-fils ?</h4>
                <div class="mcq-options">
                    <div class="mcq-option" data-answer="a">
                        <span class="mcq-option-letter">A</span>
                        <span>Il n'est pas surpris, il savait déjà</span>
                    </div>
                    <div class="mcq-option" data-answer="b">
                        <span class="mcq-option-letter">B</span>
                        <span>Il est totalement choqué</span>
                    </div>
                    <div class="mcq-option" data-answer="c">
                        <span class="mcq-option-letter">C</span>
                        <span>Il ne croit pas le petit-fils</span>
                    </div>
                    <div class="mcq-option" data-answer="d">
                        <span class="mcq-option-letter">D</span>
                        <span>Il pense que c'est de la science-fiction</span>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkMCQ()">✅ Vérifier mes réponses</button>
                <button class="btn btn-secondary" onclick="resetMCQ()">🔄 Recommencer</button>
            </div>

            <div class="feedback-box" id="mcq-feedback"></div>
            <div class="score-display" id="mcq-score" style="display: none;"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">🔢</div>
                <div class="card-title">Remettez les Événements dans l'Ordre</div>
            </div>

            <div class="highlight-box">
                <strong>📝 Instructions :</strong> Glissez et déposez les phrases pour les mettre dans l'ordre chronologique de la chanson !
            </div>

            <div class="ordering-container">
                <h3 class="ordering-title">⏰ Ordre des Événements</h3>
                <div class="ordering-items" id="ordering-items">
                    <div class="ordering-item" draggable="true" data-order="1">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>Le petit-fils écrit à son grand-père depuis 2083</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="5">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-père critique les politiciens qui ignorent les rapports du GIEC</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="3">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>New-Delhi est évacuée à cause de la pollution</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="6">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-père demande de déclarer l'état d'urgence climatique</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="2">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>Des villes comme Jakarta et Venise disparaissent sous la mer</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="7">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-père appelle les jeunes à écrire à leurs ancêtres</span>
                    </div>
                    <div class="ordering-item" draggable="true" data-order="4">
                        <span class="drag-handle">☰</span>
                        <span class="ordering-number">?</span>
                        <span>Le grand-père répond qu'il n'est pas surpris par le message</span>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkOrdering()">✅ Vérifier l'ordre</button>
                <button class="btn btn-secondary" onclick="resetOrdering()">🔄 Recommencer</button>
            </div>

            <div class="feedback-box" id="ordering-feedback"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">🎯</div>
                <div class="card-title">Problèmes ou Solutions ?</div>
            </div>

            <div class="drag-drop-activity">
                <div class="highlight-box">
                    <strong>🎮 Votre mission :</strong> Classez les éléments ci-dessous. Sont-ils des PROBLÈMES mentionnés dans la chanson ou des SOLUTIONS proposées ?
                </div>

                <div class="available-items" id="available-items">
                    <div class="draggable" draggable="true" data-type="problem">🌊 Montée des eaux</div>
                    <div class="draggable" draggable="true" data-type="solution">🚫 Rendre la déforestation illégale</div>
                    <div class="draggable" draggable="true" data-type="problem">🔥 60 degrés en été</div>
                    <div class="draggable" draggable="true" data-type="solution">⚠️ Déclarer l'urgence climatique</div>
                    <div class="draggable" draggable="true" data-type="problem">🐻 Un million d'espèces disparues</div>
                    <div class="draggable" draggable="true" data-type="solution">💰 Investir massivement</div>
                    <div class="draggable" draggable="true" data-type="problem">😷 Obligation de porter un masque</div>
                    <div class="draggable" draggable="true" data-type="solution">📜 Faire des lois contraignantes</div>
                    <div class="draggable" draggable="true" data-type="problem">🏃 Millions de réfugiés</div>
                    <div class="draggable" draggable="true" data-type="solution">🤝 Action collective</div>
                    <div class="draggable" draggable="true" data-type="problem">🍞 Famine et misère</div>
                    <div class="draggable" draggable="true" data-type="solution">🌱 Consommer moins et mieux</div>
                </div>

                <div class="drop-zones">
                    <div class="drop-zone" id="problems-zone" data-type="problem">
                        <div class="drop-zone-title">⚠️ PROBLÈMES</div>
                    </div>
                    <div class="drop-zone" id="solutions-zone" data-type="solution">
                        <div class="drop-zone-title">✅ SOLUTIONS</div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkDragDrop()">✅ Vérifier</button>
                <button class="btn btn-secondary" onclick="resetDragDrop()">🔄 Recommencer</button>
            </div>

            <div class="feedback-box" id="dragdrop-feedback"></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">💭</div>
                <div class="card-title">Questions de Réflexion</div>
            </div>

            <div class="simple-explanation">
                <h3>🤔 Discutez avec votre classe :</h3>
                <br>
                <p><strong>1.</strong> Pourquoi le grand-père dit-il qu'il n'est « pas vraiment surpris » par le message du futur ?</p>
                <br>
                <p><strong>2.</strong> Dans votre vie, quelles actions pouvez-vous faire pour aider la planète ?</p>
                <br>
                <p><strong>3.</strong> Pensez-vous que les politiciens font assez pour le climat ? Pourquoi ou pourquoi pas ?</p>
                <br>
                <p><strong>4.</strong> Si vous pouviez écrire une lettre à vos propres petits-enfants en 2085, que leur diriez-vous ?</p>
                <br>
                <p><strong>5.</strong> Que signifie « la victoire ne pourra être que collective » ?</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">✍️</div>
                <div class="card-title">Activités d'Écriture</div>
            </div>

            <div class="info-box">
                <h3>📝 Activité 1 : Votre Lettre au Futur</h3>
                <p>Imaginez que vous êtes en 2025. Écrivez une courte lettre (100-150 mots) à une personne qui vivra en 2085. Que voulez-vous lui dire sur votre époque ?</p>
            </div>

            <div class="info-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <h3>💬 Activité 2 : Dialogue</h3>
                <p>Avec un partenaire, créez un dialogue entre deux personnes qui discutent de la chanson « 2083 ». L'une est optimiste (« on peut changer ! »), l'autre est pessimiste (« c'est trop tard »).</p>
            </div>

            <div class="info-box" style="background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);">
                <h3>📰 Activité 3 : Article de Journal</h3>
                <p>Écrivez un court article de journal (150-200 mots) pour l'année 2083 qui décrit un des problèmes mentionnés dans la chanson.</p>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">🌟</div>
                <div class="card-title">Thèmes Principaux</div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <span class="theme-badge">🌍 L'environnement</span>
                <span class="theme-badge">👴👶 Les générations</span>
                <span class="theme-badge">⏰ Le temps</span>
                <span class="theme-badge">🏛️ La politique</span>
                <span class="theme-badge">🤝 La responsabilité collective</span>
                <span class="theme-badge">📧 La correspondance</span>
                <span class="theme-badge">⚠️ L'urgence</span>
                <span class="theme-badge">💪 L'action</span>
            </div>

            <div class="simple-explanation">
                <h3>🎯 Le Message Principal :</h3>
                <p style="font-size: 1.2em; text-align: center; margin-top: 15px;">
                    <strong>« Il n'est pas encore trop tard, mais il faut agir MAINTENANT et ENSEMBLE ! »</strong>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Tooltip positioning fix
        document.addEventListener('DOMContentLoaded', function() {
            const vocabHovers = document.querySelectorAll('.vocab-hover');
            
            vocabHovers.forEach(hover => {
                hover.addEventListener('mouseenter', function(e) {
                    const tooltip = this.querySelector('.vocab-tooltip');
                    if (!tooltip) return;
                    
                    const rect = this.getBoundingClientRect();
                    const lyricsContainer = this.closest('.lyrics-container');
                    
                    if (lyricsContainer) {
                        const containerRect = lyricsContainer.getBoundingClientRect();
                        const tooltipHeight = 120; // approximate tooltip height with padding
                        const spaceAbove = rect.top - containerRect.top;
                        
                        // Check if there's not enough space above for the tooltip
                        if (spaceAbove < tooltipHeight) {
                            // Show tooltip below instead of above
                            tooltip.style.bottom = 'auto';
                            tooltip.style.top = '125%';
                        } else {
                            // Show tooltip above (default)
                            tooltip.style.bottom = '125%';
                            tooltip.style.top = 'auto';
                        }
                    }
                });
            });
        });
        
        // MCQ Functions
        let mcqQuestions = document.querySelectorAll('.mcq-question');
        
        mcqQuestions.forEach(question => {
            let options = question.querySelectorAll('.mcq-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from siblings
                    options.forEach(opt => opt.classList.remove('selected'));
                    // Add selected to clicked option
                    this.classList.add('selected');
                });
            });
        });

        function checkMCQ() {
            let total = mcqQuestions.length;
            let correct = 0;
            
            mcqQuestions.forEach(question => {
                let correctAnswer = question.dataset.correct;
                let selectedOption = question.querySelector('.mcq-option.selected');
                
                if (selectedOption) {
                    let selectedAnswer = selectedOption.dataset.answer;
                    if (selectedAnswer === correctAnswer) {
                        selectedOption.classList.add('correct');
                        correct++;
                    } else {
                        selectedOption.classList.add('incorrect');
                        // Show correct answer
                        let correctOption = question.querySelector(`[data-answer="${correctAnswer}"]`);
                        correctOption.classList.add('correct');
                    }
                }
            });
            
            let percentage = (correct / total) * 100;
            let feedback = document.getElementById('mcq-feedback');
            let scoreDisplay = document.getElementById('mcq-score');
            
            feedback.style.display = 'block';
            scoreDisplay.style.display = 'block';
            scoreDisplay.innerHTML = `📊 Score : ${correct} / ${total} (${Math.round(percentage)}%)`;
            
            if (percentage === 100) {
                feedback.className = 'feedback-box success';
                feedback.innerHTML = '🎉 PARFAIT ! Vous avez tout compris ! Bravo !';
            } else if (percentage >= 70) {
                feedback.className = 'feedback-box partial';
                feedback.innerHTML = `👍 BIEN ! Vous avez ${correct} bonnes réponses. Les réponses correctes sont en vert.`;
            } else {
                feedback.className = 'feedback-box error';
                feedback.innerHTML = `📚 Continuez à pratiquer ! Vous avez ${correct} bonnes réponses. Regardez les réponses en vert.`;
            }
        }

        function resetMCQ() {
            mcqQuestions.forEach(question => {
                let options = question.querySelectorAll('.mcq-option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
            });
            
            document.getElementById('mcq-feedback').style.display = 'none';
            document.getElementById('mcq-score').style.display = 'none';
        }

        // Ordering Functions
        let orderingItems = document.getElementById('ordering-items');
        let draggedItem = null;

        function initOrdering() {
            let items = orderingItems.querySelectorAll('.ordering-item');
            
            items.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    draggedItem = this;
                    this.classList.add('dragging');
                });
                
                item.addEventListener('dragend', function(e) {
                    this.classList.remove('dragging');
                });
                
                item.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    const afterElement = getDragAfterElement(orderingItems, e.clientY);
                    if (afterElement == null) {
                        orderingItems.appendChild(draggedItem);
                    } else {
                        orderingItems.insertBefore(draggedItem, afterElement);
                    }
                });
            });
            
            updateOrderingNumbers();
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.ordering-item:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function updateOrderingNumbers() {
            let items = orderingItems.querySelectorAll('.ordering-item');
            items.forEach((item, index) => {
                item.querySelector('.ordering-number').textContent = index + 1;
            });
        }

        function checkOrdering() {
            let items = orderingItems.querySelectorAll('.ordering-item');
            let correct = 0;
            
            items.forEach((item, index) => {
                let correctOrder = parseInt(item.dataset.order);
                let currentPosition = index + 1;
                
                if (correctOrder === currentPosition) {
                    item.style.background = '#d4edda';
                    item.style.borderColor = '#28a745';
                    correct++;
                } else {
                    item.style.background = '#f8d7da';
                    item.style.borderColor = '#dc3545';
                }
            });
            
            let total = items.length;
            let percentage = (correct / total) * 100;
            let feedback = document.getElementById('ordering-feedback');
            
            feedback.style.display = 'block';
            
            if (percentage === 100) {
                feedback.className = 'feedback-box success';
                feedback.innerHTML = '🎉 PARFAIT ! Vous avez mis tous les événements dans le bon ordre !';
            } else if (percentage >= 60) {
                feedback.className = 'feedback-box partial';
                feedback.innerHTML = `👍 PAS MAL ! ${correct}/${total} sont corrects. Les éléments en vert sont bien placés.`;
            } else {
                feedback.className = 'feedback-box error';
                feedback.innerHTML = `📚 Essayez encore ! ${correct}/${total} corrects. Réécoutez la chanson et réessayez.`;
            }
        }

        function resetOrdering() {
            let items = Array.from(orderingItems.querySelectorAll('.ordering-item'));
            
            // Shuffle items
            items.sort(() => Math.random() - 0.5);
            
            // Clear container
            orderingItems.innerHTML = '';
            
            // Re-add shuffled items
            items.forEach(item => {
                item.style.background = 'white';
                item.style.borderColor = '#ffc107';
                orderingItems.appendChild(item);
            });
            
            updateOrderingNumbers();
            document.getElementById('ordering-feedback').style.display = 'none';
        }

        // Drag and Drop Functions
        let draggables = document.querySelectorAll('.draggable');
        let dropZones = document.querySelectorAll('.drop-zone');
        let currentDraggable = null;

        function initDragDrop() {
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    currentDraggable = this;
                    this.classList.add('dragging');
                });
                
                draggable.addEventListener('dragend', function(e) {
                    this.classList.remove('dragging');
                });
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', function(e) {
                    this.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    
                    if (currentDraggable && this.id !== 'available-items') {
                        // Create dropped version
                        let dropped = document.createElement('div');
                        dropped.className = 'draggable dropped';
                        dropped.innerHTML = currentDraggable.innerHTML + ' <button class="remove-btn" onclick="removeFromZone(this)">✕</button>';
                        dropped.dataset.type = currentDraggable.dataset.type;
                        
                        this.appendChild(dropped);
                        currentDraggable.remove();
                    }
                });
            });
            
            // Make available-items a drop zone for returning items
            let availableItems = document.getElementById('available-items');
            availableItems.addEventListener('dragover', function(e) {
                e.preventDefault();
            });
            
            availableItems.addEventListener('drop', function(e) {
                e.preventDefault();
                if (currentDraggable && currentDraggable.classList.contains('dropped')) {
                    returnToAvailable(currentDraggable);
                }
            });
        }

        function removeFromZone(button) {
            let item = button.parentElement;
            returnToAvailable(item);
        }

        function returnToAvailable(item) {
            let newItem = document.createElement('div');
            newItem.className = 'draggable';
            newItem.draggable = true;
            newItem.innerHTML = item.innerHTML.replace(/<button.*<\/button>/, '').trim();
            newItem.dataset.type = item.dataset.type;
            
            newItem.addEventListener('dragstart', function(e) {
                currentDraggable = this;
                this.classList.add('dragging');
            });
            
            newItem.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
            });
            
            document.getElementById('available-items').appendChild(newItem);
            item.remove();
        }

        function checkDragDrop() {
            let problemsZone = document.getElementById('problems-zone');
            let solutionsZone = document.getElementById('solutions-zone');
            
            let problemItems = problemsZone.querySelectorAll('.dropped');
            let solutionItems = solutionsZone.querySelectorAll('.dropped');
            
            let correct = 0;
            let total = 0;
            
            problemItems.forEach(item => {
                total++;
                if (item.dataset.type === 'problem') {
                    item.style.background = '#d4edda';
                    item.style.borderColor = '#28a745';
                    correct++;
                } else {
                    item.style.background = '#f8d7da';
                    item.style.borderColor = '#dc3545';
                }
            });
            
            solutionItems.forEach(item => {
                total++;
                if (item.dataset.type === 'solution') {
                    item.style.background = '#d4edda';
                    item.style.borderColor = '#28a745';
                    correct++;
                } else {
                    item.style.background = '#f8d7da';
                    item.style.borderColor = '#dc3545';
                }
            });
            
            let percentage = total > 0 ? (correct / total) * 100 : 0;
            let feedback = document.getElementById('dragdrop-feedback');
            
            feedback.style.display = 'block';
            
            if (percentage === 100) {
                feedback.className = 'feedback-box success';
                feedback.innerHTML = '🎉 EXCELLENT ! Tout est bien classé !';
            } else if (percentage >= 70) {
                feedback.className = 'feedback-box partial';
                feedback.innerHTML = `👍 BIEN ! ${correct}/${total} corrects. Les éléments en vert sont bien placés, ceux en rouge non.`;
            } else {
                feedback.className = 'feedback-box error';
                feedback.innerHTML = `📚 ${correct}/${total} corrects. Relisez attentivement ! Vert = correct, Rouge = incorrect.`;
            }
        }

        function resetDragDrop() {
            // Return all dropped items to available
            let droppedItems = document.querySelectorAll('.dropped');
            droppedItems.forEach(item => {
                returnToAvailable(item);
            });
            
            document.getElementById('dragdrop-feedback').style.display = 'none';
        }

        // Initialize all activities on page load
        document.addEventListener('DOMContentLoaded', function() {
            initOrdering();
            initDragDrop();
        });
    </script>
</body>
</html>